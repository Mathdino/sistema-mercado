(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51185,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},37777,e=>{"use strict";var t=e.i(81061);e.i(7156);var r=t.createContext(void 0);function i(e){let i=t.useContext(r);return e||i||"ltr"}e.s(["useDirection",()=>i])},36102,e=>{"use strict";function t(e,[t,r]){return Math.min(r,Math.max(t,e))}e.s(["clamp",()=>t])},29439,e=>{"use strict";let t=(0,e.i(10965).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],29439)},7703,e=>{"use strict";let t=(0,e.i(10965).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],7703)},19278,e=>{"use strict";var t=e.i(7156),r=e.i(80987),i=e.i(81061),s=e.i(70065),a=e.i(67881),n=e.i(94179),l=e.i(29439),o=e.i(7703),d=e.i(70137),c=e.i(4421),u=e.i(30412);function m({product:e}){if(!e)return console.error("Invalid product data passed to ProductCard: product is null or undefined"),null;if(!e.id||"string"!=typeof e.id||""===e.id.trim())return console.error("Invalid product data passed to ProductCard: Product ID is missing or invalid",e),null;let[m,h]=(0,i.useState)(!1),[g,f]=(0,i.useState)(!1),{items:p,addItem:x,updateQuantity:v}=(0,c.useCartStore)(),{isAuthenticated:y}=(0,c.useAuthStore)(),j=p.find(t=>t.productId===e.id),b=j?.quantity||0,C=(0,i.useRef)(null),{triggerAnimation:N}=function(){let[e,t]=(0,i.useState)([]);return{triggerAnimation:(0,i.useCallback)(e=>{t(t=>[...t,{id:e,active:!0}]),setTimeout(()=>{t(t=>t.map(t=>t.id===e?{...t,active:!1}:t)),setTimeout(()=>{t(t=>t.filter(t=>t.id!==e))},300)},500)},[]),isAnimating:(0,i.useCallback)(t=>{let r=e.find(e=>e.id===t);return!!r&&r.active},[e])}}();(0,i.useEffect)(()=>{let e=()=>{let e=document.querySelector("[data-cart-icon]");if(e){let t=e.getBoundingClientRect(),r=t.left+t.width/2,i=t.top+t.height/2;document.documentElement.style.setProperty("--cart-x",`${r}px`),document.documentElement.style.setProperty("--cart-y",`${i}px`)}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let P=async()=>{if(console.log("Attempting to add product:",e),!e.id||"string"!=typeof e.id||""===e.id.trim())return void console.error("Cannot add product to cart: Product ID is missing or invalid",e);let t=e.id.trim();if("undefined"===t||"null"===t||""===t)return void console.error("Cannot add product to cart: Product ID is invalid",e);if(!y)return void h(!0);f(!0),N(t);try{await x(t,1)}catch(e){console.error("Error adding item to cart:",e)}setTimeout(()=>{f(!1)},500)},w=async()=>{if(!e.id||"string"!=typeof e.id||""===e.id.trim())return void console.error("Cannot add product to cart after login: Product ID is missing or invalid",e);let t=e.id.trim();if("undefined"===t||"null"===t||""===t)return void console.error("Cannot add product to cart after login: Product ID is invalid",e);try{await x(t,1)}catch(e){console.error("Error adding item to cart after login:",e)}},M=e.originalPrice&&e.originalPrice>e.price;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Card,{className:`overflow-hidden py-0 pb-2 transition-all duration-300 ${g?"scale-95 bg-green-50 border-green-200":""}`,ref:C,children:[g&&(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:(0,t.jsx)("div",{className:"absolute animate-cart-item",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`}})}),(0,t.jsxs)(s.CardContent,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-muted rounded-t-lg overflow-hidden",children:[(0,t.jsx)(r.default,{src:e.image||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"}),M&&(0,t.jsxs)(n.Badge,{className:"absolute right-2 top-2 bg-destructive text-destructive-foreground",children:[Math.round((e.originalPrice-e.price)/e.originalPrice*100),"% OFF"]})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3",children:[(0,t.jsxs)("h3",{className:"line-clamp-2 text-sm font-medium leading-tight",children:[e.name," "]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"h-4",children:M&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-through",children:(0,d.formatCurrency)(e.originalPrice)})}),(0,t.jsxs)("p",{className:`${M?"text-xl":"text-lg"} font-bold text-primary`,children:[(0,d.formatCurrency)(e.price),(0,t.jsxs)("span",{className:"ml-2 align-middle text-xs font-medium text-muted-foreground",children:["/ ",e.unit]})]})]}),0===b?(0,t.jsx)(a.Button,{onClick:P,className:`w-full transition-all duration-300 ${g?"bg-green-500 hover:bg-green-600":""}`,size:"sm",disabled:g,children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"animate-pulse",children:"âœ“"}),(0,t.jsx)("span",{className:"ml-1",children:"Adicionado"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Plus,{className:"mr-1 h-4 w-4"}),"Adicionar"]})}):(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border bg-background",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>{v(e.id,b-1)},className:"h-8 w-8",children:(0,t.jsx)(o.Minus,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"font-semibold",children:b}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>{v(e.id,b+1)},className:"h-8 w-8",children:(0,t.jsx)(l.Plus,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsx)(u.LoginModal,{isOpen:m,onClose:()=>h(!1),onLoginSuccess:w})]})}e.s(["ProductCard",()=>m],19278)},84135,85497,e=>{"use strict";var t=e.i(10965);let r=(0,t.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>r],84135);let i=(0,t.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>i],85497)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51185,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},69035,e=>{"use strict";var t=e.i(7156),s=e.i(81061),r=e.i(95264),a="horizontal",i=["horizontal","vertical"],n=s.forwardRef((e,s)=>{var n;let{decorative:l,orientation:c=a,...o}=e,d=(n=c,i.includes(n))?c:a;return(0,t.jsx)(r.Primitive.div,{"data-orientation":d,...l?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:s})});n.displayName="Separator";var l=e.i(47163);function c({className:e,orientation:s="horizontal",decorative:r=!0,...a}){return(0,t.jsx)(n,{"data-slot":"separator",decorative:r,orientation:s,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...a})}e.s(["Separator",()=>c],69035)},11741,e=>{"use strict";let t=(0,e.i(10965).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],11741)},29439,e=>{"use strict";let t=(0,e.i(10965).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],29439)},7703,e=>{"use strict";let t=(0,e.i(10965).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],7703)},1566,e=>{"use strict";var t=e.i(7156),s=e.i(81061),r=e.i(15599),a=e.i(1337),i=e.i(73428),n=e.i(30412),l=e.i(80987),c=e.i(70065),o=e.i(67881),d=e.i(29439),u=e.i(7703),m=e.i(11741),h=e.i(70137),x=e.i(4421);function f({item:e}){let[r,a]=(0,s.useState)(!1),{updateQuantity:i,removeItem:f}=(0,x.useCartStore)(),{isAuthenticated:p}=(0,x.useAuthStore)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"flex gap-4 p-3",children:[(0,t.jsx)("div",{className:"relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-md bg-muted",children:(0,t.jsx)(l.default,{src:e.product.image||"/placeholder.svg",alt:e.product.name,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"line-clamp-2 text-sm font-medium leading-tight",children:e.product.name}),(0,t.jsx)("p",{className:"text-sm font-bold text-primary",children:(0,h.formatCurrency)(e.price)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-background",children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{p?1===e.quantity?f(e.productId):i(e.productId,e.quantity-1):a(!0)},className:"h-8 w-8",children:1===e.quantity?(0,t.jsx)(m.Trash2,{className:"h-4 w-4 text-destructive"}):(0,t.jsx)(u.Minus,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"w-8 text-center font-semibold",children:e.quantity}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{p?i(e.productId,e.quantity+1):a(!0)},className:"h-8 w-8",children:(0,t.jsx)(d.Plus,{className:"h-4 w-4"})})]}),(0,t.jsx)("span",{className:"text-sm font-bold",children:(0,h.formatCurrency)(e.price*e.quantity)})]})]})]})}),(0,t.jsx)(n.LoginModal,{isOpen:r,onClose:()=>a(!1),onLoginSuccess:()=>{}})]})}var p=e.i(69035),j=e.i(27250),y=e.i(74872);function g(){let[e,l]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[m,g]=(0,s.useState)([]),v=(0,r.useRouter)(),{items:N,getTotal:b}=(0,x.useCartStore)(),{isAuthenticated:k}=(0,x.useAuthStore)();(0,s.useEffect)(()=>{u(!0)},[]),(0,s.useEffect)(()=>{d&&!k&&l(!0)},[d,k]),(0,s.useEffect)(()=>{let e=async()=>{if(0===N.length)return void g([]);try{let e=N.map(e=>{let t=j.mockProducts.find(t=>t.id===e.productId);return t?{...e,product:t}:null}).filter(Boolean);if(e.length===N.length)return void g(e);let t=await fetch("/api/products");if(t.ok){let e=await t.json(),s=N.map(t=>{let s=e.products.find(e=>e.id===t.productId);if(s)return{...t,product:s};let r=j.mockProducts.find(e=>e.id===t.productId);return r?{...t,product:r}:null}).filter(Boolean);g(s)}else g(e)}catch(e){console.error("Error fetching cart products:",e),g(N.map(e=>{let t=j.mockProducts.find(t=>t.id===e.productId);return t?{...e,product:t}:null}).filter(Boolean))}};d&&k&&N.length>0?e():0===N.length&&g([])},[N,d,k]);let C=b(),w=C>=j.mockMarket.minOrderValue?j.mockMarket.deliveryFee:0,S=C+w,M=C>=j.mockMarket.minOrderValue,B=()=>{};return d&&(k||e)?0===N.length?(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(a.ClientHeader,{showBack:!0}),(0,t.jsxs)("main",{className:"flex flex-col items-center justify-center px-4 py-16",children:[(0,t.jsx)("div",{className:"flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:(0,t.jsx)(y.ShoppingBag,{className:"h-12 w-12 text-muted-foreground"})}),(0,t.jsx)("h2",{className:"mt-6 text-xl font-semibold",children:"Seu carrinho está vazio"}),(0,t.jsx)("p",{className:"mt-2 text-center text-muted-foreground",children:"Adicione produtos do mercado para continuar"}),(0,t.jsx)(o.Button,{className:"mt-6",onClick:()=>v.push("/client/market"),children:"Ir às compras"})]}),(0,t.jsx)(i.BottomNav,{}),(0,t.jsx)(n.LoginModal,{isOpen:e,onClose:()=>l(!1),onLoginSuccess:B})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-25",children:[(0,t.jsx)(a.ClientHeader,{showBack:!0}),(0,t.jsxs)("main",{className:"space-y-4 px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Carrinho"}),(0,t.jsx)("div",{className:"space-y-3",children:m.map((e,s)=>(0,t.jsx)(f,{item:e},`${e.productId}-${s}`))}),(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"space-y-3 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,t.jsx)("span",{className:"font-medium",children:(0,h.formatCurrency)(C)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Taxa de entrega"}),(0,t.jsx)("span",{className:"font-medium",children:w>0?(0,h.formatCurrency)(w):"Grátis"})]}),(0,t.jsx)(p.Separator,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Total"}),(0,t.jsx)("span",{className:"text-xl font-bold text-primary",children:(0,h.formatCurrency)(S)})]}),!M&&(0,t.jsxs)("p",{className:"text-xs text-destructive",children:["Pedido mínimo de ",(0,h.formatCurrency)(j.mockMarket.minOrderValue)]})]})})]}),(0,t.jsx)("div",{className:"left-0 right-0 border-t bg-background p-4",children:(0,t.jsxs)(o.Button,{className:"w-full",size:"lg",disabled:!M,onClick:()=>v.push("/client/checkout"),children:["Finalizar pedido · ",(0,h.formatCurrency)(S)]})}),(0,t.jsx)(i.BottomNav,{}),(0,t.jsx)(n.LoginModal,{isOpen:e,onClose:()=>l(!1),onLoginSuccess:B})]}):null}e.s(["default",()=>g],1566)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92357,e=>{"use strict";let a=(0,e.i(10965).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>a],92357)},73428,84244,e=>{"use strict";var a=e.i(7156),t=e.i(15599),s=e.i(10965);let r=(0,s.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var i=e.i(74872);let l=(0,s.default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var n=e.i(86591);let o=(0,s.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>o],84244);var d=e.i(47163),c=e.i(4421),u=e.i(94179),p=e.i(81061);function m(){let e=(0,t.useRouter)(),s=(0,t.usePathname)(),{isAuthenticated:m}=(0,c.useAuthStore)(),[h,x]=(0,p.useState)(!1),[f,g]=(0,p.useState)(0);(0,p.useEffect)(()=>{x(!0),g(c.useCartStore.getState().getItemCount())},[]),(0,p.useEffect)(()=>{if(h)return c.useCartStore.subscribe(e=>{g(e.getItemCount())})},[h]);let v=[{icon:r,label:"Início",path:"/client"},{icon:i.ShoppingBag,label:"Mercado",path:"/client/market"},{icon:l,label:"Carrinho",path:"/client/cart"},{icon:n.Clock,label:"Pedidos",path:"/client/orders",requireAuth:!0},{icon:o,label:"Perfil",path:"/client/profile",requireAuth:!0}],j=a=>{e.push(a)};return h?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t bg-background",children:(0,a.jsx)("div",{className:"relative flex items-center justify-around py-2",children:v.map(e=>{let t=e.icon,r=s===e.path;return"/client/cart"===e.path?(0,a.jsxs)("button",{onClick:()=>j(e.path),className:"relative -translate-y-3 transform",children:[(0,a.jsxs)("div",{className:(0,d.cn)("relative flex h-12 w-12 items-center justify-center rounded-full bg-primary shadow-lg transition-all",r?"ring-2 ring-primary":""),"data-cart-icon":!0,children:[(0,a.jsx)(t,{className:"h-6 w-6 text-primary-foreground"}),f>0&&(0,a.jsx)("span",{className:"absolute -right-1.5 -top-1.5 flex h-5 w-5 items-center justify-center",children:(0,a.jsx)(u.Badge,{className:"absolute h-5 w-5 rounded-full p-0 text-xs",children:f})})]}),(0,a.jsx)("span",{className:(0,d.cn)("mt-1 block text-center text-xs font-semibold",r?"text-primary":"text-foreground"),children:e.label})]},e.path):(0,a.jsxs)("button",{onClick:()=>j(e.path),className:(0,d.cn)("flex flex-col items-center gap-1 px-4 py-2 transition-colors",r?"text-primary":"text-muted-foreground"),children:[(0,a.jsx)(t,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.path)})})})}):(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t bg-background",children:(0,a.jsx)("div",{className:"relative flex items-center justify-around py-2",children:v.map(e=>(e.icon,(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 px-4 py-2",children:[(0,a.jsx)("div",{className:"h-5 w-5"})," ",(0,a.jsx)("span",{className:"text-xs font-medium invisible",children:e.label})]},e.path)))})})}e.s(["BottomNav",()=>m],73428)},23750,e=>{"use strict";var a=e.i(7156),t=e.i(47163);function s({className:e,type:s,...r}){return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},10708,e=>{"use strict";var a=e.i(7156),t=e.i(81061),s=e.i(95264),r=t.forwardRef((e,t)=>(0,a.jsx)(s.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));r.displayName="Label";var i=e.i(47163);function l({className:e,...t}){return(0,a.jsx)(r,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>l],10708)},30374,e=>{"use strict";var a=e.i(7156),t=e.i(81061),s=e.i(78896),r=e.i(69136),i=e.i(21463),l=e.i(19960),n=e.i(45081),o=e.i(15208),d=e.i(46666),c=e.i(40535),u=e.i(93142),p=e.i(95264),m=e.i(29972),h=e.i(14329),x=e.i(73772),f=e.i(64701),g="Dialog",[v,j]=(0,i.createContextScope)(g),[y,b]=v(g),N=e=>{let{__scopeDialog:s,children:r,open:i,defaultOpen:o,onOpenChange:d,modal:c=!0}=e,u=t.useRef(null),p=t.useRef(null),[m=!1,h]=(0,n.useControllableState)({prop:i,defaultProp:o,onChange:d});return(0,a.jsx)(y,{scope:s,triggerRef:u,contentRef:p,contentId:(0,l.useId)(),titleId:(0,l.useId)(),descriptionId:(0,l.useId)(),open:m,onOpenChange:h,onOpenToggle:t.useCallback(()=>h(e=>!e),[h]),modal:c,children:r})};N.displayName=g;var C="DialogTrigger";t.forwardRef((e,t)=>{let{__scopeDialog:i,...l}=e,n=b(C,i),o=(0,r.useComposedRefs)(t,n.triggerRef);return(0,a.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":H(n.open),...l,ref:o,onClick:(0,s.composeEventHandlers)(e.onClick,n.onOpenToggle)})}).displayName=C;var w="DialogPortal",[k,D]=v(w,{forceMount:void 0}),S=e=>{let{__scopeDialog:s,forceMount:r,children:i,container:l}=e,n=b(w,s);return(0,a.jsx)(k,{scope:s,forceMount:r,children:t.Children.map(i,e=>(0,a.jsx)(u.Presence,{present:r||n.open,children:(0,a.jsx)(c.Portal,{asChild:!0,container:l,children:e})}))})};S.displayName=w;var E="DialogOverlay",F=t.forwardRef((e,t)=>{let s=D(E,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,l=b(E,e.__scopeDialog);return l.modal?(0,a.jsx)(u.Presence,{present:r||l.open,children:(0,a.jsx)(P,{...i,ref:t})}):null});F.displayName=E;var P=t.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=b(E,s);return(0,a.jsx)(h.RemoveScroll,{as:f.Slot,allowPinchZoom:!0,shards:[i.contentRef],children:(0,a.jsx)(p.Primitive.div,{"data-state":H(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),I="DialogContent",z=t.forwardRef((e,t)=>{let s=D(I,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,l=b(I,e.__scopeDialog);return(0,a.jsx)(u.Presence,{present:r||l.open,children:l.modal?(0,a.jsx)(L,{...i,ref:t}):(0,a.jsx)(R,{...i,ref:t})})});z.displayName=I;var L=t.forwardRef((e,i)=>{let l=b(I,e.__scopeDialog),n=t.useRef(null),o=(0,r.useComposedRefs)(i,l.contentRef,n);return t.useEffect(()=>{let e=n.current;if(e)return(0,x.hideOthers)(e)},[]),(0,a.jsx)(O,{...e,ref:o,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),l.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.composeEventHandlers)(e.onPointerDownOutside,e=>{let a=e.detail.originalEvent,t=0===a.button&&!0===a.ctrlKey;(2===a.button||t)&&e.preventDefault()}),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),R=t.forwardRef((e,s)=>{let r=b(I,e.__scopeDialog),i=t.useRef(!1),l=t.useRef(!1);return(0,a.jsx)(O,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(i.current||r.triggerRef.current?.focus(),a.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(i.current=!0,"pointerdown"===a.detail.originalEvent.type&&(l.current=!0));let t=a.target;r.triggerRef.current?.contains(t)&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&l.current&&a.preventDefault()}})}),O=t.forwardRef((e,s)=>{let{__scopeDialog:i,trapFocus:l,onOpenAutoFocus:n,onCloseAutoFocus:c,...u}=e,p=b(I,i),h=t.useRef(null),x=(0,r.useComposedRefs)(s,h);return(0,m.useFocusGuards)(),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:n,onUnmountAutoFocus:c,children:(0,a.jsx)(o.DismissableLayer,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":H(p.open),...u,ref:x,onDismiss:()=>p.onOpenChange(!1)})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{titleId:p.titleId}),(0,a.jsx)(W,{contentRef:h,descriptionId:p.descriptionId})]})]})}),M="DialogTitle",B=t.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=b(M,s);return(0,a.jsx)(p.Primitive.h2,{id:i.titleId,...r,ref:t})});B.displayName=M;var $="DialogDescription",A=t.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=b($,s);return(0,a.jsx)(p.Primitive.p,{id:i.descriptionId,...r,ref:t})});A.displayName=$;var q="DialogClose",T=t.forwardRef((e,t)=>{let{__scopeDialog:r,...i}=e,l=b(q,r);return(0,a.jsx)(p.Primitive.button,{type:"button",...i,ref:t,onClick:(0,s.composeEventHandlers)(e.onClick,()=>l.onOpenChange(!1))})});function H(e){return e?"open":"closed"}T.displayName=q;var _="DialogTitleWarning",[U,V]=(0,i.createContext)(_,{contentName:I,titleName:M,docsSlug:"dialog"}),K=({titleId:e})=>{let a=V(_),s=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return t.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},W=({contentRef:e,descriptionId:a})=>{let s=V("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return t.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");a&&t&&(document.getElementById(a)||console.warn(r))},[r,e,a]),null},J=e.i(34853),J=J,G=e.i(47163);function Z({...e}){return(0,a.jsx)(N,{"data-slot":"dialog",...e})}function Q({...e}){return(0,a.jsx)(S,{"data-slot":"dialog-portal",...e})}function X({className:e,...t}){return(0,a.jsx)(F,{"data-slot":"dialog-overlay",className:(0,G.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Y({className:e,children:t,showCloseButton:s=!0,...r}){return(0,a.jsxs)(Q,{"data-slot":"dialog-portal",children:[(0,a.jsx)(X,{}),(0,a.jsxs)(z,{"data-slot":"dialog-content",className:(0,G.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,s&&(0,a.jsxs)(T,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(J.default,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ee({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,G.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ea({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,G.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function et({className:e,...t}){return(0,a.jsx)(B,{"data-slot":"dialog-title",className:(0,G.cn)("text-lg leading-none font-semibold",e),...t})}function es({className:e,...t}){return(0,a.jsx)(A,{"data-slot":"dialog-description",className:(0,G.cn)("text-muted-foreground text-sm",e),...t})}e.s(["Dialog",()=>Z,"DialogContent",()=>Y,"DialogDescription",()=>es,"DialogFooter",()=>ea,"DialogHeader",()=>ee,"DialogTitle",()=>et],30374)},84675,e=>{"use strict";let a=(0,e.i(10965).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],84675)},86591,e=>{"use strict";let a=(0,e.i(10965).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>a],86591)},49110,e=>{"use strict";let a=(0,e.i(10965).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>a],49110)},68793,e=>{"use strict";let a=(0,e.i(10965).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],68793)},94179,e=>{"use strict";var a=e.i(7156),t=e.i(64701),s=e.i(94237),r=e.i(47163);let i=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,asChild:l=!1,...n}){let o=l?t.Slot:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,r.cn)(i({variant:s}),e),...n})}e.s(["Badge",()=>l])},5576,e=>{"use strict";let a=(0,e.i(10965).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>a],5576)},93290,e=>{"use strict";let a=(0,e.i(10965).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],93290)},1337,30412,e=>{"use strict";var a=e.i(7156),t=e.i(15599),s=e.i(67881),r=e.i(84675),i=e.i(49110),l=e.i(4421);function n({showBack:e=!1}){let n=(0,t.useRouter)(),o=(0,l.useAuthStore)(e=>e.user),d=o?.addresses?.find(e=>e.isDefault)||o?.addresses?.[0];return(0,a.jsx)("header",{className:"sticky top-0 z-20 border-b bg-background",children:(0,a.jsx)("div",{className:"flex items-center justify-between px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e&&(0,a.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>n.back(),children:(0,a.jsx)(r.ArrowLeft,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"flex flex-col",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Olá, ",(e=>{if(!e)return"";let a=e.trim().split(" ");return 1===a.length?a[0]:`${a[0]} ${a[a.length-1]}`})(o?.name)]}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(i.MapPin,{className:"h-3 w-3 text-primary"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[d.street,", ",d.number," - ",d.city]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Bem-vindo,"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"faça seu login e aproveite nossas ofertas de casa"})]})})]})})})}e.s(["ClientHeader",()=>n],1337);var o=e.i(81061),d=e.i(23750),c=e.i(10708),u=e.i(30374),p=e.i(20682),m=e.i(74872),h=e.i(5576),x=e.i(68793),f=e.i(93290);function g({isOpen:e,onClose:r,onLoginSuccess:i}){(0,t.useRouter)();let{login:n,loginWithOAuth:g}=(0,l.useAuthStore)(),{toast:v}=(0,p.useToast)(),[j,y]=(0,o.useState)("login"),[b,N]=(0,o.useState)(""),[C,w]=(0,o.useState)(""),[k,D]=(0,o.useState)(""),[S,E]=(0,o.useState)(""),[F,P]=(0,o.useState)(""),[I,z]=(0,o.useState)(""),[L,R]=(0,o.useState)(""),[O,M]=(0,o.useState)(""),[B,$]=(0,o.useState)(""),[A,q]=(0,o.useState)(""),[T,H]=(0,o.useState)(""),[_,U]=(0,o.useState)(""),[V,K]=(0,o.useState)(""),[W,J]=(0,o.useState)(!1),[G,Z]=(0,o.useState)(!1),[Q,X]=(0,o.useState)(!1),Y=e=>{let a=e.replace(/\D/g,"").slice(0,11),t=a.slice(0,3),s=a.slice(3,6),r=a.slice(6,9),i=a.slice(9,11);return[t,s&&`.${s}`,r&&`.${r}`,i&&`-${i}`].filter(Boolean).join("")},ee=async e=>{e.preventDefault(),J(!0),await n(b,k)?(v({title:"Login realizado",description:"Bem-vindo de volta!"}),r(),i&&i()):v({title:"Erro ao fazer login",description:"CPF ou senha incorretos",variant:"destructive"}),J(!1)},ea=async()=>{let e=L.replace(/\D/g,"").slice(0,8);if(8!==e.length)return void v({title:"CEP inválido",description:"Informe 8 dígitos do CEP",variant:"destructive"});try{let a=await fetch(`https://viacep.com.br/ws/${e}/json/`),t=await a.json();if(t?.erro)return void v({title:"CEP não encontrado",variant:"destructive"});M(t.logradouro||""),$(t.localidade||""),q(t.bairro||""),H(t.uf||"")}catch{v({title:"Erro ao buscar CEP",variant:"destructive"})}},et=async e=>{e.preventDefault(),J(!0);try{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:F.trim(),cpf:b,phone:I,password:k,confirmPassword:S,address:{cep:L.replace(/\D/g,""),street:O,city:B,neighborhood:A,state:T,number:_,complement:V}})}),a=await e.json();if(e.ok&&a.user)v({title:"Conta criada",description:"Agora entre com seu CPF e senha."}),y("login"),D(""),E("");else{let e=a?.error==="cpf_exists"?"CPF já cadastrado":a?.error==="password_mismatch"?"Senhas não conferem":a?.error==="invalid_cpf"?"CPF inválido, verifique os dígitos":`Erro ao criar conta${a?.details?`: ${a.details}`:""}`;v({title:"Erro",description:e,variant:"destructive"})}}catch{v({title:"Erro ao criar conta",variant:"destructive"})}J(!1)};return(0,a.jsx)(u.Dialog,{open:e,onOpenChange:r,children:(0,a.jsxs)(u.DialogContent,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)(u.DialogHeader,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary",children:(0,a.jsx)(m.ShoppingBag,{className:"h-8 w-8 text-primary-foreground"})}),(0,a.jsx)(u.DialogTitle,{className:"text-2xl",children:"Bem-vindo"}),(0,a.jsx)(u.DialogDescription,{children:"Entre com sua conta para continuar"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(s.Button,{variant:"login"===j?"default":"outline",onClick:()=>y("login"),children:"Entrar"}),(0,a.jsx)(s.Button,{variant:"register"===j?"default":"outline",onClick:()=>y("register"),children:"Criar conta"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("span",{className:"w-full border-t"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,a.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"login"===j?"Entre com seu CPF":"Preencha seus dados para criar a conta"})})]}),"login"===j?(0,a.jsxs)("form",{onSubmit:ee,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-cpf",children:"CPF"}),(0,a.jsx)(d.Input,{id:"modal-cpf",type:"text",placeholder:"000.000.000-00",value:C,onChange:e=>{let a=e.target.value.replace(/\D/g,"").slice(0,11);N(a),w(Y(a))},required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-password",children:"Senha"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Input,{id:"modal-password",type:G?"text":"password",placeholder:"••••••••",value:k,onChange:e=>D(e.target.value),required:!0}),(0,a.jsx)(s.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>Z(e=>!e),"aria-label":G?"Ocultar senha":"Mostrar senha",children:G?(0,a.jsx)(f.EyeOff,{className:"h-4 w-4"}):(0,a.jsx)(x.Eye,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(s.Button,{type:"submit",className:"w-full",disabled:W,children:W?"Entrando...":"Entrar"})]}):(0,a.jsxs)("form",{onSubmit:et,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-fullname",children:"Nome Completo"}),(0,a.jsx)(d.Input,{id:"modal-fullname",type:"text",placeholder:"Seu nome completo",value:F,onChange:e=>P(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-cpf",children:"CPF"}),(0,a.jsx)(d.Input,{id:"modal-cpf",type:"text",placeholder:"000.000.000-00",value:C,onChange:e=>{let a=e.target.value.replace(/\D/g,"").slice(0,11);N(a),w(Y(a))},required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-phone",children:"Telefone"}),(0,a.jsx)(d.Input,{id:"modal-phone",type:"text",placeholder:"(00) 00000-0000",value:I,onChange:e=>{let a,t,s,r;return z((t=(a=e.target.value.replace(/\D/g,"").slice(0,11)).slice(0,2),s=a.slice(2,7),[t&&`(${t}) `,s,(r=a.slice(7,11))&&`-${r}`].filter(Boolean).join("")))},required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 items-end",children:[(0,a.jsxs)("div",{className:"space-y-2 sm:col-span-1",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-cep",children:"CEP"}),(0,a.jsx)(d.Input,{id:"modal-cep",type:"text",placeholder:"00000000",value:L,onChange:e=>R(e.target.value.replace(/\D/g,"")),required:!0})]}),(0,a.jsx)("div",{className:"sm:col-span-1",children:(0,a.jsxs)(s.Button,{type:"button",className:"w-full",onClick:ea,children:[(0,a.jsx)(h.Search,{className:"mr-2 h-4 w-4"}),"Buscar CEP"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-street",children:"Rua"}),(0,a.jsx)(d.Input,{id:"modal-street",type:"text",placeholder:"Rua",value:O,onChange:e=>M(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-city",children:"Cidade"}),(0,a.jsx)(d.Input,{id:"modal-city",type:"text",placeholder:"Cidade",value:B,onChange:e=>$(e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-neighborhood",children:"Bairro"}),(0,a.jsx)(d.Input,{id:"modal-neighborhood",type:"text",placeholder:"Bairro",value:A,onChange:e=>q(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-state",children:"Estado (UF)"}),(0,a.jsx)(d.Input,{id:"modal-state",type:"text",placeholder:"UF",value:T,onChange:e=>H(e.target.value.slice(0,2).toUpperCase()),required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-number",children:"Número"}),(0,a.jsx)(d.Input,{id:"modal-number",type:"text",placeholder:"Número",value:_,onChange:e=>U(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-complement",children:"Complemento"}),(0,a.jsx)(d.Input,{id:"modal-complement",type:"text",placeholder:"Apartamento, bloco, etc.",value:V,onChange:e=>K(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-password",children:"Senha"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Input,{id:"modal-password",type:G?"text":"password",placeholder:"••••••••",value:k,onChange:e=>D(e.target.value),required:!0}),(0,a.jsx)(s.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>Z(e=>!e),"aria-label":G?"Ocultar senha":"Mostrar senha",children:G?(0,a.jsx)(f.EyeOff,{className:"h-4 w-4"}):(0,a.jsx)(x.Eye,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"modal-confirm-password",children:"Confirmar Senha"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Input,{id:"modal-confirm-password",type:Q?"text":"password",placeholder:"••••••••",value:S,onChange:e=>E(e.target.value),required:!0}),(0,a.jsx)(s.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>X(e=>!e),"aria-label":Q?"Ocultar senha":"Mostrar senha",children:Q?(0,a.jsx)(f.EyeOff,{className:"h-4 w-4"}):(0,a.jsx)(x.Eye,{className:"h-4 w-4"})})]})]})]}),(0,a.jsx)(s.Button,{type:"submit",className:"w-full",disabled:W,children:W?"Criando conta...":"Criar conta"})]}),(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,a.jsx)("p",{children:"Use seu CPF e senha para acessar."})})]})]})})}e.s(["LoginModal",()=>g],30412)},69035,e=>{"use strict";var a=e.i(7156),t=e.i(81061),s=e.i(95264),r="horizontal",i=["horizontal","vertical"],l=t.forwardRef((e,t)=>{var l;let{decorative:n,orientation:o=r,...d}=e,c=(l=o,i.includes(l))?o:r;return(0,a.jsx)(s.Primitive.div,{"data-orientation":c,...n?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});l.displayName="Separator";var n=e.i(47163);function o({className:e,orientation:t="horizontal",decorative:s=!0,...r}){return(0,a.jsx)(l,{"data-slot":"separator",decorative:s,orientation:t,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}e.s(["Separator",()=>o],69035)},22253,e=>{"use strict";let a=(0,e.i(10965).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],22253)},79971,e=>{"use strict";let a=(0,e.i(10965).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>a],79971)},38084,e=>{"use strict";var a=e.i(7156),t=e.i(81061),s=e.i(15599),r=e.i(1337),i=e.i(73428),l=e.i(30412),n=e.i(67881),o=e.i(70065),d=e.i(69035),c=e.i(23750),u=e.i(10708),p=e.i(4421),m=e.i(20682),h=e.i(49110),x=e.i(79971),f=e.i(92357),g=e.i(22253);let v=(0,e.i(10965).default)("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);function j(){let[e,j]=(0,t.useState)(!1),[y,b]=(0,t.useState)(!1),[N,C]=(0,t.useState)(!1),[w,k]=(0,t.useState)(!1),[D,S]=(0,t.useState)({name:"",cpf:"",phone:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}}),E=(0,s.useRouter)(),{toast:F}=(0,m.useToast)(),{user:P,logout:I,isAuthenticated:z,updateUser:L}=(0,p.useAuthStore)();(0,t.useEffect)(()=>{k(!0)},[]),(0,t.useEffect)(()=>{if(w&&!z)j(!0);else if(w&&P){let e=P.addresses.find(e=>e.isDefault)||P.addresses[0];S({name:P.name||"",cpf:P.cpf?O(P.cpf):"",phone:P.phone?M(P.phone):"",address:{street:e?.street||"",number:e?.number||"",complement:e?.complement||"",neighborhood:e?.neighborhood||"",city:e?.city||"",state:e?.state||"",zipCode:e?.zipCode?B(e.zipCode):""}})}},[w,z,P]);let R=async()=>{if(P){console.log("Updating user with ID:",P.id),C(!0);try{let e=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D.name,phone:D.phone,address:D.address})}),a=await e.json();if(console.log("API response:",a),e.ok&&a.user)L(a.user),F({title:"Perfil atualizado",description:"Suas informações foram salvas com sucesso."}),b(!1);else throw Error(a.error||"Failed to update profile")}catch(e){console.error("Error updating profile:",e),F({title:"Erro ao atualizar",description:"Não foi possível salvar as alterações. Tente novamente.",variant:"destructive"})}finally{C(!1)}}},O=e=>e.replace(/\D/g,"").slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),M=e=>e.replace(/\D/g,"").slice(0,11).replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2"),B=e=>e.replace(/\D/g,"").slice(0,8).replace(/(\d{5})(\d)/,"$1-$2");return w&&(z||e)?(0,a.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,a.jsx)(r.ClientHeader,{}),(0,a.jsxs)("main",{className:"space-y-4 px-4 py-6",children:[(0,a.jsxs)(o.Card,{children:[(0,a.jsxs)(o.CardContent,{className:"flex items-center gap-4 p-4",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary",children:(0,a.jsx)("span",{className:"text-lg font-bold text-primary-foreground",children:(e=>{if(!e)return"UN";let a=e.trim().split(" ");return 1===a.length?a[0].charAt(0).toUpperCase():`${a[0].charAt(0)}${a[a.length-1].charAt(0)}`.toUpperCase()})(P?.name||"")})}),(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"font-semibold",children:P?.name})})]}),(0,a.jsxs)(n.Button,{variant:"ghost",size:"sm",className:"ml-auto",onClick:()=>b(!y),children:["Editar Conta",(0,a.jsx)(g.Edit,{className:"h-4 w-4"})]})]}),y?(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{children:"Editar informações"})}),(0,a.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"name",children:"Nome completo"}),(0,a.jsx)(c.Input,{id:"name",value:D.name,onChange:e=>S({...D,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"cpf",children:"CPF"}),(0,a.jsx)(c.Input,{id:"cpf",value:D.cpf,readOnly:!0,className:"bg-muted"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"phone",children:"Telefone"}),(0,a.jsx)(c.Input,{id:"phone",value:D.phone,onChange:e=>{let a=M(e.target.value);S({...D,phone:a})}})]}),(0,a.jsx)(d.Separator,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{children:"Endereço padrão"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"street",children:"Rua"}),(0,a.jsx)(c.Input,{id:"street",value:D.address.street,onChange:e=>S({...D,address:{...D.address,street:e.target.value}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"number",children:"Número"}),(0,a.jsx)(c.Input,{id:"number",value:D.address.number,onChange:e=>S({...D,address:{...D.address,number:e.target.value}})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"complement",children:"Complemento"}),(0,a.jsx)(c.Input,{id:"complement",value:D.address.complement,onChange:e=>S({...D,address:{...D.address,complement:e.target.value}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"neighborhood",children:"Bairro"}),(0,a.jsx)(c.Input,{id:"neighborhood",value:D.address.neighborhood,onChange:e=>S({...D,address:{...D.address,neighborhood:e.target.value}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"zipCode",children:"CEP"}),(0,a.jsx)(c.Input,{id:"zipCode",value:D.address.zipCode,onChange:e=>{let a=B(e.target.value);S({...D,address:{...D.address,zipCode:a}})}})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"city",children:"Cidade"}),(0,a.jsx)(c.Input,{id:"city",value:D.address.city,onChange:e=>S({...D,address:{...D.address,city:e.target.value}})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"state",children:"Estado"}),(0,a.jsx)(c.Input,{id:"state",value:D.address.state,onChange:e=>S({...D,address:{...D.address,state:e.target.value}})})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Button,{variant:"outline",className:"flex-1",onClick:()=>b(!1),disabled:N,children:"Cancelar"}),(0,a.jsx)(n.Button,{className:"flex-1",onClick:R,disabled:N,children:N?"Salvando...":"Salvar"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{children:"Informações pessoais"})}),(0,a.jsxs)(o.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.Phone,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Telefone"}),(0,a.jsx)("p",{className:"font-medium",children:P?.phone})]})]}),(0,a.jsx)(d.Separator,{}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(v,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"CPF"}),(0,a.jsx)("p",{className:"font-medium",children:P?.cpf?O(P.cpf):""})]})]})]})]}),(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{children:"Endereço padrão"})}),(0,a.jsx)(o.CardContent,{children:P?.addresses.find(e=>e.isDefault)?(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.MapPin,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"font-medium",children:[P.addresses.find(e=>e.isDefault)?.street,","," ",P.addresses.find(e=>e.isDefault)?.number,P.addresses.find(e=>e.isDefault)?.complement&&`, ${P.addresses.find(e=>e.isDefault)?.complement}`," ","-",P.addresses.find(e=>e.isDefault)?.neighborhood,", ",P.addresses.find(e=>e.isDefault)?.city," ","-",P.addresses.find(e=>e.isDefault)?.state,","," ",P.addresses.find(e=>e.isDefault)?.zipCode]})})]}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"Nenhum endereço cadastrado"})})]})]}),(0,a.jsxs)(n.Button,{variant:"outline",className:"w-full",onClick:()=>{I(),F({title:"Logout realizado",description:"Até logo!"}),E.push("/client")},children:[(0,a.jsx)(f.LogOut,{className:"mr-2 h-4 w-4"}),"Sair"]})]}),(0,a.jsx)(i.BottomNav,{}),(0,a.jsx)(l.LoginModal,{isOpen:e,onClose:()=>j(!1),onLoginSuccess:()=>{}})]}):null}e.s(["default",()=>j],38084)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51185,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},48054,e=>{"use strict";let t=(0,e.i(10965).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>t],48054)},64347,75358,e=>{"use strict";var t=e.i(10965);let a=(0,t.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>a],64347);let s=(0,t.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["default",()=>s],75358)},69035,e=>{"use strict";var t=e.i(7156),a=e.i(81061),s=e.i(95264),r="horizontal",i=["horizontal","vertical"],l=a.forwardRef((e,a)=>{var l;let{decorative:n,orientation:c=r,...d}=e,o=(l=c,i.includes(l))?c:r;return(0,t.jsx)(s.Primitive.div,{"data-orientation":o,...n?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:a})});l.displayName="Separator";var n=e.i(47163);function c({className:e,orientation:a="horizontal",decorative:s=!0,...r}){return(0,t.jsx)(l,{"data-slot":"separator",decorative:s,orientation:a,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}e.s(["Separator",()=>c],69035)},35301,26773,65515,e=>{"use strict";var t=e.i(10965);let a=(0,t.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],35301);let s=(0,t.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],26773);let r=(0,t.default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>r],65515)},49917,e=>{"use strict";var t=e.i(7156),a=e.i(81061),s=e.i(15599),r=e.i(1337),i=e.i(73428),l=e.i(30412),n=e.i(80987),c=e.i(70065),d=e.i(94179),o=e.i(67881),m=e.i(69035),u=e.i(70137),x=e.i(48054),h=e.i(86591),f=e.i(35301),p=e.i(26773),j=e.i(65515),g=e.i(64347),g=g,v=e.i(75358),v=v;let y={pending:{label:"Pendente",icon:h.Clock,variant:"secondary"},confirmed:{label:"Confirmado",icon:f.CheckCircle2,variant:"default"},preparing:{label:"Preparando",icon:x.Package,variant:"default"},delivering:{label:"Em entrega",icon:j.Truck,variant:"default"},delivered:{label:"Entregue",icon:f.CheckCircle2,variant:"outline"},cancelled:{label:"Cancelado",icon:p.XCircle,variant:"destructive"}};function N({order:e}){let[s,r]=(0,a.useState)(!1),i=y[e.status]||y.pending,l=i.icon;return(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"space-y-4 p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Pedido #",e.id.replace(/-/g,"").substring(0,8)]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,u.formatDate)(e.createdAt)})]}),(0,t.jsxs)(d.Badge,{variant:i.variant,className:`flex items-center gap-1 ${"pending"===e.status?"bg-orange-500 hover:bg-orange-600 text-white":"confirmed"===e.status?"bg-green-500 hover:bg-green-600 text-white":"cancelled"===e.status?"bg-red-500 hover:bg-red-600 text-white":""}`,children:[(0,t.jsx)(l,{className:"h-3 w-3"}),i.label]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.items.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"relative h-12 w-12 flex-shrink-0 overflow-hidden rounded bg-muted",children:(0,t.jsx)(n.default,{src:e.productImage||"/placeholder.svg",alt:e.productName,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-tight",children:e.productName}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.quantity,"x ",(0,u.formatCurrency)(e.price)]})]})]},e.productId)),e.items.length>2&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["+ ",e.items.length-2," itens"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t pt-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Total"}),(0,t.jsx)("span",{className:"text-lg font-bold text-green-600",children:(0,u.formatCurrency)(e.totalAmount)})]}),(0,t.jsx)(m.Separator,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(o.Button,{variant:"ghost",className:"w-full justify-between font-normal text-muted-foreground hover:text-foreground",onClick:()=>{r(!s)},children:[(0,t.jsx)("span",{children:"Detalhe"}),s?(0,t.jsx)(v.default,{className:"h-4 w-4"}):(0,t.jsx)(g.default,{className:"h-4 w-4"})]}),s&&(0,t.jsxs)("div",{className:"space-y-3 pl-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Itens do Pedido"}),e.items.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative h-8 w-8 flex-shrink-0 overflow-hidden rounded bg-muted",children:(0,t.jsx)(n.default,{src:e.productImage||"/placeholder.svg",alt:e.productName,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium leading-tight",children:e.productName}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.quantity,"x ",(0,u.formatCurrency)(e.price)]})]})]}),(0,t.jsx)("span",{className:"text-xs font-medium",children:(0,u.formatCurrency)(e.subtotal)})]},e.productId))]}),(0,t.jsx)(m.Separator,{}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,t.jsx)("span",{className:"font-medium",children:(0,u.formatCurrency)(e.subtotal)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Taxa de entrega"}),(0,t.jsx)("span",{className:"font-medium",children:e.deliveryFee>0?(0,u.formatCurrency)(e.deliveryFee):"Grátis"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm font-semibold",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsx)("span",{className:"text-green-600",children:(0,u.formatCurrency)(e.totalAmount)})]})]})]})]})]})})}var b=e.i(4421);function C(){let[e,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0);(0,s.useRouter)();let{user:f,isAuthenticated:p}=(0,b.useAuthStore)();(0,a.useEffect)(()=>{d(!0)},[]),(0,a.useEffect)(()=>{c&&!p&&n(!0)},[c,p]);let j=async()=>{if(p&&f?.id)try{let e=await fetch("/api/orders/me");if(e.ok){let t=await e.json();m(t)}}catch(e){console.error("Error fetching orders:",e)}finally{u&&x(!1)}};(0,a.useEffect)(()=>{j()},[p,f?.id]),(0,a.useEffect)(()=>{if(!p||!f?.id)return;let e=setInterval(()=>{j()},3e4);return()=>clearInterval(e)},[p,f?.id]);let g=(0,a.useMemo)(()=>o.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),[o]),v=()=>{};return c&&(p||e)?u?(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(r.ClientHeader,{}),(0,t.jsx)("main",{className:"flex flex-col items-center justify-center px-4 py-16",children:(0,t.jsx)("p",{children:"Carregando pedidos..."})}),(0,t.jsx)(i.BottomNav,{}),(0,t.jsx)(l.LoginModal,{isOpen:e,onClose:()=>n(!1),onLoginSuccess:v})]}):0===g.length?(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(r.ClientHeader,{}),(0,t.jsxs)("main",{className:"flex flex-col items-center justify-center px-4 py-16",children:[(0,t.jsx)("div",{className:"flex h-24 w-24 items-center justify-center rounded-full bg-muted",children:(0,t.jsx)(h.Clock,{className:"h-12 w-12 text-muted-foreground"})}),(0,t.jsx)("h2",{className:"mt-6 text-xl font-semibold",children:"Nenhum pedido ainda"}),(0,t.jsx)("p",{className:"mt-2 text-center text-muted-foreground",children:"Seus pedidos aparecerão aqui"})]}),(0,t.jsx)(i.BottomNav,{}),(0,t.jsx)(l.LoginModal,{isOpen:e,onClose:()=>n(!1),onLoginSuccess:v})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(r.ClientHeader,{}),(0,t.jsxs)("main",{className:"space-y-4 px-4 py-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Meus pedidos"}),(0,t.jsx)("div",{className:"space-y-3",children:g.map(e=>(0,t.jsx)(N,{order:e},e.id))})]}),(0,t.jsx)(i.BottomNav,{}),(0,t.jsx)(l.LoginModal,{isOpen:e,onClose:()=>n(!1),onLoginSuccess:v})]}):null}e.s(["default",()=>C],49917)}]);
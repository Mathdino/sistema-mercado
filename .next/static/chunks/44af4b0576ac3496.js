(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70137,e=>{"use strict";function t(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function a(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}function r(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"short"}).format(new Date(e))}e.s(["formatCurrency",()=>t,"formatDate",()=>a,"formatDateShort",()=>r])},89457,e=>{"use strict";let t=(0,e.i(10965).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],89457)},65739,e=>{"use strict";let t=(0,e.i(10965).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],65739)},39617,e=>{"use strict";var t=e.i(7156),a=e.i(81061),r=e.i(72287),l=e.i(22084),s=e.i(70065),i=e.i(62870),n=e.i(67881),d=e.i(70137),c=e.i(60039),o=e.i(65739),x=e.i(89457);let m=(0,e.i(10965).default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);function u(){let[e,u]=(0,a.useState)({totalRevenue:0,totalDeliveryFees:0,totalProductsSold:0,paymentBreakdown:{},recentOrders:[]}),[h,j]=(0,a.useState)(!0),[f,g]=(0,a.useState)(String(new Date().getMonth()+1)),[p,y]=(0,a.useState)(String(new Date().getFullYear())),[v,b]=(0,a.useState)(1);(0,a.useEffect)(()=>{(async()=>{try{j(!0);let e=await fetch(`/api/admin/financial?month=${f}&year=${p}&page=${v}&limit=10`);if(e.ok){let t=await e.json();u(t)}}catch(e){console.error("Error fetching financial data:",e)}finally{j(!1)}})()},[f,p,v]);let C={pix:"PIX",credit:"Cartão de Crédito",debit:"Cartão de Débito",cash:"Dinheiro"};return(0,t.jsx)(r.AuthGuard,{requireRole:"admin",children:(0,t.jsx)(l.AdminLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Financeiro"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Análise financeira e relatórios"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Select,{value:f,onValueChange:g,children:[(0,t.jsx)(i.SelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(i.SelectValue,{placeholder:"Mês"})}),(0,t.jsx)(i.SelectContent,{children:[{value:"1",label:"Janeiro"},{value:"2",label:"Fevereiro"},{value:"3",label:"Março"},{value:"4",label:"Abril"},{value:"5",label:"Maio"},{value:"6",label:"Junho"},{value:"7",label:"Julho"},{value:"8",label:"Agosto"},{value:"9",label:"Setembro"},{value:"10",label:"Outubro"},{value:"11",label:"Novembro"},{value:"12",label:"Dezembro"}].map(e=>(0,t.jsx)(i.SelectItem,{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)(i.Select,{value:p,onValueChange:y,children:[(0,t.jsx)(i.SelectTrigger,{className:"w-[100px]",children:(0,t.jsx)(i.SelectValue,{placeholder:"Ano"})}),(0,t.jsx)(i.SelectContent,{children:Array.from({length:5},(e,t)=>String(new Date().getFullYear()-t)).map(e=>(0,t.jsx)(i.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Receita Total"}),(0,t.jsx)(c.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h?"...":(0,d.formatCurrency)(e.totalRevenue)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pedidos confirmados (exclui cancelados)"})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Taxas de Entrega"}),(0,t.jsx)(o.TrendingUp,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h?"...":(0,d.formatCurrency)(e.totalDeliveryFees)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:h?"...":`${(e.totalDeliveryFees/(e.totalRevenue||1)*100).toFixed(1)}% da receita`})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Produtos Vendidos"}),(0,t.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h?"...":e.totalProductsSold}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total de produtos"})]})]})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"Receita por Forma de Pagamento"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(e.paymentBreakdown).map(([a,r])=>{let l=Number(r)/e.totalRevenue*100;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.CreditCard,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:C[a]})]}),(0,t.jsx)("span",{className:"font-bold",children:h?"...":(0,d.formatCurrency)(Number(r))})]}),(0,t.jsx)("div",{className:"h-2 overflow-hidden rounded-full bg-muted",children:(0,t.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${l}%`}})}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-muted-foreground",children:[l.toFixed(1),"% do total"]})]},a)})})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"Pedidos Recentes"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[e.recentOrders.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between border-b pb-4 last:border-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:["Pedido #",String(e.id).slice(0,8)]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,d.formatDateShort)(e.createdAt)})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-bold text-primary",children:h?"...":(0,d.formatCurrency)(e.totalAmount)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:C[e.paymentMethod]})]})]},e.id)),e.recentPagination&&e.recentPagination.totalPages>1&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Página ",v," de"," ",e.recentPagination.totalPages]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>b(e=>Math.max(1,e-1)),disabled:v<=1,children:"Anterior"}),(0,t.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>b(t=>Math.min(e.recentPagination.totalPages,t+1)),disabled:v>=e.recentPagination.totalPages,children:"Próximo"})]})]})]})})]})]})})})}e.s(["default",()=>u],39617)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5828,e=>{"use strict";var t=e.i(7156),a=e.i(81061),r=e.i(72287),n=e.i(22084),i=e.i(15599),s=e.i(70065),l=e.i(67881),o=e.i(23750),c=e.i(10708),d=e.i(62870),u=e.i(30374),m=e.i(63415),h=e.i(78896),x=e.i(69136),p=e.i(21463),f=e.i(45081),g=e.i(54857),v=e.i(8444),j=e.i(95264),y="Switch",[b,S]=(0,p.createContextScope)(y),[w,N]=b(y),C=a.forwardRef((e,r)=>{let{__scopeSwitch:n,name:i,checked:s,defaultChecked:l,required:o,disabled:c,value:d="on",onCheckedChange:u,form:m,...p}=e,[g,v]=a.useState(null),y=(0,x.useComposedRefs)(r,e=>v(e)),b=a.useRef(!1),S=!g||m||!!g.closest("form"),[N=!1,C]=(0,f.useControllableState)({prop:s,defaultProp:l,onChange:u});return(0,t.jsxs)(w,{scope:n,checked:N,disabled:c,children:[(0,t.jsx)(j.Primitive.button,{type:"button",role:"switch","aria-checked":N,"aria-required":o,"data-state":D(N),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:y,onClick:(0,h.composeEventHandlers)(e.onClick,e=>{C(e=>!e),S&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),S&&(0,t.jsx)(I,{control:g,bubbles:!b.current,name:i,value:d,checked:N,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});C.displayName=y;var k="SwitchThumb",P=a.forwardRef((e,a)=>{let{__scopeSwitch:r,...n}=e,i=N(k,r);return(0,t.jsx)(j.Primitive.span,{"data-state":D(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:a})});P.displayName=k;var I=e=>{let{control:r,checked:n,bubbles:i=!0,...s}=e,l=a.useRef(null),o=(0,g.usePrevious)(n),c=(0,v.useSize)(r);return a.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==n&&t){let a=new Event("click",{bubbles:i});t.call(e,n),e.dispatchEvent(a)}},[o,n,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function D(e){return e?"checked":"unchecked"}var E=e.i(47163);function T({className:e,...a}){return(0,t.jsx)(C,{"data-slot":"switch",className:(0,E.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(P,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var R=e.i(76567),M=e.i(93142),z=e.i(37777),L=e.i(19960),B="Tabs",[A,$]=(0,p.createContextScope)(B,[R.createRovingFocusGroupScope]),V=(0,R.createRovingFocusGroupScope)(),[F,H]=A(B),_=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:n,onValueChange:i,defaultValue:s,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=(0,z.useDirection)(o),[m,h]=(0,f.useControllableState)({prop:n,onChange:i,defaultProp:s});return(0,t.jsx)(F,{scope:r,baseId:(0,L.useId)(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:(0,t.jsx)(j.Primitive.div,{dir:u,"data-orientation":l,...d,ref:a})})});_.displayName=B;var O="TabsList",K=a.forwardRef((e,a)=>{let{__scopeTabs:r,loop:n=!0,...i}=e,s=H(O,r),l=V(r);return(0,t.jsx)(R.Root,{asChild:!0,...l,orientation:s.orientation,dir:s.dir,loop:n,children:(0,t.jsx)(j.Primitive.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:a})})});K.displayName=O;var X="TabsTrigger",q=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:n,disabled:i=!1,...s}=e,l=H(X,r),o=V(r),c=U(l.baseId,n),d=J(l.baseId,n),u=n===l.value;return(0,t.jsx)(R.Item,{asChild:!0,...o,focusable:!i,active:u,children:(0,t.jsx)(j.Primitive.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:a,onMouseDown:(0,h.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(n)}),onKeyDown:(0,h.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(n)}),onFocus:(0,h.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==l.activationMode;u||i||!e||l.onValueChange(n)})})})});q.displayName=X;var Y="TabsContent",G=a.forwardRef((e,r)=>{let{__scopeTabs:n,value:i,forceMount:s,children:l,...o}=e,c=H(Y,n),d=U(c.baseId,i),u=J(c.baseId,i),m=i===c.value,h=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(M.Presence,{present:s||m,children:({present:a})=>(0,t.jsx)(j.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!a,id:u,tabIndex:0,...o,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&l})})});function U(e,t){return`${e}-trigger-${t}`}function J(e,t){return`${e}-content-${t}`}function W({className:e,...a}){return(0,t.jsx)(_,{"data-slot":"tabs",className:(0,E.cn)("flex flex-col gap-2",e),...a})}function Z({className:e,...a}){return(0,t.jsx)(K,{"data-slot":"tabs-list",className:(0,E.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function Q({className:e,...a}){return(0,t.jsx)(q,{"data-slot":"tabs-trigger",className:(0,E.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function ee({className:e,...a}){return(0,t.jsx)(G,{"data-slot":"tabs-content",className:(0,E.cn)("flex-1 outline-none",e),...a})}G.displayName=Y;var et=e.i(70137),ea=e.i(29439),er=e.i(44929),en=e.i(22253),ei=e.i(11741),es=e.i(86591),el=e.i(84675),eo=e.i(10965);let ec=(0,eo.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var ed=e.i(80987),eu=e.i(84762),em=e.i(36102),eh=e.i(14503),ex=["PageUp","PageDown"],ep=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ef={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},eg="Slider",[ev,ej,ey]=(0,eh.createCollection)(eg),[eb,eS]=(0,p.createContextScope)(eg,[ey]),[ew,eN]=eb(eg),eC=a.forwardRef((e,r)=>{let{name:n,min:i=0,max:s=100,step:l=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[i],value:m,onValueChange:x=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...j}=e,y=a.useRef(new Set),b=a.useRef(0),S="horizontal"===o,[w=[],N]=(0,f.useControllableState)({prop:m,defaultProp:u,onChange:e=>{let t=[...y.current];t[b.current]?.focus(),x(e)}}),C=a.useRef(w);function k(e,t,{commit:a}={commit:!1}){let r,n=(String(l).split(".")[1]||"").length,o=Math.round((Math.round((e-i)/l)*l+i)*(r=Math.pow(10,n)))/r,c=(0,em.clamp)(o,[i,s]);N((e=[])=>{let r=function(e=[],t,a){let r=[...e];return r[a]=t,r.sort((e,t)=>e-t)}(e,c,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,a)=>e[a+1]-t))>=t;return!0}(r,d*l))return e;{b.current=r.indexOf(c);let t=String(r)!==String(e);return t&&a&&p(r),t?r:e}})}return(0,t.jsx)(ew,{scope:e.__scopeSlider,name:n,disabled:c,min:i,max:s,valueIndexToChangeRef:b,thumbs:y.current,values:w,orientation:o,form:v,children:(0,t.jsx)(ev.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(ev.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(S?eI:eD,{"aria-disabled":c,"data-disabled":c?"":void 0,...j,ref:r,onPointerDown:(0,h.composeEventHandlers)(j.onPointerDown,()=>{c||(C.current=w)}),min:i,max:s,inverted:g,onSlideStart:c?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let a=e.map(e=>Math.abs(e-t)),r=Math.min(...a);return a.indexOf(r)}(w,e);k(e,t)},onSlideMove:c?void 0:function(e){k(e,b.current)},onSlideEnd:c?void 0:function(){let e=C.current[b.current];w[b.current]!==e&&p(w)},onHomeKeyDown:()=>!c&&k(i,0,{commit:!0}),onEndKeyDown:()=>!c&&k(s,w.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!c){let a=ex.includes(e.key)||e.shiftKey&&ep.includes(e.key),r=b.current;k(w[r]+l*(a?10:1)*t,r,{commit:!0})}}})})})})});eC.displayName=eg;var[ek,eP]=eb(eg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),eI=a.forwardRef((e,r)=>{let{min:n,max:i,dir:s,inverted:l,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...m}=e,[h,p]=a.useState(null),f=(0,x.useComposedRefs)(r,e=>p(e)),g=a.useRef(void 0),v=(0,z.useDirection)(s),j="ltr"===v,y=j&&!l||!j&&l;function b(e){let t=g.current||h.getBoundingClientRect(),a=eF([0,t.width],y?[n,i]:[i,n]);return g.current=t,a(e-t.left)}return(0,t.jsx)(ek,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:(0,t.jsx)(eE,{dir:v,"data-orientation":"horizontal",...m,ref:f,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=b(e.clientX);o?.(t)},onSlideMove:e=>{let t=b(e.clientX);c?.(t)},onSlideEnd:()=>{g.current=void 0,d?.()},onStepKeyDown:e=>{let t=ef[y?"from-left":"from-right"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),eD=a.forwardRef((e,r)=>{let{min:n,max:i,inverted:s,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=e,m=a.useRef(null),h=(0,x.useComposedRefs)(r,m),p=a.useRef(void 0),f=!s;function g(e){let t=p.current||m.current.getBoundingClientRect(),a=eF([0,t.height],f?[i,n]:[n,i]);return p.current=t,a(e-t.top)}return(0,t.jsx)(ek,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,t.jsx)(eE,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=g(e.clientY);l?.(t)},onSlideMove:e=>{let t=g(e.clientY);o?.(t)},onSlideEnd:()=>{p.current=void 0,c?.()},onStepKeyDown:e=>{let t=ef[f?"from-bottom":"from-top"].includes(e.key);d?.({event:e,direction:t?-1:1})}})})}),eE=a.forwardRef((e,a)=>{let{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...d}=e,u=eN(eg,r);return(0,t.jsx)(j.Primitive.span,{...d,ref:a,onKeyDown:(0,h.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):ex.concat(ep).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:(0,h.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():n(e)}),onPointerMove:(0,h.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:(0,h.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})})}),eT="SliderTrack",eR=a.forwardRef((e,a)=>{let{__scopeSlider:r,...n}=e,i=eN(eT,r);return(0,t.jsx)(j.Primitive.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:a})});eR.displayName=eT;var eM="SliderRange",ez=a.forwardRef((e,r)=>{let{__scopeSlider:n,...i}=e,s=eN(eM,n),l=eP(eM,n),o=a.useRef(null),c=(0,x.useComposedRefs)(r,o),d=s.values.length,u=s.values.map(e=>eV(e,s.min,s.max)),m=d>1?Math.min(...u):0,h=100-Math.max(...u);return(0,t.jsx)(j.Primitive.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...i,ref:c,style:{...e.style,[l.startEdge]:m+"%",[l.endEdge]:h+"%"}})});ez.displayName=eM;var eL="SliderThumb",eB=a.forwardRef((e,r)=>{let n=ej(e.__scopeSlider),[i,s]=a.useState(null),l=(0,x.useComposedRefs)(r,e=>s(e)),o=a.useMemo(()=>i?n().findIndex(e=>e.ref.current===i):-1,[n,i]);return(0,t.jsx)(eA,{...e,ref:l,index:o})}),eA=a.forwardRef((e,r)=>{var n,i,s,l,o;let c,d,{__scopeSlider:u,index:m,name:p,...f}=e,g=eN(eL,u),y=eP(eL,u),[b,S]=a.useState(null),w=(0,x.useComposedRefs)(r,e=>S(e)),N=!b||g.form||!!b.closest("form"),C=(0,v.useSize)(b),k=g.values[m],P=void 0===k?0:eV(k,g.min,g.max),I=(n=m,(i=g.values.length)>2?`Value ${n+1} of ${i}`:2===i?["Minimum","Maximum"][n]:void 0),D=C?.[y.size],E=D?(s=D,l=P,o=y.direction,d=eF([0,50],[0,c=s/2]),(c-d(l)*o)*o):0;return a.useEffect(()=>{if(b)return g.thumbs.add(b),()=>{g.thumbs.delete(b)}},[b,g.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[y.startEdge]:`calc(${P}% + ${E}px)`},children:[(0,t.jsx)(ev.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(j.Primitive.span,{role:"slider","aria-label":e["aria-label"]||I,"aria-valuemin":g.min,"aria-valuenow":k,"aria-valuemax":g.max,"aria-orientation":g.orientation,"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,tabIndex:g.disabled?void 0:0,...f,ref:w,style:void 0===k?{display:"none"}:e.style,onFocus:(0,h.composeEventHandlers)(e.onFocus,()=>{g.valueIndexToChangeRef.current=m})})}),N&&(0,t.jsx)(e$,{name:p??(g.name?g.name+(g.values.length>1?"[]":""):void 0),form:g.form,value:k},m)]})});eB.displayName=eL;var e$=e=>{let{value:r,...n}=e,i=a.useRef(null),s=(0,g.usePrevious)(r);return a.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(s!==r&&t){let a=new Event("input",{bubbles:!0});t.call(e,r),e.dispatchEvent(a)}},[s,r]),(0,t.jsx)("input",{style:{display:"none"},...n,ref:i,defaultValue:r})};function eV(e,t,a){return(0,em.clamp)(100/(a-t)*(e-t),[0,100])}function eF(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(a-e[0])}}function eH({className:e,defaultValue:r,value:n,min:i=0,max:s=100,...l}){let o=a.useMemo(()=>Array.isArray(n)?n:Array.isArray(r)?r:[i,s],[n,r,i,s]);return(0,t.jsxs)(eC,{"data-slot":"slider",defaultValue:r,value:n,min:i,max:s,className:(0,E.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...l,children:[(0,t.jsx)(eR,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,t.jsx)(ez,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:o.length},(e,a)=>(0,t.jsx)(eB,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]})}let e_=(0,eo.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eO=(0,eo.default)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),eK=(0,eo.default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),eX=(0,eo.default)("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var eq=e.i(60813),eY=e.i(20682);function eG({products:e,onSuccess:r,initialData:n,onCancel:i}){let{toast:s}=(0,eY.useToast)(),[u,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)(n?.productId||""),[p,f]=(0,a.useState)(n?.title||""),[g,v]=(0,a.useState)(n?.description||""),[j,y]=(0,a.useState)(n?.discountPrice?.toString()||""),[b,S]=(0,a.useState)(n?.config?.backgroundType||"solid"),[w,N]=(0,a.useState)(n?.config?.backgroundColor||"#ef4444"),[C,k]=(0,a.useState)(n?.config?.gradientStart||"#ef4444"),[P,I]=(0,a.useState)(n?.config?.gradientEnd||"#b91c1c"),[D,E]=(0,a.useState)(n?.config?.gradientDirection||"to right"),[T,R]=(0,a.useState)(n?.productImage||""),[M,z]=(0,a.useState)(n?.config?.productTransform?.scale??1),[L,B]=(0,a.useState)(n?.config?.productTransform?.rotate??0),[A,$]=(0,a.useState)(n?.config?.productTransform?.pos??{x:0,y:0}),V=(0,a.useRef)(null),F=(0,a.useRef)(null),H=(0,a.useRef)(null),[_,O]=(0,a.useState)(n?.config?.extraTexts||[]),[K,X]=(0,a.useState)(n?.config?.fontFamily||"sans"),[q,Y]=(0,a.useState)(n?.config?.textColor||"#000000"),[G,U]=(0,a.useState)(n?.config?.fontSize||"medium"),[J,ea]=(0,a.useState)(n?.config?.animation||"none");(0,a.useEffect)(()=>{if("none"!==J){let e=document.querySelector(".preview-animation-test");e&&(e.classList.remove(ei(J)),setTimeout(()=>{e.classList.add(ei(J))},10))}},[J]),(0,a.useEffect)(()=>{if(h){let t=e.find(e=>e.id===h);t&&(p||f(t.name),T||R(t.image))}},[h,e]);let er=async()=>{try{m(!0);let e=n?`/api/admin/promotion-cards/${n.id}`:"/api/admin/promotion-cards",t=n?"PUT":"POST";if(!(await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p,description:g,discountPrice:j,backgroundImage:null,productImage:T,productId:h,config:{backgroundType:b,backgroundColor:w,gradientStart:C,gradientEnd:P,gradientDirection:D,fontFamily:K,textColor:q,fontSize:G,animation:J,productTransform:{scale:M,rotate:L,pos:A},extraTexts:_}})})).ok)throw Error("Failed to save promotion banner");s({title:"Sucesso",description:"Banner de promoção salvo com sucesso!"}),r()}catch(e){console.error(e),s({title:"Erro",description:"Erro ao salvar banner. Tente novamente.",variant:"destructive"})}finally{m(!1)}},en=e=>{switch(e){case"serif":return"font-serif";case"mono":return"font-mono";case"cursive":return"font-cursive";default:return"font-sans"}},ei=e=>{switch(e){case"float":return"animate-float-slow";case"pulse":return"animate-pulse";case"spin":return"animate-spin-slow";case"zoom":return"animate-zoom-in";case"slide":return"animate-slide-in-left";case"rotate3d":return"animate-rotate-3d";default:return""}};return(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(W,{defaultValue:"content",children:[(0,t.jsxs)(Z,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(Q,{value:"content",children:[(0,t.jsx)(eX,{className:"w-4 h-4 mr-2"})," Conteúdo"]}),(0,t.jsxs)(Q,{value:"visual",children:[(0,t.jsx)(eO,{className:"w-4 h-4 mr-2"})," Visual"]}),(0,t.jsxs)(Q,{value:"typography",children:[(0,t.jsx)(eK,{className:"w-4 h-4 mr-2"})," Texto"]}),(0,t.jsxs)(Q,{value:"animation",children:[(0,t.jsx)(eq.Sparkles,{className:"w-4 h-4 mr-2"})," Animação"]})]}),(0,t.jsxs)(ee,{value:"content",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Produto (Opcional)"}),(0,t.jsxs)(d.Select,{value:h,onValueChange:x,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Selecione um produto..."})}),(0,t.jsx)(d.SelectContent,{children:e.map(e=>(0,t.jsxs)(d.SelectItem,{value:e.id,children:[e.name," - ",(0,et.formatCurrency)(e.price)]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Título Principal"}),(0,t.jsx)(o.Input,{value:p,onChange:e=>f(e.target.value),placeholder:"Ex: Promoção de Verão"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Descrição / Subtítulo"}),(0,t.jsx)(eu.Textarea,{value:g,onChange:e=>v(e.target.value),placeholder:"Detalhes da oferta..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Preço Promocional (R$)"}),(0,t.jsx)(o.Input,{type:"number",step:"0.01",value:j,onChange:e=>y(e.target.value),placeholder:"0.00"})]})]}),(0,t.jsxs)(ee,{value:"visual",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Tipo de Fundo"}),(0,t.jsxs)(d.Select,{value:b,onValueChange:e=>S(e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"solid",children:"Cor Sólida"}),(0,t.jsx)(d.SelectItem,{value:"gradient",children:"Gradiente"})]})]})]}),"solid"===b?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Cor de Fundo"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Input,{type:"color",className:"w-12 h-10 p-1",value:w,onChange:e=>N(e.target.value)}),(0,t.jsx)(o.Input,{value:w,onChange:e=>N(e.target.value)})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Cor Inicial"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Input,{type:"color",className:"w-12 h-10 p-1",value:C,onChange:e=>k(e.target.value)}),(0,t.jsx)(o.Input,{value:C,onChange:e=>k(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Cor Final"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Input,{type:"color",className:"w-12 h-10 p-1",value:P,onChange:e=>I(e.target.value)}),(0,t.jsx)(o.Input,{value:P,onChange:e=>I(e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Direção"}),(0,t.jsxs)(d.Select,{value:D,onValueChange:E,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"to right",children:"Para Direita"}),(0,t.jsx)(d.SelectItem,{value:"to left",children:"Para Esquerda"}),(0,t.jsx)(d.SelectItem,{value:"to bottom",children:"Para Baixo"}),(0,t.jsx)(d.SelectItem,{value:"to top",children:"Para Cima"}),(0,t.jsx)(d.SelectItem,{value:"to bottom right",children:"Diagonal (Baixo-Direita)"}),(0,t.jsx)(d.SelectItem,{value:"to top right",children:"Diagonal (Cima-Direita)"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(c.Label,{children:"Imagem do Produto"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Escala"}),(0,t.jsx)(eH,{defaultValue:[M],min:.5,max:1.5,step:.01,onValueChange:e=>z(e[0])}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["x",M.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Rotação"}),(0,t.jsx)(eH,{defaultValue:[L],min:-30,max:30,step:1,onValueChange:e=>B(e[0])}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[L,"°"]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>$({x:0,y:0}),children:"Resetar posição"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dica: arraste a imagem no preview para reposicionar."})]})]}),(0,t.jsxs)(ee,{value:"typography",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Fonte"}),(0,t.jsxs)(d.Select,{value:K,onValueChange:X,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"sans",children:"Sans Serif (Padrão)"}),(0,t.jsx)(d.SelectItem,{value:"serif",children:"Serif"}),(0,t.jsx)(d.SelectItem,{value:"mono",children:"Monospace"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Tamanho do Título"}),(0,t.jsxs)(d.Select,{value:G,onValueChange:U,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"small",children:"Pequeno"}),(0,t.jsx)(d.SelectItem,{value:"medium",children:"Médio"}),(0,t.jsx)(d.SelectItem,{value:"large",children:"Grande"}),(0,t.jsx)(d.SelectItem,{value:"xl",children:"Extra Grande"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Cor do Texto"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Input,{type:"color",className:"w-12 h-10 p-1",value:q,onChange:e=>Y(e.target.value)}),(0,t.jsx)(o.Input,{value:q,onChange:e=>Y(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.Label,{children:"Textos Extras"}),(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>O(e=>[...e,{id:crypto.randomUUID(),content:"Novo texto",color:"#ffffff",fontSize:"medium",x:10,y:80}]),children:"Adicionar Texto"})]}),(0,t.jsx)("div",{className:"space-y-3",children:_.map((e,a)=>(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 items-center",children:[(0,t.jsx)(o.Input,{value:e.content,onChange:t=>O(a=>a.map(a=>a.id===e.id?{...a,content:t.target.value}:a)),placeholder:"Conteúdo"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Input,{type:"color",className:"w-12 h-10 p-1",value:e.color,onChange:t=>O(a=>a.map(a=>a.id===e.id?{...a,color:t.target.value}:a))}),(0,t.jsx)(o.Input,{type:"number",className:"w-24",value:String(e.width??160),onChange:t=>O(a=>a.map(a=>a.id===e.id?{...a,width:Number(t.target.value||"0")}:a)),placeholder:"Largura (px)"}),(0,t.jsxs)(d.Select,{value:e.fontSize,onValueChange:t=>O(a=>a.map(a=>a.id===e.id?{...a,fontSize:t}:a)),children:[(0,t.jsx)(d.SelectTrigger,{className:"w-40",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"small",children:"Pequeno"}),(0,t.jsx)(d.SelectItem,{value:"medium",children:"Médio"}),(0,t.jsx)(d.SelectItem,{value:"large",children:"Grande"})]})]}),(0,t.jsx)(l.Button,{variant:"destructive",onClick:()=>O(t=>t.filter(t=>t.id!==e.id)),children:"Remover"})]})]},e.id))}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dica: arraste cada texto no preview para reposicionar."})]})]}),(0,t.jsx)(ee,{value:"animation",className:"space-y-4 mt-3",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{className:"mb-2",children:"Animação do Produto"}),(0,t.jsxs)(d.Select,{value:J,onValueChange:e=>{ea(e)},children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"none",children:"Nenhuma"}),(0,t.jsx)(d.SelectItem,{value:"float",children:"Flutuar (Lento)"}),(0,t.jsx)(d.SelectItem,{value:"pulse",children:"Pulsar"}),(0,t.jsx)(d.SelectItem,{value:"spin",children:"Girar (Muito Lento)"}),(0,t.jsx)(d.SelectItem,{value:"zoom",children:"Zoom"}),(0,t.jsx)(d.SelectItem,{value:"slide",children:"Deslizar da Esquerda"}),(0,t.jsx)(d.SelectItem,{value:"rotate3d",children:"Rotação 3D"})]})]})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:i,children:"Cancelar"}),(0,t.jsxs)(l.Button,{onClick:er,disabled:u,children:[u&&(0,t.jsx)(e_,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvar Banner"]})]})]}),(0,t.jsx)("div",{className:"border rounded-xl p-4 bg-gray-50 flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"relative w-[396px] h-[220px] rounded-lg shadow-xl flex flex-row overflow-hidden",style:{background:"gradient"===b?`linear-gradient(${D}, ${C}, ${P})`:w},ref:F,onMouseMove:e=>{if(!V.current)return;let t=F.current?.getBoundingClientRect();if(!t)return;let a=e.clientX-V.current.startX,r=e.clientY-V.current.startY,n=V.current.origX+a,i=V.current.origY+r;if("product"===V.current.type)$({x:Math.max(-100,Math.min(100,n)),y:Math.max(-60,Math.min(60,i))});else{let e=V.current.index;O(a=>a.map((a,r)=>r===e?{...a,x:Math.max(0,Math.min(t.width-(a.width??160),n)),y:Math.max(0,Math.min(t.height-24,i))}:a))}},onMouseUp:()=>{V.current=null},children:[(0,t.jsxs)("div",{className:"relative z-10 flex-1 flex flex-col p-6 justify-center items-start text-left h-full",children:[(0,t.jsx)("h2",{className:`font-bold mb-2 leading-tight ${en(K)} ${(e=>{switch(e){case"small":return"text-lg";case"large":return"text-4xl";case"xl":return"text-6xl";default:return"text-2xl"}})(G)}`,style:{color:q},children:p||"Título da Promoção"}),g&&(0,t.jsx)("p",{className:`mb-4 opacity-90 max-w-[90%] ${en(K)}`,style:{color:q},children:g}),j&&(0,t.jsxs)("div",{className:"mt-auto bg-white/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-lg inline-flex items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 font-medium mr-2",children:"Por apenas"}),(0,t.jsx)("span",{className:"text-xl font-bold text-green-600",children:(0,et.formatCurrency)(parseFloat(j))})]}),_.map((e,a)=>(0,t.jsx)("div",{className:"absolute cursor-move",style:{left:`${e.x}px`,top:`${e.y}px`,color:e.color,width:`${e.width??160}px`,fontSize:"small"===e.fontSize?"0.875rem":"large"===e.fontSize?"1.5rem":"1rem",fontWeight:700,zIndex:30,whiteSpace:"normal",wordBreak:"break-word"},onMouseDown:t=>{F.current?.getBoundingClientRect()&&(V.current={type:"text",index:a,startX:t.clientX,startY:t.clientY,origX:e.x,origY:e.y})},children:e.content},e.id))]}),(0,t.jsx)("div",{className:"relative z-10 w-[40%] h-full flex items-center justify-center p-4",style:{perspective:"800px"},ref:H,children:T&&(0,t.jsx)("div",{className:`w-full h-full relative ${ei(J)}`,children:(0,t.jsx)("div",{className:"w-full h-full",style:{transformOrigin:"center",transform:`translate(${A.x}px, ${A.y}px) scale(${M}) rotate(${L}deg)`},onMouseDown:e=>{H.current?.getBoundingClientRect()&&(V.current={type:"product",startX:e.clientX,startY:e.clientY,origX:A.x,origY:A.y})},children:(0,t.jsx)("img",{src:T,alt:"Product",className:"w-full h-full object-contain drop-shadow-lg"})})})})]})})]})}function eU({endDate:e}){let[r,n]=(0,a.useState)(""),[i,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=()=>{let t=new Date(e)-new Date;if(t>0){let e=Math.floor(t/864e5),a=Math.floor(t/36e5%24),r=Math.floor(t/1e3/60%60),i=Math.floor(t/1e3%60);n(`${e}d ${a}h ${r}m ${i}s`),s(!1)}else n("Expirado"),s(!0)};t();let a=setInterval(t,1e3);return()=>clearInterval(a)},[e]),(0,t.jsxs)("div",{className:`flex items-center gap-1 text-xs ${i?"text-red-500":"text-amber-600"}`,children:[(0,t.jsx)(es.Clock,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:r})]})}function eJ(){(0,i.useRouter)();let{toast:e}=(0,eY.useToast)(),[h,x]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[g,v]=(0,a.useState)(!0),[j,y]=(0,a.useState)(!1),[b,S]=(0,a.useState)({productId:"",promotionalPrice:"",endDate:"",isDateBased:!1}),[w,N]=(0,a.useState)(!1),[C,k]=(0,a.useState)(null),P=async()=>{try{let e=await fetch("/api/admin/products");if(e.ok){let t=await e.json();x(t.products)}}catch(e){console.error("Error fetching products:",e)}},I=async()=>{try{let e=await fetch("/api/admin/promotion-cards");if(e.ok){let t=await e.json();f(t)}}catch(e){console.error("Error fetching promotion cards:",e)}};(0,a.useEffect)(()=>{(async()=>{v(!0),await Promise.all([P(),I()]),v(!1)})()},[]);let D=async()=>{try{let t=await fetch("/api/admin/promotions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:b.productId,originalPrice:parseFloat(b.promotionalPrice),promotionEndDate:b.isDateBased?b.endDate:null})});if(t.ok){let a=await t.json();x(h.map(e=>e.id===a.id?a:e)),y(!1),S({productId:"",promotionalPrice:"",endDate:"",isDateBased:!1}),e({title:"Promoção adicionada com sucesso!"})}else{let a=await t.json();e({title:"Erro ao adicionar promoção",description:a.error,variant:"destructive"})}}catch(t){e({title:"Erro de rede",description:String(t),variant:"destructive"})}},E=async t=>{try{let a=await fetch(`/api/admin/promotions/${t}`,{method:"DELETE"});if(a.ok){let t=await a.json();x(h.map(e=>e.id===t.id?t:e)),e({title:"Promoção removida com sucesso!"})}else e({title:"Erro ao remover promoção",variant:"destructive"})}catch(t){e({title:"Erro de rede",description:String(t),variant:"destructive"})}},R=async t=>{if(confirm("Tem certeza que deseja excluir este banner?"))try{(await fetch(`/api/admin/promotion-cards/${t}`,{method:"DELETE"})).ok?(f(p.filter(e=>e.id!==t)),e({title:"Banner removido com sucesso!"})):e({title:"Erro ao remover banner",variant:"destructive"})}catch(t){e({title:"Erro de rede",description:String(t),variant:"destructive"})}},M=h.filter(e=>void 0!==e.originalPrice&&null!==e.originalPrice);return g?(0,t.jsx)(r.AuthGuard,{requireRole:"admin",children:(0,t.jsx)(n.AdminLayout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("p",{children:"Carregando..."})})})}):w||C?(0,t.jsx)(r.AuthGuard,{requireRole:"admin",children:(0,t.jsx)(n.AdminLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{N(!1),k(null)},children:(0,t.jsx)(el.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:C?"Editar Banner":"Novo Banner de Promoção"})]}),(0,t.jsx)(eG,{products:h,initialData:C,onSuccess:()=>{N(!1),k(null),I()},onCancel:()=>{N(!1),k(null)}})]})})}):(0,t.jsx)(r.AuthGuard,{requireRole:"admin",children:(0,t.jsx)(n.AdminLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Promoções"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Gerencie as promoções e banners da loja"})]}),(0,t.jsxs)(W,{defaultValue:"banners",className:"space-y-6",children:[(0,t.jsxs)(Z,{children:[(0,t.jsx)(Q,{value:"banners",children:"Banners Personalizados"}),(0,t.jsx)(Q,{value:"simple",children:"Promoções Simples"})]}),(0,t.jsxs)(ee,{value:"banners",className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(l.Button,{onClick:()=>N(!0),children:[(0,t.jsx)(ea.Plus,{className:"mr-2 h-4 w-4"}),"Criar Novo Banner"]})}),0===p.length?(0,t.jsxs)("div",{className:"text-center py-12 border rounded-lg bg-gray-50",children:[(0,t.jsx)(ec,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Nenhum banner criado"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Crie banners personalizados para destacar seus produtos."})]}):(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:p.map(e=>(0,t.jsxs)(s.Card,{className:"overflow-hidden group p-0",children:[(0,t.jsxs)("div",{className:"aspect-video relative bg-gray-100",children:[e.backgroundImage?(0,t.jsx)("img",{src:e.backgroundImage,alt:e.title,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{background:e.config?.backgroundType==="gradient"?`linear-gradient(${e.config?.gradientDirection||"to right"}, ${e.config?.gradientStart||"#ef4444"}, ${e.config?.gradientEnd||"#b91c1c"})`:e.config?.backgroundColor||"#f3f4f6"},children:e.productImage&&(0,t.jsx)("img",{src:e.productImage,className:"h-32 w-32 object-contain",alt:e.title})}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"secondary",size:"icon",onClick:()=>k(e),children:(0,t.jsx)(en.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(l.Button,{variant:"destructive",size:"icon",onClick:()=>R(e.id),children:(0,t.jsx)(ei.Trash2,{className:"h-4 w-4"})})]})]}),(0,t.jsx)(s.CardHeader,{className:"p-0",children:(0,t.jsx)(s.CardTitle,{className:"text-lg truncate p-4",children:e.title})}),(0,t.jsxs)(s.CardContent,{className:"p-0",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 p-4 pt-0",children:e.description||"Sem descrição"}),e.discountPrice&&(0,t.jsx)("div",{className:"font-bold text-green-600 p-4 pt-0",children:(0,et.formatCurrency)(e.discountPrice)})]})]},e.id))})]}),(0,t.jsxs)(ee,{value:"simple",className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(l.Button,{onClick:()=>y(!0),children:[(0,t.jsx)(ea.Plus,{className:"mr-2 h-4 w-4"}),"Adicionar Promoção Simples"]})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[M.map(e=>(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(s.CardTitle,{className:"text-lg",children:e.name}),(0,t.jsxs)(m.DropdownMenu,{children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(er.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsx)(m.DropdownMenuContent,{align:"end",children:(0,t.jsxs)(m.DropdownMenuItem,{onClick:()=>E(e.id),children:[(0,t.jsx)(ei.Trash2,{className:"mr-2 h-4 w-4"}),"Remover Promoção"]})})]})]})}),(0,t.jsx)(s.CardContent,{className:"p-4 pt-0",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"h-20 w-20 relative flex-shrink-0 bg-gray-100 rounded-md overflow-hidden",children:(0,t.jsx)(ed.default,{src:e.image||"/placeholder.png",alt:e.name,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("span",{className:"text-lg font-bold text-green-600",children:(0,et.formatCurrency)(e.price)}),e.originalPrice&&(0,t.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,et.formatCurrency)(e.originalPrice)})]}),e.promotionEndsAt&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(eU,{endDate:e.promotionEndsAt})})]})]})})]},e.id)),0===M.length&&(0,t.jsx)("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"Nenhuma promoção ativa no momento."})]})]})]}),(0,t.jsx)(u.Dialog,{open:j,onOpenChange:y,children:(0,t.jsxs)(u.DialogContent,{children:[(0,t.jsxs)(u.DialogHeader,{children:[(0,t.jsx)(u.DialogTitle,{children:"Adicionar Promoção Simples"}),(0,t.jsx)(u.DialogDescription,{children:"Selecione um produto e defina o novo preço promocional."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"product",children:"Produto"}),(0,t.jsxs)(d.Select,{value:b.productId,onValueChange:e=>S({...b,productId:e}),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Selecione um produto"})}),(0,t.jsx)(d.SelectContent,{children:h.filter(e=>!e.originalPrice).map(e=>(0,t.jsxs)(d.SelectItem,{value:e.id,children:[e.name," - ",(0,et.formatCurrency)(e.price)]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"price",children:"Preço Promocional"}),(0,t.jsx)(o.Input,{id:"price",type:"number",step:"0.01",placeholder:"0.00",value:b.promotionalPrice,onChange:e=>S({...b,promotionalPrice:e.target.value})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(T,{id:"date-based",checked:b.isDateBased,onCheckedChange:e=>S({...b,isDateBased:e})}),(0,t.jsx)(c.Label,{htmlFor:"date-based",children:"Definir data de término"})]}),b.isDateBased&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"end-date",children:"Data de Término"}),(0,t.jsx)(o.Input,{id:"end-date",type:"datetime-local",value:b.endDate,onChange:e=>S({...b,endDate:e.target.value})})]})]}),(0,t.jsxs)(u.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),(0,t.jsx)(l.Button,{onClick:D,disabled:!b.productId||!b.promotionalPrice,children:"Salvar Promoção"})]})]})})]})})})}e.s(["default",()=>eJ],5828)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51185,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},60813,e=>{"use strict";let t=(0,e.i(10965).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>t],60813)},20248,e=>{"use strict";var t=e.i(7156),s=e.i(70137);function a({data:e,className:a=""}){let{title:r,description:i,discountPrice:l,backgroundImage:n,productImage:d,config:o}=e,{backgroundType:c="solid",backgroundColor:u="#f3f4f6",gradientStart:m="#ef4444",gradientEnd:x="#b91c1c",gradientDirection:h="to right",fontFamily:p="sans",textColor:f="#000000",fontSize:g="medium",animation:j="none",productTransform:v={scale:1,rotate:0,pos:{x:0,y:0}},extraTexts:y=[],titleWidth:N,descriptionWidth:b}=o||{},w=e=>{switch(e){case"serif":return"font-serif";case"mono":return"font-mono";case"cursive":return"font-cursive";default:return"font-sans"}};return(0,t.jsxs)("div",{className:`relative w-[396px] h-[220px] overflow-hidden rounded-xl shadow-lg flex flex-row ${a}`,style:{background:"gradient"===c?`linear-gradient(${h}, ${m}, ${x})`:u},children:[(0,t.jsxs)("div",{className:"relative z-10 flex-1 flex flex-col p-6 justify-center items-start text-left h-full min-w-0",children:[(0,t.jsx)("h2",{className:`font-bold mb-2 leading-tight w-full break-words ${w(p)} ${(e=>{switch(e){case"small":return"text-lg";case"large":return"text-4xl";case"xl":return"text-6xl";default:return"text-2xl"}})(g)}`,style:{color:f,width:N?`${N}px`:void 0},children:r}),i&&(0,t.jsx)("p",{className:`mb-2 sm:mb-4 opacity-90 w-full break-words ${w(p)}`,style:{color:f,fontSize:"small"===g?"0.75rem":"0.875rem",width:b?`${b}px`:void 0},children:i}),l&&(0,t.jsxs)("div",{className:"mt-auto mb-2 sm:mb-4 bg-white/90 backdrop-blur-sm px-2.5 py-1 sm:px-4 sm:py-1.5 rounded-full shadow-lg inline-flex items-center whitespace-nowrap",children:[(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium mr-1.5 sm:mr-2",children:"Por apenas"}),(0,t.jsx)("span",{className:"text-base sm:text-xl font-bold text-green-600",children:(0,s.formatCurrency)(l)})]})]}),d&&(0,t.jsx)("div",{className:`absolute ${(e=>{switch(e){case"float":return"animate-float-slow";case"pulse":return"animate-pulse";case"spin":return"animate-spin-slow";case"zoom":return"animate-zoom-in";case"slide":return"animate-slide-in-left";case"rotate3d":return"animate-rotate-3d";default:return""}})(j)}`,style:{left:`${v.pos?.x??0}px`,top:`${v.pos?.y??0}px`,width:"160px",height:"160px",zIndex:20},children:(0,t.jsx)("div",{className:"w-full h-full",style:{transformOrigin:"center",transform:`scale(${v.scale??1}) rotate(${v.rotate??0}deg)`},children:(0,t.jsx)("img",{src:d,alt:r,className:"w-full h-full object-contain drop-shadow-xl"})})}),y.map(e=>(0,t.jsx)("div",{className:"absolute",style:{left:`${e.x}px`,top:`${e.y}px`,color:e.color,maxWidth:e.width?`${e.width}px`:void 0,fontSize:"small"===e.fontSize?"0.875rem":"large"===e.fontSize?"1.5rem":"1rem",fontWeight:700,zIndex:30},children:e.content},e.id))]})}e.s(["PromotionBanner",()=>a])},29439,e=>{"use strict";let t=(0,e.i(10965).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],29439)},7703,e=>{"use strict";let t=(0,e.i(10965).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],7703)},19278,e=>{"use strict";var t=e.i(7156),s=e.i(80987),a=e.i(81061),r=e.i(70065),i=e.i(67881),l=e.i(94179),n=e.i(29439),d=e.i(7703),o=e.i(70137),c=e.i(4421),u=e.i(30412);function m({product:e}){if(!e)return console.error("Invalid product data passed to ProductCard: product is null or undefined"),null;if(!e.id||"string"!=typeof e.id||""===e.id.trim())return console.error("Invalid product data passed to ProductCard: Product ID is missing or invalid",e),null;let[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),{items:f,addItem:g,updateQuantity:j}=(0,c.useCartStore)(),{isAuthenticated:v}=(0,c.useAuthStore)(),y=f.find(t=>t.productId===e.id),N=y?.quantity||0,b=(0,a.useRef)(null),{triggerAnimation:w}=function(){let[e,t]=(0,a.useState)([]);return{triggerAnimation:(0,a.useCallback)(e=>{t(t=>[...t,{id:e,active:!0}]),setTimeout(()=>{t(t=>t.map(t=>t.id===e?{...t,active:!1}:t)),setTimeout(()=>{t(t=>t.filter(t=>t.id!==e))},300)},500)},[]),isAnimating:(0,a.useCallback)(t=>{let s=e.find(e=>e.id===t);return!!s&&s.active},[e])}}();(0,a.useEffect)(()=>{let e=()=>{let e=document.querySelector("[data-cart-icon]");if(e){let t=e.getBoundingClientRect(),s=t.left+t.width/2,a=t.top+t.height/2;document.documentElement.style.setProperty("--cart-x",`${s}px`),document.documentElement.style.setProperty("--cart-y",`${a}px`)}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let k=async()=>{if(console.log("Attempting to add product:",e),!e.id||"string"!=typeof e.id||""===e.id.trim())return void console.error("Cannot add product to cart: Product ID is missing or invalid",e);let t=e.id.trim();if("undefined"===t||"null"===t||""===t)return void console.error("Cannot add product to cart: Product ID is invalid",e);if(!v)return void x(!0);p(!0),w(t);try{await g(t,1)}catch(e){console.error("Error adding item to cart:",e)}setTimeout(()=>{p(!1)},500)},P=async()=>{if(!e.id||"string"!=typeof e.id||""===e.id.trim())return void console.error("Cannot add product to cart after login: Product ID is missing or invalid",e);let t=e.id.trim();if("undefined"===t||"null"===t||""===t)return void console.error("Cannot add product to cart after login: Product ID is invalid",e);try{await g(t,1)}catch(e){console.error("Error adding item to cart after login:",e)}},C=e.originalPrice&&e.originalPrice>e.price;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Card,{className:`overflow-hidden py-0 pb-2 transition-all duration-300 ${h?"scale-95 bg-green-50 border-green-200":""}`,ref:b,children:[h&&(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:(0,t.jsx)("div",{className:"absolute animate-cart-item",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`}})}),(0,t.jsxs)(r.CardContent,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-muted rounded-t-lg overflow-hidden",children:[(0,t.jsx)(s.default,{src:e.image||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"}),C&&(0,t.jsxs)(l.Badge,{className:"absolute right-2 top-2 bg-destructive text-destructive-foreground",children:[Math.round((e.originalPrice-e.price)/e.originalPrice*100),"% OFF"]})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3",children:[(0,t.jsxs)("h3",{className:"line-clamp-2 text-sm font-medium leading-tight",children:[e.name," "]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"h-4",children:C&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-through",children:(0,o.formatCurrency)(e.originalPrice)})}),(0,t.jsxs)("p",{className:`${C?"text-xl":"text-lg"} font-bold text-primary`,children:[(0,o.formatCurrency)(e.price),(0,t.jsxs)("span",{className:"ml-2 align-middle text-xs font-medium text-muted-foreground",children:["/ ",e.unit]})]})]}),0===N?(0,t.jsx)(i.Button,{onClick:k,className:`w-full transition-all duration-300 ${h?"bg-green-500 hover:bg-green-600":""}`,size:"sm",disabled:h,children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"animate-pulse",children:"✓"}),(0,t.jsx)("span",{className:"ml-1",children:"Adicionado"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Plus,{className:"mr-1 h-4 w-4"}),"Adicionar"]})}):(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border bg-background",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{j(e.id,N-1)},className:"h-8 w-8",children:(0,t.jsx)(d.Minus,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"font-semibold",children:N}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{j(e.id,N+1)},className:"h-8 w-8",children:(0,t.jsx)(n.Plus,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsx)(u.LoginModal,{isOpen:m,onClose:()=>x(!1),onLoginSuccess:P})]})}e.s(["ProductCard",()=>m],19278)},84135,85497,e=>{"use strict";var t=e.i(10965);let s=(0,t.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>s],84135);let a=(0,t.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>a],85497)},79696,e=>{"use strict";var t=e.i(7156),s=e.i(81061),a=e.i(1337),r=e.i(19278),i=e.i(23750),l=e.i(5576),n=e.i(84135),d=e.i(85497),o=e.i(60813),c=e.i(20248);function u(){let[e,u]=(0,s.useState)(""),[m,x]=(0,s.useState)([]),[h,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[j,v]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{try{v(!0);let[e,t]=await Promise.all([fetch("/api/products"),fetch("/api/promotion-banners")]);if(e.ok){let t=await e.json();x(t.featuredProducts),p(t.promotionProducts)}if(t.ok){let e=await t.json();g(e)}}catch(e){console.error("Error fetching data:",e)}finally{v(!1)}})()},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(a.ClientHeader,{showBack:!0}),(0,t.jsxs)("main",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 bg-background px-4 py-4 shadow-sm",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(i.Input,{type:"search",placeholder:"Buscar promoções...",className:"pl-9",value:e,onChange:e=>u(e.target.value)})]})}),f.length>0&&(0,t.jsxs)("div",{className:"px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(o.Sparkles,{className:"h-5 w-5 text-purple-500"}),(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Ofertas Especiais"})]}),(0,t.jsx)("div",{className:"space-y-6",children:f.map(e=>(0,t.jsx)(c.PromotionBanner,{data:e},e.id))})]}),(0,t.jsxs)("div",{className:"px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(n.Star,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Produtos em Destaque"})]}),j?(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)("p",{children:"Carregando..."})}):m.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:m.map(e=>(0,t.jsx)(r.ProductCard,{product:e},e.id))}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhum produto em destaque"})})]}),(0,t.jsxs)("div",{className:"px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.Tag,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Mais Ofertas"})]}),j?(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)("p",{children:"Carregando..."})}):h.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:h.map(e=>(0,t.jsx)(r.ProductCard,{product:e},e.id))}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhuma oferta adicional"})})]})]})]})}e.s(["default",()=>u])}]);
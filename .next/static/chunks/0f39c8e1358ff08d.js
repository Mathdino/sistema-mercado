(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51185,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},29439,e=>{"use strict";let t=(0,e.i(10965).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],29439)},7703,e=>{"use strict";let t=(0,e.i(10965).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],7703)},19278,e=>{"use strict";var t=e.i(7156),s=e.i(80987),r=e.i(81061),i=e.i(70065),a=e.i(67881),n=e.i(94179),l=e.i(29439),o=e.i(7703),c=e.i(70137),d=e.i(4421),u=e.i(30412);function m({product:e}){if(!e)return console.error("Invalid product data passed to ProductCard: product is null or undefined"),null;if(!e.id||"string"!=typeof e.id||""===e.id.trim())return console.error("Invalid product data passed to ProductCard: Product ID is missing or invalid",e),null;let[m,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),{items:p,addItem:g,updateQuantity:j}=(0,d.useCartStore)(),{isAuthenticated:v}=(0,d.useAuthStore)(),b=p.find(t=>t.productId===e.id),N=b?.quantity||0,y=(0,r.useRef)(null),{triggerAnimation:w}=function(){let[e,t]=(0,r.useState)([]);return{triggerAnimation:(0,r.useCallback)(e=>{t(t=>[...t,{id:e,active:!0}]),setTimeout(()=>{t(t=>t.map(t=>t.id===e?{...t,active:!1}:t)),setTimeout(()=>{t(t=>t.filter(t=>t.id!==e))},300)},500)},[]),isAnimating:(0,r.useCallback)(t=>{let s=e.find(e=>e.id===t);return!!s&&s.active},[e])}}();(0,r.useEffect)(()=>{let e=()=>{let e=document.querySelector("[data-cart-icon]");if(e){let t=e.getBoundingClientRect(),s=t.left+t.width/2,r=t.top+t.height/2;document.documentElement.style.setProperty("--cart-x",`${s}px`),document.documentElement.style.setProperty("--cart-y",`${r}px`)}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let C=async()=>{if(console.log("Attempting to add product:",e),!e.id||"string"!=typeof e.id||""===e.id.trim())return void console.error("Cannot add product to cart: Product ID is missing or invalid",e);let t=e.id.trim();if("undefined"===t||"null"===t||""===t)return void console.error("Cannot add product to cart: Product ID is invalid",e);if(!v)return void x(!0);f(!0),w(t);try{await g(t,1)}catch(e){console.error("Error adding item to cart:",e)}setTimeout(()=>{f(!1)},500)},P=async()=>{if(!e.id||"string"!=typeof e.id||""===e.id.trim())return void console.error("Cannot add product to cart after login: Product ID is missing or invalid",e);let t=e.id.trim();if("undefined"===t||"null"===t||""===t)return void console.error("Cannot add product to cart after login: Product ID is invalid",e);try{await g(t,1)}catch(e){console.error("Error adding item to cart after login:",e)}},k=e.originalPrice&&e.originalPrice>e.price;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Card,{className:`overflow-hidden py-0 pb-2 transition-all duration-300 ${h?"scale-95 bg-green-50 border-green-200":""}`,ref:y,children:[h&&(0,t.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:(0,t.jsx)("div",{className:"absolute animate-cart-item",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`}})}),(0,t.jsxs)(i.CardContent,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-muted rounded-t-lg overflow-hidden",children:[(0,t.jsx)(s.default,{src:e.image||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"}),k&&(0,t.jsxs)(n.Badge,{className:"absolute right-2 top-2 bg-destructive text-destructive-foreground",children:[Math.round((e.originalPrice-e.price)/e.originalPrice*100),"% OFF"]})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3",children:[(0,t.jsxs)("h3",{className:"line-clamp-2 text-sm font-medium leading-tight",children:[e.name," "]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"h-4",children:k&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-through",children:(0,c.formatCurrency)(e.originalPrice)})}),(0,t.jsxs)("p",{className:`${k?"text-xl":"text-lg"} font-bold text-primary`,children:[(0,c.formatCurrency)(e.price),(0,t.jsxs)("span",{className:"ml-2 align-middle text-xs font-medium text-muted-foreground",children:["/ ",e.unit]})]})]}),0===N?(0,t.jsx)(a.Button,{onClick:C,className:`w-full transition-all duration-300 ${h?"bg-green-500 hover:bg-green-600":""}`,size:"sm",disabled:h,children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"animate-pulse",children:"✓"}),(0,t.jsx)("span",{className:"ml-1",children:"Adicionado"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Plus,{className:"mr-1 h-4 w-4"}),"Adicionar"]})}):(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border bg-background",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>{j(e.id,N-1)},className:"h-8 w-8",children:(0,t.jsx)(o.Minus,{className:"h-4 w-4"})}),(0,t.jsx)("span",{className:"font-semibold",children:N}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>{j(e.id,N+1)},className:"h-8 w-8",children:(0,t.jsx)(l.Plus,{className:"h-4 w-4"})})]})]})]})]}),(0,t.jsx)(u.LoginModal,{isOpen:m,onClose:()=>x(!1),onLoginSuccess:P})]})}e.s(["ProductCard",()=>m],19278)},20248,e=>{"use strict";var t=e.i(7156),s=e.i(70137);function r({data:e,className:r=""}){let{title:i,description:a,discountPrice:n,backgroundImage:l,productImage:o,config:c}=e,{backgroundType:d="solid",backgroundColor:u="#f3f4f6",gradientStart:m="#ef4444",gradientEnd:x="#b91c1c",gradientDirection:h="to right",fontFamily:f="sans",textColor:p="#000000",fontSize:g="medium",animation:j="none",productTransform:v={scale:1,rotate:0,pos:{x:0,y:0}},extraTexts:b=[],titleWidth:N,descriptionWidth:y}=c||{},w=e=>{switch(e){case"serif":return"font-serif";case"mono":return"font-mono";case"cursive":return"font-cursive";default:return"font-sans"}};return(0,t.jsxs)("div",{className:`relative w-[396px] h-[220px] overflow-hidden rounded-xl shadow-lg flex flex-row ${r}`,style:{background:"gradient"===d?`linear-gradient(${h}, ${m}, ${x})`:u},children:[(0,t.jsxs)("div",{className:"relative z-10 flex-1 flex flex-col p-6 justify-center items-start text-left h-full min-w-0",children:[(0,t.jsx)("h2",{className:`font-bold mb-2 leading-tight w-full break-words ${w(f)} ${(e=>{switch(e){case"small":return"text-lg";case"large":return"text-4xl";case"xl":return"text-6xl";default:return"text-2xl"}})(g)}`,style:{color:p,width:N?`${N}px`:void 0},children:i}),a&&(0,t.jsx)("p",{className:`mb-2 sm:mb-4 opacity-90 w-full break-words ${w(f)}`,style:{color:p,fontSize:"small"===g?"0.75rem":"0.875rem",width:y?`${y}px`:void 0},children:a}),n&&(0,t.jsxs)("div",{className:"mt-auto mb-2 sm:mb-4 bg-white/90 backdrop-blur-sm px-2.5 py-1 sm:px-4 sm:py-1.5 rounded-full shadow-lg inline-flex items-center whitespace-nowrap",children:[(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium mr-1.5 sm:mr-2",children:"Por apenas"}),(0,t.jsx)("span",{className:"text-base sm:text-xl font-bold text-green-600",children:(0,s.formatCurrency)(n)})]})]}),o&&(0,t.jsx)("div",{className:`absolute ${(e=>{switch(e){case"float":return"animate-float-slow";case"pulse":return"animate-pulse";case"spin":return"animate-spin-slow";case"zoom":return"animate-zoom-in";case"slide":return"animate-slide-in-left";case"rotate3d":return"animate-rotate-3d";default:return""}})(j)}`,style:{left:`${v.pos?.x??0}px`,top:`${v.pos?.y??0}px`,width:"160px",height:"160px",zIndex:20},children:(0,t.jsx)("div",{className:"w-full h-full",style:{transformOrigin:"center",transform:`scale(${v.scale??1}) rotate(${v.rotate??0}deg)`},children:(0,t.jsx)("img",{src:o,alt:i,className:"w-full h-full object-contain drop-shadow-xl"})})}),b.map(e=>(0,t.jsx)("div",{className:"absolute",style:{left:`${e.x}px`,top:`${e.y}px`,color:e.color,maxWidth:e.width?`${e.width}px`:void 0,fontSize:"small"===e.fontSize?"0.875rem":"large"===e.fontSize?"1.5rem":"1rem",fontWeight:700,zIndex:30},children:e.content},e.id))]})}e.s(["PromotionBanner",()=>r])},27359,e=>{"use strict";var t=e.i(7156),s=e.i(81061),r=e.i(1337),i=e.i(73428),a=e.i(30412),n=e.i(15599),l=e.i(67881);function o({categories:e}){let s=(0,n.useRouter)();return(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Categorias"}),(0,t.jsx)(l.Button,{variant:"link",className:"text-primary",onClick:()=>s.push("/client/market"),children:"Ver mais"})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:e.slice(0,8).map(e=>(0,t.jsxs)("button",{onClick:()=>s.push(`/client/market?category=${e.id}`),className:"flex flex-col items-center gap-2 transition-transform hover:scale-105",children:[(0,t.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-accent text-3xl shadow-sm",children:e.icon}),(0,t.jsx)("span",{className:"text-center text-xs font-medium leading-tight",children:e.name})]},e.id))})]})}var c=e.i(80987),d=e.i(70065);function u({market:e}){let s=e?.banner||"/placeholder-banner.jpg";return(0,t.jsx)(d.Card,{className:"overflow-hidden border-0 shadow-md",children:(0,t.jsx)("div",{className:"relative aspect-[2/1]",children:(0,t.jsx)(c.default,{src:s,alt:"Promoção",fill:!0,className:"object-cover",priority:!0})})})}var m=e.i(20248);function x({banners:e}){let[r,i]=(0,s.useState)(0),[a,n]=(0,s.useState)(0);return((0,s.useEffect)(()=>{n(0)},[r]),(0,s.useEffect)(()=>{if(e.length<=1)return;let t=setInterval(()=>{n(e=>e>=99?0:e+1.6666666666666667)},50),s=setTimeout(()=>{i(t=>(t+1)%e.length)},3e3);return()=>{clearInterval(t),clearTimeout(s)}},[e.length,r]),0===e.length)?null:(0,t.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,t.jsx)(m.PromotionBanner,{data:e[r]}),(0,t.jsx)("div",{className:"mt-2 w-[396px] px-2 flex gap-2",children:e.map((e,s)=>(0,t.jsx)("div",{className:"h-1.5 flex-1 rounded-full bg-black/20 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-white transition-all duration-75 ease-linear",style:{width:s===r?`${a}%`:s<r?"100%":"0%"}})},s))})]})}var h=e.i(19278);function f({products:e}){let s=(0,n.useRouter)();return(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Ofertas do dia"}),(0,t.jsx)(l.Button,{variant:"link",className:"text-primary",onClick:()=>s.push("/client/market"),children:"Ver todos"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:e.map(e=>(0,t.jsx)(h.ProductCard,{product:e},e.id))})]})}var p=e.i(4421);function g(){let[e,n]=(0,s.useState)(!1),{isAuthenticated:l}=(0,p.useAuthStore)(),[c,d]=(0,s.useState)([]),[m,h]=(0,s.useState)([]),[g,j]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),[N,y]=(0,s.useState)(null),[w,C]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{C(!0);let[e,t]=await Promise.all([fetch("/api/homepage"),fetch("/api/promotion-banners")]);if(e.ok){let t=await e.json();d(t.categories),h(t.featuredProducts),j(t.promotionProducts),y(t.market)}if(t.ok){let e=await t.json();b(e)}}catch(e){console.error("Error fetching homepage data:",e)}finally{C(!1)}})()},[]),w)?(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(r.ClientHeader,{}),(0,t.jsx)("main",{className:"flex items-center justify-center h-screen",children:(0,t.jsx)("p",{children:"Carregando..."})}),(0,t.jsx)(i.BottomNav,{})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,t.jsx)(r.ClientHeader,{}),(0,t.jsxs)("main",{className:"space-y-6 px-4 py-6",children:[v.length>0?(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Promoções"}),(0,t.jsx)(x,{banners:v})]}):(0,t.jsx)(u,{market:N}),(0,t.jsx)(o,{categories:c}),(0,t.jsx)(f,{products:m})]}),(0,t.jsx)(i.BottomNav,{}),(0,t.jsx)(a.LoginModal,{isOpen:e,onClose:()=>n(!1),onLoginSuccess:()=>{}})]})}e.s(["default",()=>g],27359)}]);
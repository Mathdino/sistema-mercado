module.exports=[93995,11374,75663,76929,3803,26128,45305,a=>{"use strict";var b=a.i(51220),c=a.i(41602),d=a.i(40695),e=a.i(61237);let f=(0,e.default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>f],11374);var g=a.i(19113),h=a.i(68515);function i({showBack:a=!1}){let e=(0,c.useRouter)(),i=(0,h.useAuthStore)(a=>a.user),j=i?.addresses?.find(a=>a.isDefault)||i?.addresses?.[0];return(0,b.jsx)("header",{className:"sticky top-0 z-20 border-b bg-background",children:(0,b.jsx)("div",{className:"flex items-center justify-between px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,b.jsx)(f,{className:"h-5 w-5"})}),(0,b.jsx)("div",{className:"flex flex-col",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Olá, ",(a=>{if(!a)return"";let b=a.trim().split(" ");return 1===b.length?b[0]:`${b[0]} ${b[b.length-1]}`})(i?.name)]}),j&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.MapPin,{className:"h-3 w-3 text-primary"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[j.street,", ",j.number," - ",j.city]})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Bem-vindo,"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:"faça seu login e aproveite nossas ofertas de casa"})]})})]})})})}a.s(["ClientHeader",()=>i],93995);let j=(0,e.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var k=a.i(53408);let l=(0,e.default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>l],75663);let m=(0,e.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>m],76929);let n=(0,e.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>n],3803);var o=a.i(97895),p=a.i(54161);function q(){let a=(0,c.useRouter)(),d=(0,c.usePathname)(),{isAuthenticated:e}=(0,h.useAuthStore)(),f=(0,h.useCartStore)(a=>a.getItemCount()),g=[{icon:j,label:"Início",path:"/client"},{icon:k.ShoppingBag,label:"Mercado",path:"/client/market"},{icon:l,label:"Carrinho",path:"/client/cart"},{icon:m,label:"Pedidos",path:"/client/orders",requireAuth:!0},{icon:n,label:"Perfil",path:"/client/profile",requireAuth:!0}],i=b=>{a.push(b)};return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t bg-background",children:(0,b.jsx)("div",{className:"relative flex items-center justify-around py-2",children:g.map(a=>{let c=a.icon,e=d===a.path;return"/client/cart"===a.path?(0,b.jsxs)("button",{onClick:()=>i(a.path),className:"relative -translate-y-3 transform",children:[(0,b.jsxs)("div",{className:(0,o.cn)("relative flex h-12 w-12 items-center justify-center rounded-full bg-primary shadow-lg transition-all",e?"ring-2 ring-primary":""),children:[(0,b.jsx)(c,{className:"h-6 w-6 text-primary-foreground"}),f>0&&(0,b.jsx)("span",{className:"absolute -right-1.5 -top-1.5 flex h-5 w-5 items-center justify-center",children:(0,b.jsx)(p.Badge,{className:"absolute h-5 w-5 rounded-full p-0 text-xs",children:f})})]}),(0,b.jsx)("span",{className:(0,o.cn)("mt-1 block text-center text-xs font-semibold",e?"text-primary":"text-foreground"),children:a.label})]},a.path):(0,b.jsxs)("button",{onClick:()=>i(a.path),className:(0,o.cn)("flex flex-col items-center gap-1 px-4 py-2 transition-colors",e?"text-primary":"text-muted-foreground"),children:[(0,b.jsx)(c,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"text-xs font-medium",children:a.label})]},a.path)})})})})}a.s(["BottomNav",()=>q],26128);var r=a.i(2295),s=a.i(5522),t=a.i(17171),u=a.i(65733),v=a.i(77687),w=a.i(7085),x=a.i(23305),y=a.i(55814);function z({isOpen:a,onClose:e,onLoginSuccess:f}){(0,c.useRouter)();let{login:g,loginWithOAuth:i}=(0,h.useAuthStore)(),{toast:j}=(0,v.useToast)(),[l,m]=(0,r.useState)("login"),[n,o]=(0,r.useState)(""),[p,q]=(0,r.useState)(""),[z,A]=(0,r.useState)(""),[B,C]=(0,r.useState)(""),[D,E]=(0,r.useState)(""),[F,G]=(0,r.useState)(""),[H,I]=(0,r.useState)(""),[J,K]=(0,r.useState)(""),[L,M]=(0,r.useState)(""),[N,O]=(0,r.useState)(""),[P,Q]=(0,r.useState)(""),[R,S]=(0,r.useState)(""),[T,U]=(0,r.useState)(""),[V,W]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[Z,$]=(0,r.useState)(!1),_=a=>{let b=a.replace(/\D/g,"").slice(0,11),c=b.slice(0,3),d=b.slice(3,6),e=b.slice(6,9),f=b.slice(9,11);return[c,d&&`.${d}`,e&&`.${e}`,f&&`-${f}`].filter(Boolean).join("")},aa=async a=>{a.preventDefault(),W(!0),await g(n,z)?(j({title:"Login realizado",description:"Bem-vindo de volta!"}),e(),f&&f()):j({title:"Erro ao fazer login",description:"CPF ou senha incorretos",variant:"destructive"}),W(!1)},ab=async()=>{let a=H.replace(/\D/g,"").slice(0,8);if(8!==a.length)return void j({title:"CEP inválido",description:"Informe 8 dígitos do CEP",variant:"destructive"});try{let b=await fetch(`https://viacep.com.br/ws/${a}/json/`),c=await b.json();if(c?.erro)return void j({title:"CEP não encontrado",variant:"destructive"});K(c.logradouro||""),M(c.localidade||""),O(c.bairro||""),Q(c.uf||"")}catch{j({title:"Erro ao buscar CEP",variant:"destructive"})}},ac=async a=>{a.preventDefault(),W(!0);try{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:D.trim(),cpf:n,phone:F,password:z,confirmPassword:B,address:{cep:H.replace(/\D/g,""),street:J,city:L,neighborhood:N,state:P,number:R,complement:T}})}),b=await a.json();if(a.ok&&b.user)j({title:"Conta criada",description:"Agora entre com seu CPF e senha."}),m("login"),A(""),C("");else{let a=b?.error==="cpf_exists"?"CPF já cadastrado":b?.error==="password_mismatch"?"Senhas não conferem":b?.error==="invalid_cpf"?"CPF inválido, verifique os dígitos":`Erro ao criar conta${b?.details?`: ${b.details}`:""}`;j({title:"Erro",description:a,variant:"destructive"})}}catch{j({title:"Erro ao criar conta",variant:"destructive"})}W(!1)};return(0,b.jsx)(u.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(u.DialogContent,{className:"sm:max-w-md max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(u.DialogHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary",children:(0,b.jsx)(k.ShoppingBag,{className:"h-8 w-8 text-primary-foreground"})}),(0,b.jsx)(u.DialogTitle,{className:"text-2xl",children:"Bem-vindo"}),(0,b.jsx)(u.DialogDescription,{children:"Entre com sua conta para continuar"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)(d.Button,{variant:"login"===l?"default":"outline",onClick:()=>m("login"),children:"Entrar"}),(0,b.jsx)(d.Button,{variant:"register"===l?"default":"outline",onClick:()=>m("register"),children:"Criar conta"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,b.jsx)("span",{className:"w-full border-t"})}),(0,b.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,b.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"login"===l?"Entre com seu CPF":"Preencha seus dados para criar a conta"})})]}),"login"===l?(0,b.jsxs)("form",{onSubmit:aa,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-cpf",children:"CPF"}),(0,b.jsx)(s.Input,{id:"modal-cpf",type:"text",placeholder:"000.000.000-00",value:p,onChange:a=>{let b=a.target.value.replace(/\D/g,"").slice(0,11);o(b),q(_(b))},required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-password",children:"Senha"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Input,{id:"modal-password",type:X?"text":"password",placeholder:"••••••••",value:z,onChange:a=>A(a.target.value),required:!0}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>Y(a=>!a),"aria-label":X?"Ocultar senha":"Mostrar senha",children:X?(0,b.jsx)(y.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(x.Eye,{className:"h-4 w-4"})})]})]}),(0,b.jsx)(d.Button,{type:"submit",className:"w-full",disabled:V,children:V?"Entrando...":"Entrar"})]}):(0,b.jsxs)("form",{onSubmit:ac,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-fullname",children:"Nome Completo"}),(0,b.jsx)(s.Input,{id:"modal-fullname",type:"text",placeholder:"Seu nome completo",value:D,onChange:a=>E(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-cpf",children:"CPF"}),(0,b.jsx)(s.Input,{id:"modal-cpf",type:"text",placeholder:"000.000.000-00",value:p,onChange:a=>{let b=a.target.value.replace(/\D/g,"").slice(0,11);o(b),q(_(b))},required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-phone",children:"Telefone"}),(0,b.jsx)(s.Input,{id:"modal-phone",type:"text",placeholder:"(00) 00000-0000",value:F,onChange:a=>{let b,c,d,e;return G((c=(b=a.target.value.replace(/\D/g,"").slice(0,11)).slice(0,2),d=b.slice(2,7),[c&&`(${c}) `,d,(e=b.slice(7,11))&&`-${e}`].filter(Boolean).join("")))},required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 items-end",children:[(0,b.jsxs)("div",{className:"space-y-2 sm:col-span-1",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-cep",children:"CEP"}),(0,b.jsx)(s.Input,{id:"modal-cep",type:"text",placeholder:"00000000",value:H,onChange:a=>I(a.target.value.replace(/\D/g,"")),required:!0})]}),(0,b.jsx)("div",{className:"sm:col-span-1",children:(0,b.jsxs)(d.Button,{type:"button",className:"w-full",onClick:ab,children:[(0,b.jsx)(w.Search,{className:"mr-2 h-4 w-4"}),"Buscar CEP"]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-street",children:"Rua"}),(0,b.jsx)(s.Input,{id:"modal-street",type:"text",placeholder:"Rua",value:J,onChange:a=>K(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-city",children:"Cidade"}),(0,b.jsx)(s.Input,{id:"modal-city",type:"text",placeholder:"Cidade",value:L,onChange:a=>M(a.target.value),required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-neighborhood",children:"Bairro"}),(0,b.jsx)(s.Input,{id:"modal-neighborhood",type:"text",placeholder:"Bairro",value:N,onChange:a=>O(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-state",children:"Estado (UF)"}),(0,b.jsx)(s.Input,{id:"modal-state",type:"text",placeholder:"UF",value:P,onChange:a=>Q(a.target.value.slice(0,2).toUpperCase()),required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-number",children:"Número"}),(0,b.jsx)(s.Input,{id:"modal-number",type:"text",placeholder:"Número",value:R,onChange:a=>S(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-complement",children:"Complemento"}),(0,b.jsx)(s.Input,{id:"modal-complement",type:"text",placeholder:"Apartamento, bloco, etc.",value:T,onChange:a=>U(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-1",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-password",children:"Senha"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Input,{id:"modal-password",type:X?"text":"password",placeholder:"••••••••",value:z,onChange:a=>A(a.target.value),required:!0}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>Y(a=>!a),"aria-label":X?"Ocultar senha":"Mostrar senha",children:X?(0,b.jsx)(y.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(x.Eye,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"modal-confirm-password",children:"Confirmar Senha"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Input,{id:"modal-confirm-password",type:Z?"text":"password",placeholder:"••••••••",value:B,onChange:a=>C(a.target.value),required:!0}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",size:"icon",onClick:()=>$(a=>!a),"aria-label":Z?"Ocultar senha":"Mostrar senha",children:Z?(0,b.jsx)(y.EyeOff,{className:"h-4 w-4"}):(0,b.jsx)(x.Eye,{className:"h-4 w-4"})})]})]})]}),(0,b.jsx)(d.Button,{type:"submit",className:"w-full",disabled:V,children:V?"Criando conta...":"Criar conta"})]}),(0,b.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,b.jsx)("p",{children:"Use seu CPF e senha para acessar."})})]})]})})}a.s(["LoginModal",()=>z],45305)}];

//# sourceMappingURL=components_client_client-header_tsx_b48f3779._.js.map
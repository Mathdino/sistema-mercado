module.exports=[53772,a=>{"use strict";var b=a.i(51220),c=a.i(2295),d=a.i(9426),e=a.i(68169),f=a.i(41602),g=a.i(3130),h=a.i(40695),i=a.i(5522),j=a.i(17171),k=a.i(87682),l=a.i(65733),m=a.i(76504),n=a.i(38032),o=a.i(92432),p=a.i(2209),q=a.i(20755),r=a.i(3512),s=a.i(59070),t=a.i(87695),u="Switch",[v,w]=(0,p.createContextScope)(u),[x,y]=v(u),z=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:h,required:i,disabled:j,value:k="on",onCheckedChange:l,form:m,...p}=a,[r,s]=c.useState(null),u=(0,o.useComposedRefs)(d,a=>s(a)),v=c.useRef(!1),w=!r||m||!!r.closest("form"),[y=!1,z]=(0,q.useControllableState)({prop:g,defaultProp:h,onChange:l});return(0,b.jsxs)(x,{scope:e,checked:y,disabled:j,children:[(0,b.jsx)(t.Primitive.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":D(y),"data-disabled":j?"":void 0,disabled:j,value:k,...p,ref:u,onClick:(0,n.composeEventHandlers)(a.onClick,a=>{z(a=>!a),w&&(v.current=a.isPropagationStopped(),v.current||a.stopPropagation())})}),w&&(0,b.jsx)(C,{control:r,bubbles:!v.current,name:f,value:k,checked:y,required:i,disabled:j,form:m,style:{transform:"translateX(-100%)"}})]})});z.displayName=u;var A="SwitchThumb",B=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=y(A,d);return(0,b.jsx)(t.Primitive.span,{"data-state":D(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});B.displayName=A;var C=a=>{let{control:d,checked:e,bubbles:f=!0,...g}=a,h=c.useRef(null),i=(0,r.usePrevious)(e),j=(0,s.useSize)(d);return c.useEffect(()=>{let a=h.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[i,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:h,style:{...a.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function D(a){return a?"checked":"unchecked"}var E=a.i(97895);function F({className:a,...c}){return(0,b.jsx)(z,{"data-slot":"switch",className:(0,E.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(B,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var G=a.i(86725),H=a.i(68234),I=a.i(53679),J=a.i(91586),K="Tabs",[L,M]=(0,p.createContextScope)(K,[G.createRovingFocusGroupScope]),N=(0,G.createRovingFocusGroupScope)(),[O,P]=L(K),Q=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,I.useDirection)(i),[m,n]=(0,q.useControllableState)({prop:e,onChange:f,defaultProp:g});return(0,b.jsx)(O,{scope:d,baseId:(0,J.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(t.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});Q.displayName=K;var R="TabsList",S=c.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=P(R,d),h=N(d);return(0,b.jsx)(G.Root,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(t.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});S.displayName=R;var T="TabsTrigger",U=c.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=P(T,d),i=N(d),j=X(h.baseId,e),k=Y(h.baseId,e),l=e===h.value;return(0,b.jsx)(G.Item,{asChild:!0,...i,focusable:!f,active:l,children:(0,b.jsx)(t.Primitive.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":k,"data-state":l?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,n.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,n.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,n.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;l||f||!a||h.onValueChange(e)})})})});U.displayName=T;var V="TabsContent",W=c.forwardRef((a,d)=>{let{__scopeTabs:e,value:f,forceMount:g,children:h,...i}=a,j=P(V,e),k=X(j.baseId,f),l=Y(j.baseId,f),m=f===j.value,n=c.useRef(m);return c.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(H.Presence,{present:g||m,children:({present:c})=>(0,b.jsx)(t.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":j.orientation,role:"tabpanel","aria-labelledby":k,hidden:!c,id:l,tabIndex:0,...i,ref:d,style:{...a.style,animationDuration:n.current?"0s":void 0},children:c&&h})})});function X(a,b){return`${a}-trigger-${b}`}function Y(a,b){return`${a}-content-${b}`}function Z({className:a,...c}){return(0,b.jsx)(Q,{"data-slot":"tabs",className:(0,E.cn)("flex flex-col gap-2",a),...c})}function $({className:a,...c}){return(0,b.jsx)(S,{"data-slot":"tabs-list",className:(0,E.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function _({className:a,...c}){return(0,b.jsx)(U,{"data-slot":"tabs-trigger",className:(0,E.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function aa({className:a,...c}){return(0,b.jsx)(W,{"data-slot":"tabs-content",className:(0,E.cn)("flex-1 outline-none",a),...c})}W.displayName=V;var ab=a.i(72844),ac=a.i(84980),ad=a.i(73923),ae=a.i(31798),af=a.i(96826),ag=a.i(76929),ah=a.i(11374),ai=a.i(61237);let aj=(0,ai.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var ak=a.i(72575),al=a.i(46893),am=a.i(13923),an=a.i(33734),ao=["PageUp","PageDown"],ap=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],aq={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ar="Slider",[as,at,au]=(0,an.createCollection)(ar),[av,aw]=(0,p.createContextScope)(ar,[au]),[ax,ay]=av(ar),az=c.forwardRef((a,d)=>{let{name:e,min:f=0,max:g=100,step:h=1,orientation:i="horizontal",disabled:j=!1,minStepsBetweenThumbs:k=0,defaultValue:l=[f],value:m,onValueChange:o=()=>{},onValueCommit:p=()=>{},inverted:r=!1,form:s,...t}=a,u=c.useRef(new Set),v=c.useRef(0),w="horizontal"===i,[x=[],y]=(0,q.useControllableState)({prop:m,defaultProp:l,onChange:a=>{let b=[...u.current];b[v.current]?.focus(),o(a)}}),z=c.useRef(x);function A(a,b,{commit:c}={commit:!1}){let d,e=(String(h).split(".")[1]||"").length,i=Math.round((Math.round((a-f)/h)*h+f)*(d=Math.pow(10,e)))/d,j=(0,am.clamp)(i,[f,g]);y((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,j,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,k*h))return a;{v.current=d.indexOf(j);let b=String(d)!==String(a);return b&&c&&p(d),b?d:a}})}return(0,b.jsx)(ax,{scope:a.__scopeSlider,name:e,disabled:j,min:f,max:g,valueIndexToChangeRef:v,thumbs:u.current,values:x,orientation:i,form:s,children:(0,b.jsx)(as.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(as.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(w?aC:aD,{"aria-disabled":j,"data-disabled":j?"":void 0,...t,ref:d,onPointerDown:(0,n.composeEventHandlers)(t.onPointerDown,()=>{j||(z.current=x)}),min:f,max:g,inverted:r,onSlideStart:j?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(x,a);A(a,b)},onSlideMove:j?void 0:function(a){A(a,v.current)},onSlideEnd:j?void 0:function(){let a=z.current[v.current];x[v.current]!==a&&p(x)},onHomeKeyDown:()=>!j&&A(f,0,{commit:!0}),onEndKeyDown:()=>!j&&A(g,x.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!j){let c=ao.includes(a.key)||a.shiftKey&&ap.includes(a.key),d=v.current;A(x[d]+h*(c?10:1)*b,d,{commit:!0})}}})})})})});az.displayName=ar;var[aA,aB]=av(ar,{startEdge:"left",endEdge:"right",size:"width",direction:1}),aC=c.forwardRef((a,d)=>{let{min:e,max:f,dir:g,inverted:h,onSlideStart:i,onSlideMove:j,onSlideEnd:k,onStepKeyDown:l,...m}=a,[n,p]=c.useState(null),q=(0,o.useComposedRefs)(d,a=>p(a)),r=c.useRef(void 0),s=(0,I.useDirection)(g),t="ltr"===s,u=t&&!h||!t&&h;function v(a){let b=r.current||n.getBoundingClientRect(),c=aO([0,b.width],u?[e,f]:[f,e]);return r.current=b,c(a-b.left)}return(0,b.jsx)(aA,{scope:a.__scopeSlider,startEdge:u?"left":"right",endEdge:u?"right":"left",direction:u?1:-1,size:"width",children:(0,b.jsx)(aE,{dir:s,"data-orientation":"horizontal",...m,ref:q,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=v(a.clientX);i?.(b)},onSlideMove:a=>{let b=v(a.clientX);j?.(b)},onSlideEnd:()=>{r.current=void 0,k?.()},onStepKeyDown:a=>{let b=aq[u?"from-left":"from-right"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),aD=c.forwardRef((a,d)=>{let{min:e,max:f,inverted:g,onSlideStart:h,onSlideMove:i,onSlideEnd:j,onStepKeyDown:k,...l}=a,m=c.useRef(null),n=(0,o.useComposedRefs)(d,m),p=c.useRef(void 0),q=!g;function r(a){let b=p.current||m.current.getBoundingClientRect(),c=aO([0,b.height],q?[f,e]:[e,f]);return p.current=b,c(a-b.top)}return(0,b.jsx)(aA,{scope:a.__scopeSlider,startEdge:q?"bottom":"top",endEdge:q?"top":"bottom",size:"height",direction:q?1:-1,children:(0,b.jsx)(aE,{"data-orientation":"vertical",...l,ref:n,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=r(a.clientY);h?.(b)},onSlideMove:a=>{let b=r(a.clientY);i?.(b)},onSlideEnd:()=>{p.current=void 0,j?.()},onStepKeyDown:a=>{let b=aq[q?"from-bottom":"from-top"].includes(a.key);k?.({event:a,direction:b?-1:1})}})})}),aE=c.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:h,onEndKeyDown:i,onStepKeyDown:j,...k}=a,l=ay(ar,d);return(0,b.jsx)(t.Primitive.span,{...k,ref:c,onKeyDown:(0,n.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(h(a),a.preventDefault()):"End"===a.key?(i(a),a.preventDefault()):ao.concat(ap).includes(a.key)&&(j(a),a.preventDefault())}),onPointerDown:(0,n.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),l.thumbs.has(b)?b.focus():e(a)}),onPointerMove:(0,n.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,n.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),aF="SliderTrack",aG=c.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=ay(aF,d);return(0,b.jsx)(t.Primitive.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});aG.displayName=aF;var aH="SliderRange",aI=c.forwardRef((a,d)=>{let{__scopeSlider:e,...f}=a,g=ay(aH,e),h=aB(aH,e),i=c.useRef(null),j=(0,o.useComposedRefs)(d,i),k=g.values.length,l=g.values.map(a=>aN(a,g.min,g.max)),m=k>1?Math.min(...l):0,n=100-Math.max(...l);return(0,b.jsx)(t.Primitive.span,{"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,...f,ref:j,style:{...a.style,[h.startEdge]:m+"%",[h.endEdge]:n+"%"}})});aI.displayName=aH;var aJ="SliderThumb",aK=c.forwardRef((a,d)=>{let e=at(a.__scopeSlider),[f,g]=c.useState(null),h=(0,o.useComposedRefs)(d,a=>g(a)),i=c.useMemo(()=>f?e().findIndex(a=>a.ref.current===f):-1,[e,f]);return(0,b.jsx)(aL,{...a,ref:h,index:i})}),aL=c.forwardRef((a,d)=>{var e,f,g,h,i;let j,k,{__scopeSlider:l,index:m,name:p,...q}=a,r=ay(aJ,l),u=aB(aJ,l),[v,w]=c.useState(null),x=(0,o.useComposedRefs)(d,a=>w(a)),y=!v||r.form||!!v.closest("form"),z=(0,s.useSize)(v),A=r.values[m],B=void 0===A?0:aN(A,r.min,r.max),C=(e=m,(f=r.values.length)>2?`Value ${e+1} of ${f}`:2===f?["Minimum","Maximum"][e]:void 0),D=z?.[u.size],E=D?(g=D,h=B,i=u.direction,k=aO([0,50],[0,j=g/2]),(j-k(h)*i)*i):0;return c.useEffect(()=>{if(v)return r.thumbs.add(v),()=>{r.thumbs.delete(v)}},[v,r.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${B}% + ${E}px)`},children:[(0,b.jsx)(as.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(t.Primitive.span,{role:"slider","aria-label":a["aria-label"]||C,"aria-valuemin":r.min,"aria-valuenow":A,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...q,ref:x,style:void 0===A?{display:"none"}:a.style,onFocus:(0,n.composeEventHandlers)(a.onFocus,()=>{r.valueIndexToChangeRef.current=m})})}),y&&(0,b.jsx)(aM,{name:p??(r.name?r.name+(r.values.length>1?"[]":""):void 0),form:r.form,value:A},m)]})});aK.displayName=aJ;var aM=a=>{let{value:d,...e}=a,f=c.useRef(null),g=(0,r.usePrevious)(d);return c.useEffect(()=>{let a=f.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(g!==d&&b){let c=new Event("input",{bubbles:!0});b.call(a,d),a.dispatchEvent(c)}},[g,d]),(0,b.jsx)("input",{style:{display:"none"},...e,ref:f,defaultValue:d})};function aN(a,b,c){return(0,am.clamp)(100/(c-b)*(a-b),[0,100])}function aO(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}function aP({className:a,defaultValue:d,value:e,min:f=0,max:g=100,...h}){let i=c.useMemo(()=>Array.isArray(e)?e:Array.isArray(d)?d:[f,g],[e,d,f,g]);return(0,b.jsxs)(az,{"data-slot":"slider",defaultValue:d,value:e,min:f,max:g,className:(0,E.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...h,children:[(0,b.jsx)(aG,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,b.jsx)(aI,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),Array.from({length:i.length},(a,c)=>(0,b.jsx)(aK,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},c))]})}let aQ=(0,ai.default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),aR=(0,ai.default)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),aS=(0,ai.default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),aT=(0,ai.default)("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var aU=a.i(28980),aV=a.i(77687);function aW({products:a,onSuccess:d,initialData:e,onCancel:f}){let{toast:g}=(0,aV.useToast)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(e?.productId||""),[p,q]=(0,c.useState)(e?.title||""),[r,s]=(0,c.useState)(e?.description||""),[t,u]=(0,c.useState)(e?.discountPrice?.toString()||""),[v,w]=(0,c.useState)(e?.config?.backgroundType||"solid"),[x,y]=(0,c.useState)(e?.config?.backgroundColor||"#ef4444"),[z,A]=(0,c.useState)(e?.config?.gradientStart||"#ef4444"),[B,C]=(0,c.useState)(e?.config?.gradientEnd||"#b91c1c"),[D,E]=(0,c.useState)(e?.config?.gradientDirection||"to right"),[F,G]=(0,c.useState)(e?.productImage||""),[H,I]=(0,c.useState)(e?.config?.productTransform?.scale??1),[J,K]=(0,c.useState)(e?.config?.productTransform?.rotate??0),[L,M]=(0,c.useState)(e?.config?.productTransform?.pos??{x:0,y:0}),N=(0,c.useRef)(null),O=(0,c.useRef)(null);(0,c.useRef)(null);let[P,Q]=(0,c.useState)(e?.config?.extraTexts||[]),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(e?.config?.fontFamily||"sans"),[V,W]=(0,c.useState)(e?.config?.textColor||"#000000"),[X,Y]=(0,c.useState)(e?.config?.fontSize||"medium"),[ac,ad]=(0,c.useState)(e?.config?.titleWidth),[ae,af]=(0,c.useState)(e?.config?.descriptionWidth),[ag,ah]=(0,c.useState)(e?.config?.animation||"none");(0,c.useEffect)(()=>{if("none"!==ag){let a=document.querySelector(".preview-animation-test");a&&(a.classList.remove(ak(ag)),setTimeout(()=>{a.classList.add(ak(ag))},10))}},[ag]),(0,c.useEffect)(()=>{if(n){let b=a.find(a=>a.id===n);b&&(p||q(b.name),F||G(b.image))}},[n,a]);let ai=async()=>{try{m(!0);let a=e?`/api/admin/promotion-cards/${e.id}`:"/api/admin/promotion-cards",b=e?"PUT":"POST";if(!(await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p,description:r,discountPrice:t,backgroundImage:null,productImage:F,productId:n,config:{backgroundType:v,backgroundColor:x,gradientStart:z,gradientEnd:B,gradientDirection:D,fontFamily:T,textColor:V,fontSize:X,animation:ag,productTransform:{scale:H,rotate:J,pos:L},extraTexts:P,titleWidth:ac,descriptionWidth:ae}})})).ok)throw Error("Failed to save promotion banner");g({title:"Sucesso",description:"Banner de promoção salvo com sucesso!"}),d()}catch(a){console.error(a),g({title:"Erro",description:"Erro ao salvar banner. Tente novamente.",variant:"destructive"})}finally{m(!1)}},aj=a=>{switch(a){case"serif":return"font-serif";case"mono":return"font-mono";case"cursive":return"font-cursive";default:return"font-sans"}},ak=a=>{switch(a){case"float":return"animate-float-slow";case"pulse":return"animate-pulse";case"spin":return"animate-spin-slow";case"zoom":return"animate-zoom-in";case"slide":return"animate-slide-in-left";case"rotate3d":return"animate-rotate-3d";default:return""}};return(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(Z,{defaultValue:"content",children:[(0,b.jsxs)($,{className:"grid w-full grid-cols-4",children:[(0,b.jsxs)(_,{value:"content",children:[(0,b.jsx)(aT,{className:"w-4 h-4 mr-2"})," Conteúdo"]}),(0,b.jsxs)(_,{value:"visual",children:[(0,b.jsx)(aR,{className:"w-4 h-4 mr-2"})," Visual"]}),(0,b.jsxs)(_,{value:"typography",children:[(0,b.jsx)(aS,{className:"w-4 h-4 mr-2"})," Texto"]}),(0,b.jsxs)(_,{value:"animation",children:[(0,b.jsx)(aU.Sparkles,{className:"w-4 h-4 mr-2"})," Animação"]})]}),(0,b.jsxs)(aa,{value:"content",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Produto (Opcional)"}),(0,b.jsxs)(k.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um produto..."})}),(0,b.jsx)(k.SelectContent,{children:a.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id,children:[a.name," - ",(0,ab.formatCurrency)(a.price)]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Título Principal"}),(0,b.jsx)(i.Input,{value:p,onChange:a=>q(a.target.value),placeholder:"Ex: Promoção de Verão"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Descrição / Subtítulo"}),(0,b.jsx)(al.Textarea,{value:r,onChange:a=>s(a.target.value),placeholder:"Detalhes da oferta..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Preço Promocional (R$)"}),(0,b.jsx)(i.Input,{type:"number",step:"0.01",value:t,onChange:a=>u(a.target.value),placeholder:"0.00"})]})]}),(0,b.jsxs)(aa,{value:"visual",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Tipo de Fundo"}),(0,b.jsxs)(k.Select,{value:v,onValueChange:a=>w(a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"solid",children:"Cor Sólida"}),(0,b.jsx)(k.SelectItem,{value:"gradient",children:"Gradiente"})]})]})]}),"solid"===v?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Cor de Fundo"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{type:"color",className:"w-12 h-10 p-1",value:x,onChange:a=>y(a.target.value)}),(0,b.jsx)(i.Input,{value:x,onChange:a=>y(a.target.value)})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Cor Inicial"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{type:"color",className:"w-12 h-10 p-1",value:z,onChange:a=>A(a.target.value)}),(0,b.jsx)(i.Input,{value:z,onChange:a=>A(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Cor Final"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{type:"color",className:"w-12 h-10 p-1",value:B,onChange:a=>C(a.target.value)}),(0,b.jsx)(i.Input,{value:B,onChange:a=>C(a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Direção"}),(0,b.jsxs)(k.Select,{value:D,onValueChange:E,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"to right",children:"Para Direita"}),(0,b.jsx)(k.SelectItem,{value:"to left",children:"Para Esquerda"}),(0,b.jsx)(k.SelectItem,{value:"to bottom",children:"Para Baixo"}),(0,b.jsx)(k.SelectItem,{value:"to top",children:"Para Cima"}),(0,b.jsx)(k.SelectItem,{value:"to bottom right",children:"Diagonal (Baixo-Direita)"}),(0,b.jsx)(k.SelectItem,{value:"to top right",children:"Diagonal (Cima-Direita)"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(j.Label,{children:"Imagem do Produto"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Escala"}),(0,b.jsx)(aP,{defaultValue:[H],min:.5,max:1.5,step:.01,onValueChange:a=>I(a[0])}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["x",H.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Rotação"}),(0,b.jsx)(aP,{defaultValue:[J],min:-30,max:30,step:1,onValueChange:a=>K(a[0])}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[J,"°"]})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>M({x:0,y:0}),children:"Resetar posição"})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dica: arraste a imagem no preview para reposicionar."})]})]}),(0,b.jsxs)(aa,{value:"typography",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Fonte"}),(0,b.jsxs)(k.Select,{value:T,onValueChange:U,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"sans",children:"Sans Serif (Padrão)"}),(0,b.jsx)(k.SelectItem,{value:"serif",children:"Serif"}),(0,b.jsx)(k.SelectItem,{value:"mono",children:"Monospace"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Tamanho do Título"}),(0,b.jsxs)(k.Select,{value:X,onValueChange:Y,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"small",children:"Pequeno"}),(0,b.jsx)(k.SelectItem,{value:"medium",children:"Médio"}),(0,b.jsx)(k.SelectItem,{value:"large",children:"Grande"}),(0,b.jsx)(k.SelectItem,{value:"xl",children:"Extra Grande"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Cor do Texto"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(i.Input,{type:"color",className:"w-12 h-10 p-1",value:V,onChange:a=>W(a.target.value)}),(0,b.jsx)(i.Input,{value:V,onChange:a=>W(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Largura do Título (px)"}),(0,b.jsx)(i.Input,{type:"number",value:String(ac??""),onChange:a=>ad(""===a.target.value?void 0:Number(a.target.value)),placeholder:"Opcional"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Largura da Descrição (px)"}),(0,b.jsx)(i.Input,{type:"number",value:String(ae??""),onChange:a=>af(""===a.target.value?void 0:Number(a.target.value)),placeholder:"Opcional"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(j.Label,{children:"Textos Extras"}),(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>Q(a=>[...a,{id:crypto.randomUUID(),content:"Novo texto",color:"#ffffff",fontSize:"medium",x:10,y:80}]),children:"Adicionar Texto"})]}),(0,b.jsx)("div",{className:"space-y-3",children:P.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 items-center",children:[(0,b.jsx)(i.Input,{value:a.content,onChange:b=>Q(c=>c.map(c=>c.id===a.id?{...c,content:b.target.value}:c)),placeholder:"Conteúdo"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Input,{type:"color",className:"w-12 h-10 p-1",value:a.color,onChange:b=>Q(c=>c.map(c=>c.id===a.id?{...c,color:b.target.value}:c))}),(0,b.jsx)(i.Input,{type:"number",className:"w-24",value:String(a.width??160),onChange:b=>Q(c=>c.map(c=>c.id===a.id?{...c,width:Number(b.target.value||"0")}:c)),placeholder:"Largura (px)"}),(0,b.jsxs)(k.Select,{value:a.fontSize,onValueChange:b=>Q(c=>c.map(c=>c.id===a.id?{...c,fontSize:b}:c)),children:[(0,b.jsx)(k.SelectTrigger,{className:"w-40",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"small",children:"Pequeno"}),(0,b.jsx)(k.SelectItem,{value:"medium",children:"Médio"}),(0,b.jsx)(k.SelectItem,{value:"large",children:"Grande"})]})]}),(0,b.jsx)(h.Button,{variant:"destructive",onClick:()=>Q(b=>b.filter(b=>b.id!==a.id)),children:"Remover"})]})]},a.id))}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Dica: arraste cada texto no preview para reposicionar."})]})]}),(0,b.jsx)(aa,{value:"animation",className:"space-y-4 mt-3",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{className:"mb-2",children:"Animação do Produto"}),(0,b.jsxs)(k.Select,{value:ag,onValueChange:a=>{ah(a)},children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"none",children:"Nenhuma"}),(0,b.jsx)(k.SelectItem,{value:"float",children:"Flutuar (Lento)"}),(0,b.jsx)(k.SelectItem,{value:"pulse",children:"Pulsar"}),(0,b.jsx)(k.SelectItem,{value:"spin",children:"Girar (Muito Lento)"}),(0,b.jsx)(k.SelectItem,{value:"zoom",children:"Zoom"}),(0,b.jsx)(k.SelectItem,{value:"slide",children:"Deslizar da Esquerda"}),(0,b.jsx)(k.SelectItem,{value:"rotate3d",children:"Rotação 3D"})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:f,children:"Cancelar"}),(0,b.jsxs)(h.Button,{onClick:ai,disabled:l,children:[l&&(0,b.jsx)(aQ,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvar Banner"]})]})]}),(0,b.jsx)("div",{className:"border rounded-xl p-4 bg-gray-50 flex items-center justify-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"relative w-[396px] h-[220px] rounded-lg shadow-xl flex flex-row overflow-hidden",style:{background:"gradient"===v?`linear-gradient(${D}, ${z}, ${B})`:x},ref:O,onMouseMove:a=>{if(!N.current)return;let b=O.current?.getBoundingClientRect();if(!b)return;let c=a.clientX-N.current.startX,d=a.clientY-N.current.startY,e=N.current.origX+c,f=N.current.origY+d;if("product"===N.current.type){let a=160*H,c=160*H;M({x:Math.max(0,Math.min(b.width-a,e)),y:Math.max(0,Math.min(b.height-c,f))})}else if("resize_product"===N.current.type)I(Math.max(60,Math.min(b.width-L.x,N.current.origWidth+c))/160);else if("resize_text"===N.current.type){let a=N.current.index;Q(d=>d.map((d,e)=>e===a?{...d,width:Math.max(60,Math.min(b.width-d.x,(N.current.origWidth||d.width||160)+c))}:d))}else{let a=N.current.index;Q(c=>c.map((c,d)=>d===a?{...c,x:Math.max(0,Math.min(b.width-(c.width??160),e)),y:Math.max(0,Math.min(b.height-24,f))}:c))}},onMouseUp:()=>{N.current=null},children:[(0,b.jsxs)("div",{className:"relative z-10 flex-1 flex flex-col p-6 justify-center items-start text-left h-full",children:[(0,b.jsx)("h2",{className:`font-bold mb-2 leading-tight ${aj(T)} ${(a=>{switch(a){case"small":return"text-lg";case"large":return"text-4xl";case"xl":return"text-6xl";default:return"text-2xl"}})(X)}`,style:{color:V,width:ac?`${ac}px`:void 0},children:p||"Título da Promoção"}),r&&(0,b.jsx)("p",{className:`mb-4 opacity-90 max-w-[90%] ${aj(T)}`,style:{color:V,width:ae?`${ae}px`:void 0},children:r}),t&&(0,b.jsxs)("div",{className:"mt-auto bg-white/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-lg inline-flex items-center",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500 font-medium mr-2",children:"Por apenas"}),(0,b.jsx)("span",{className:"text-xl font-bold text-green-600",children:(0,ab.formatCurrency)(parseFloat(t))})]}),P.map((a,c)=>(0,b.jsxs)("div",{className:"absolute cursor-move",style:{left:`${a.x}px`,top:`${a.y}px`,color:a.color,width:`${a.width??160}px`,fontSize:"small"===a.fontSize?"0.875rem":"large"===a.fontSize?"1.5rem":"1rem",fontWeight:700,zIndex:30,whiteSpace:"normal",wordBreak:"break-word",border:R?.type==="text"&&R.index===c?"1px dashed rgba(0,0,0,0.5)":void 0,boxSizing:"border-box"},onMouseDown:b=>{O.current?.getBoundingClientRect()&&(S({type:"text",index:c}),N.current={type:"text",index:c,startX:b.clientX,startY:b.clientY,origX:a.x,origY:a.y})},children:[a.content,R?.type==="text"&&R.index===c&&(0,b.jsx)("div",{style:{position:"absolute",right:-6,bottom:-6,width:12,height:12,background:"#ffffff",border:"1px solid rgba(0,0,0,0.6)",borderRadius:2,cursor:"nwse-resize"},onMouseDown:b=>{b.stopPropagation(),S({type:"text",index:c}),N.current={type:"resize_text",index:c,startX:b.clientX,startY:b.clientY,origX:a.x,origY:a.y,origWidth:a.width??160}}})]},a.id))]}),F&&(0,b.jsxs)("div",{className:`absolute ${ak(ag)}`,style:{left:`${L.x}px`,top:`${L.y}px`,width:"160px",height:"160px",zIndex:20,border:R?.type==="product"?"1px dashed rgba(0,0,0,0.5)":void 0,boxSizing:"border-box"},onMouseDown:a=>{O.current?.getBoundingClientRect()&&(S({type:"product"}),N.current={type:"product",startX:a.clientX,startY:a.clientY,origX:L.x,origY:L.y})},children:[(0,b.jsx)("div",{className:"w-full h-full",style:{transformOrigin:"center",transform:`scale(${H}) rotate(${J}deg)`},children:(0,b.jsx)("img",{src:F,alt:"Product",className:"w-full h-full object-contain drop-shadow-lg"})}),R?.type==="product"&&(0,b.jsx)("div",{style:{position:"absolute",right:-6,bottom:-6,width:12,height:12,background:"#ffffff",border:"1px solid rgba(0,0,0,0.6)",borderRadius:2,cursor:"nwse-resize"},onMouseDown:a=>{a.stopPropagation(),S({type:"product"}),N.current={type:"resize_product",startX:a.clientX,startY:a.clientY,origX:L.x,origY:L.y,origWidth:160*H}}})]})]})})]})}function aX({endDate:a}){let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{let b=()=>{let b=new Date(a)-new Date;if(b>0){let a=Math.floor(b/864e5),c=Math.floor(b/36e5%24),d=Math.floor(b/1e3/60%60),f=Math.floor(b/1e3%60);e(`${a}d ${c}h ${d}m ${f}s`),g(!1)}else e("Expirado"),g(!0)};b();let c=setInterval(b,1e3);return()=>clearInterval(c)},[a]),(0,b.jsxs)("div",{className:`flex items-center gap-1 text-xs ${f?"text-red-500":"text-amber-600"}`,children:[(0,b.jsx)(ag.Clock,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:d})]})}function aY(){(0,f.useRouter)();let{toast:a}=(0,aV.useToast)(),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({productId:"",promotionalPrice:"",endDate:"",isDateBased:!1}),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),B=async()=>{try{let a=await fetch("/api/admin/products");if(a.ok){let b=await a.json();o(b.products)}}catch(a){console.error("Error fetching products:",a)}},C=async()=>{try{let a=await fetch("/api/admin/promotion-cards");if(a.ok){let b=await a.json();q(b)}}catch(a){console.error("Error fetching promotion cards:",a)}};(0,c.useEffect)(()=>{(async()=>{s(!0),await Promise.all([B(),C()]),s(!1)})()},[]);let D=async()=>{try{let b=await fetch("/api/admin/promotions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:v.productId,originalPrice:parseFloat(v.promotionalPrice),promotionEndDate:v.isDateBased?v.endDate:null})});if(b.ok){let c=await b.json();o(n.map(a=>a.id===c.id?c:a)),u(!1),w({productId:"",promotionalPrice:"",endDate:"",isDateBased:!1}),a({title:"Promoção adicionada com sucesso!"})}else{let c=await b.json();a({title:"Erro ao adicionar promoção",description:c.error,variant:"destructive"})}}catch(b){a({title:"Erro de rede",description:String(b),variant:"destructive"})}},E=async b=>{try{let c=await fetch(`/api/admin/promotions/${b}`,{method:"DELETE"});if(c.ok){let b=await c.json();o(n.map(a=>a.id===b.id?b:a)),a({title:"Promoção removida com sucesso!"})}else a({title:"Erro ao remover promoção",variant:"destructive"})}catch(b){a({title:"Erro de rede",description:String(b),variant:"destructive"})}},G=async b=>{if(confirm("Tem certeza que deseja excluir este banner?"))try{(await fetch(`/api/admin/promotion-cards/${b}`,{method:"DELETE"})).ok?(q(p.filter(a=>a.id!==b)),a({title:"Banner removido com sucesso!"})):a({title:"Erro ao remover banner",variant:"destructive"})}catch(b){a({title:"Erro de rede",description:String(b),variant:"destructive"})}},H=n.filter(a=>void 0!==a.originalPrice&&null!==a.originalPrice);return r?(0,b.jsx)(d.AuthGuard,{requireRole:"admin",children:(0,b.jsx)(e.AdminLayout,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("p",{children:"Carregando..."})})})}):x||z?(0,b.jsx)(d.AuthGuard,{requireRole:"admin",children:(0,b.jsx)(e.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{y(!1),A(null)},children:(0,b.jsx)(ah.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:z?"Editar Banner":"Novo Banner de Promoção"})]}),(0,b.jsx)(aW,{products:n,initialData:z,onSuccess:()=>{y(!1),A(null),C()},onCancel:()=>{y(!1),A(null)}})]})})}):(0,b.jsx)(d.AuthGuard,{requireRole:"admin",children:(0,b.jsx)(e.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Promoções"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie as promoções e banners da loja"})]}),(0,b.jsxs)(Z,{defaultValue:"banners",className:"space-y-6",children:[(0,b.jsxs)($,{children:[(0,b.jsx)(_,{value:"banners",children:"Banners Personalizados"}),(0,b.jsx)(_,{value:"simple",children:"Promoções Simples"})]}),(0,b.jsxs)(aa,{value:"banners",className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(h.Button,{onClick:()=>y(!0),children:[(0,b.jsx)(ac.Plus,{className:"mr-2 h-4 w-4"}),"Criar Novo Banner"]})}),0===p.length?(0,b.jsxs)("div",{className:"text-center py-12 border rounded-lg bg-gray-50",children:[(0,b.jsx)(aj,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Nenhum banner criado"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Crie banners personalizados para destacar seus produtos."})]}):(0,b.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:p.map(a=>(0,b.jsxs)(g.Card,{className:"overflow-hidden group p-0",children:[(0,b.jsxs)("div",{className:"aspect-video relative bg-gray-100",children:[a.backgroundImage?(0,b.jsx)("img",{src:a.backgroundImage,alt:a.title,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{background:a.config?.backgroundType==="gradient"?`linear-gradient(${a.config?.gradientDirection||"to right"}, ${a.config?.gradientStart||"#ef4444"}, ${a.config?.gradientEnd||"#b91c1c"})`:a.config?.backgroundColor||"#f3f4f6"},children:a.productImage&&(0,b.jsx)("img",{src:a.productImage,className:"h-32 w-32 object-contain",alt:a.title})}),(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,b.jsx)(h.Button,{variant:"secondary",size:"icon",onClick:()=>A(a),children:(0,b.jsx)(ae.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(h.Button,{variant:"destructive",size:"icon",onClick:()=>G(a.id),children:(0,b.jsx)(af.Trash2,{className:"h-4 w-4"})})]})]}),(0,b.jsx)(g.CardHeader,{className:"p-0",children:(0,b.jsx)(g.CardTitle,{className:"text-lg truncate p-4",children:a.title})}),(0,b.jsxs)(g.CardContent,{className:"p-0",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 p-4 pt-0",children:a.description||"Sem descrição"}),a.discountPrice&&(0,b.jsx)("div",{className:"font-bold text-green-600 p-4 pt-0",children:(0,ab.formatCurrency)(a.discountPrice)})]})]},a.id))})]}),(0,b.jsxs)(aa,{value:"simple",className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(h.Button,{onClick:()=>u(!0),children:[(0,b.jsx)(ac.Plus,{className:"mr-2 h-4 w-4"}),"Adicionar Promoção Simples"]})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[H.map(a=>(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.CardTitle,{className:"text-lg",children:a.name}),(0,b.jsxs)(m.DropdownMenu,{children:[(0,b.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(ad.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsx)(m.DropdownMenuContent,{align:"end",children:(0,b.jsxs)(m.DropdownMenuItem,{onClick:()=>E(a.id),children:[(0,b.jsx)(af.Trash2,{className:"mr-2 h-4 w-4"}),"Remover Promoção"]})})]})]})}),(0,b.jsx)(g.CardContent,{className:"p-4 pt-0",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-20 w-20 relative flex-shrink-0 bg-gray-100 rounded-md overflow-hidden",children:(0,b.jsx)(ak.default,{src:a.image||"/placeholder.png",alt:a.name,fill:!0,className:"object-cover"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-lg font-bold text-green-600",children:(0,ab.formatCurrency)(a.price)}),a.originalPrice&&(0,b.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,ab.formatCurrency)(a.originalPrice)})]}),a.promotionEndsAt&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(aX,{endDate:a.promotionEndsAt})})]})]})})]},a.id)),0===H.length&&(0,b.jsx)("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"Nenhuma promoção ativa no momento."})]})]})]}),(0,b.jsx)(l.Dialog,{open:t,onOpenChange:u,children:(0,b.jsxs)(l.DialogContent,{children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsx)(l.DialogTitle,{children:"Adicionar Promoção Simples"}),(0,b.jsx)(l.DialogDescription,{children:"Selecione um produto e defina o novo preço promocional."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"product",children:"Produto"}),(0,b.jsxs)(k.Select,{value:v.productId,onValueChange:a=>w({...v,productId:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um produto"})}),(0,b.jsx)(k.SelectContent,{children:n.filter(a=>!a.originalPrice).map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id,children:[a.name," - ",(0,ab.formatCurrency)(a.price)]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"price",children:"Preço Promocional"}),(0,b.jsx)(i.Input,{id:"price",type:"number",step:"0.01",placeholder:"0.00",value:v.promotionalPrice,onChange:a=>w({...v,promotionalPrice:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(F,{id:"date-based",checked:v.isDateBased,onCheckedChange:a=>w({...v,isDateBased:a})}),(0,b.jsx)(j.Label,{htmlFor:"date-based",children:"Definir data de término"})]}),v.isDateBased&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"end-date",children:"Data de Término"}),(0,b.jsx)(i.Input,{id:"end-date",type:"datetime-local",value:v.endDate,onChange:a=>w({...v,endDate:a.target.value})})]})]}),(0,b.jsxs)(l.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),(0,b.jsx)(h.Button,{onClick:D,disabled:!v.productId||!v.promotionalPrice,children:"Salvar Promoção"})]})]})})]})})})}a.s(["default",()=>aY],53772)}];

//# sourceMappingURL=app_admin_promotions_page_tsx_91f4a23d._.js.map
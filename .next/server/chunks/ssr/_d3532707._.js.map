{"version":3,"sources":["../../../../lib/currency.ts","../../../../app/debug/final-test/page.tsx"],"sourcesContent":["export function formatCurrency(value: number): string {\n  return new Intl.NumberFormat(\"pt-BR\", {\n    style: \"currency\",\n    currency: \"BRL\",\n  }).format(value)\n}\n\nexport function formatDate(dateString: string): string {\n  return new Intl.DateTimeFormat(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  }).format(new Date(dateString))\n}\n\nexport function formatDateShort(dateString: string): string {\n  return new Intl.DateTimeFormat(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"short\",\n  }).format(new Date(dateString))\n}\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useCartStore } from \"@/lib/store\";\r\nimport { formatCurrency } from \"@/lib/currency\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { mockProducts } from \"@/lib/mock-data\";\r\n\r\nexport default function FinalTestPage() {\r\n  const { items, addItem, removeItem, getTotal, getItemCount } = useCartStore();\r\n  const [testResults, setTestResults] = useState<any[]>([]);\r\n\r\n  const runTest = async (productId: string, description: string) => {\r\n    try {\r\n      console.log(`Testing addItem with productId: \"${productId}\" (${description})`);\r\n      await addItem(productId, 1);\r\n      \r\n      const result = {\r\n        productId,\r\n        description,\r\n        status: \"success\",\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      setTestResults(prev => [...prev, result]);\r\n    } catch (error: any) {\r\n      const result = {\r\n        productId,\r\n        description,\r\n        status: \"error\",\r\n        error: error.message,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      setTestResults(prev => [...prev, result]);\r\n    }\r\n  };\r\n\r\n  const runAllTests = async () => {\r\n    setTestResults([]);\r\n    \r\n    // Test with valid mock product IDs\r\n    await runTest(\"1\", \"Valid mock product ID '1'\");\r\n    await runTest(\"2\", \"Valid mock product ID '2'\");\r\n    await runTest(\"3\", \"Valid mock product ID '3'\");\r\n    \r\n    // Test with invalid IDs\r\n    await runTest(\"\", \"Empty string\");\r\n    await runTest(\"undefined\", \"String 'undefined'\");\r\n    await runTest(\"null\", \"String 'null'\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Final Cart Test</h1>\r\n      \r\n      <div className=\"space-y-4\">\r\n        <Button onClick={runAllTests}>Run All Tests</Button>\r\n        <Button onClick={() => setTestResults([])} variant=\"outline\">Clear Results</Button>\r\n      </div>\r\n      \r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold\">Test Results</h2>\r\n        {testResults.length === 0 ? (\r\n          <p>No tests run yet</p>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {testResults.map((result, index) => (\r\n              <div key={index} className={`border rounded-lg p-4 ${result.status === \"success\" ? \"border-green-500\" : \"border-red-500\"}`}>\r\n                <h3 className=\"font-medium\">{result.description} (ID: \"{result.productId}\")</h3>\r\n                <p>Status: {result.status}</p>\r\n                {result.error && <p className=\"text-red-500\">Error: {result.error}</p>}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold\">Current Cart</h2>\r\n        <div className=\"border rounded-lg p-4\">\r\n          <p>Items in cart: {getItemCount()}</p>\r\n          <p>Total value: {formatCurrency(getTotal())}</p>\r\n          \r\n          {items.length === 0 ? (\r\n            <p className=\"text-muted-foreground mt-2\">Cart is empty</p>\r\n          ) : (\r\n            <div className=\"mt-2 space-y-2\">\r\n              {items.map((item) => (\r\n                <div key={item.productId} className=\"flex justify-between items-center border-b pb-2\">\r\n                  <div>\r\n                    <h3>Product ID: {item.productId}</h3>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      {item.quantity} Ã— {formatCurrency(item.price)} = {formatCurrency(item.quantity * item.price)}\r\n                    </p>\r\n                  </div>\r\n                  <Button variant=\"destructive\" size=\"sm\" onClick={() => removeItem(item.productId)}>\r\n                    Remove\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold\">Available Mock Products</h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {mockProducts.map((product) => (\r\n            <div key={product.id} className=\"border rounded-lg p-4 space-y-2\">\r\n              <h3 className=\"font-medium\">{product.name}</h3>\r\n              <p className=\"text-sm text-muted-foreground\">{product.description}</p>\r\n              <p className=\"text-primary font-bold\">ID: \"{product.id}\"</p>\r\n              <p className=\"text-primary font-bold\">Price: {formatCurrency(product.price)}</p>\r\n              <Button onClick={() => runTest(product.id, `Mock product ${product.id}`)}>\r\n                Add to Cart\r\n              </Button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"uCAAO,SAAS,EAAe,CAAa,EAC1C,OAAO,IAAI,KAAK,YAAY,CAAC,QAAS,CACpC,MAAO,WACP,SAAU,KACZ,GAAG,MAAM,CAAC,EACZ,CAEO,SAAS,EAAW,CAAkB,EAC3C,OAAO,IAAI,KAAK,cAAc,CAAC,QAAS,CACtC,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SACV,GAAG,MAAM,CAAC,IAAI,KAAK,GACrB,CAEO,SAAS,EAAgB,CAAkB,EAChD,OAAO,IAAI,KAAK,cAAc,CAAC,QAAS,CACtC,IAAK,UACL,MAAO,OACT,GAAG,MAAM,CAAC,IAAI,KAAK,GACrB,mHCpBA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,OAAE,CAAK,SAAE,CAAO,CAAE,YAAU,UAAE,CAAQ,cAAE,CAAY,CAAE,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,IACrE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,EAAE,EAElD,EAAU,MAAO,EAAmB,KACxC,GAAI,CACF,QAAQ,GAAG,CAAC,CAAC,iCAAiC,EAAE,EAAU,GAAG,EAAE,EAAY,CAAC,CAAC,EAC7E,MAAM,EAAQ,EAAW,GAEzB,IAAM,EAAS,WACb,cACA,EACA,OAAQ,UACR,UAAW,IAAI,OAAO,WAAW,EACnC,EAEA,EAAe,GAAQ,IAAI,EAAM,EAAO,CAC1C,CAAE,MAAO,EAAY,CACnB,IAAM,EAAS,WACb,cACA,EACA,OAAQ,QACR,MAAO,EAAM,OAAO,CACpB,UAAW,IAAI,OAAO,WAAW,EACnC,EAEA,EAAe,GAAQ,IAAI,EAAM,EAAO,CAC1C,CACF,EAEM,EAAc,UAClB,EAAe,EAAE,EAGjB,MAAM,EAAQ,IAAK,6BACnB,MAAM,EAAQ,IAAK,6BACnB,MAAM,EAAQ,IAAK,6BAGnB,MAAM,EAAQ,GAAI,gBAClB,MAAM,EAAQ,YAAa,sBAC3B,MAAM,EAAQ,OAAQ,gBACxB,EAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,oBAEnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,WAAa,kBAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAe,EAAE,EAAG,QAAQ,mBAAU,qBAG/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,iBACd,IAAvB,EAAY,MAAM,CACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,qBAEH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAY,GAAG,CAAC,CAAC,EAAQ,IACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAgB,UAAW,CAAC,sBAAsB,EAAoB,YAAlB,EAAO,MAAM,CAAiB,mBAAqB,iBAAA,CAAkB,WACxH,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wBAAe,EAAO,WAAW,CAAC,UAAQ,EAAO,SAAS,CAAC,QACzE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,WAAS,EAAO,MAAM,IACxB,EAAO,KAAK,EAAI,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,yBAAe,UAAQ,EAAO,KAAK,MAHzD,SAUlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,iBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,kBAAgB,OACnB,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,WAAE,gBAAc,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,QAEd,IAAjB,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,kBAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACZ,EAAM,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAyB,UAAU,4DAClC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,eAAa,EAAK,SAAS,IAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACV,EAAK,QAAQ,CAAC,MAAI,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,KAAK,EAAE,MAAI,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,QAAQ,CAAG,EAAK,KAAK,QAG/F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,cAAc,KAAK,KAAK,QAAS,IAAM,EAAW,EAAK,SAAS,WAAG,aAP3E,EAAK,SAAS,WAiBlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,4BACtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACZ,EAAA,YAAY,CAAC,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAqB,UAAU,4CAC9B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uBAAe,EAAQ,IAAI,GACzC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAQ,WAAW,GACjE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAAyB,QAAM,EAAQ,EAAE,CAAC,OACvD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAAyB,UAAQ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAQ,KAAK,KAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAQ,EAAQ,EAAE,CAAE,CAAC,aAAa,EAAE,EAAQ,EAAE,CAAA,CAAE,WAAG,kBALlE,EAAQ,EAAE,UAchC"}
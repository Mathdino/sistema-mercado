module.exports=[53408,a=>{"use strict";let b=(0,a.i(61237).default)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);a.s(["ShoppingBag",()=>b],53408)},3130,a=>{"use strict";var b=a.i(51220),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},72844,a=>{"use strict";function b(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}function c(a){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a))}function d(a){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"short"}).format(new Date(a))}a.s(["formatCurrency",()=>b,"formatDate",()=>c,"formatDateShort",()=>d])},23305,a=>{"use strict";let b=(0,a.i(61237).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],23305)},54161,a=>{"use strict";var b=a.i(51220),c=a.i(57554),d=a.i(42261),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},84980,a=>{"use strict";let b=(0,a.i(61237).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],84980)},51653,a=>{"use strict";let b=(0,a.i(61237).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);a.s(["Minus",()=>b],51653)},72124,a=>{"use strict";var b=a.i(51220),c=a.i(72575),d=a.i(2295),e=a.i(3130),f=a.i(40695),g=a.i(54161),h=a.i(84980),i=a.i(51653),j=a.i(72844),k=a.i(68515),l=a.i(45305);function m({product:a}){if(!a)return console.error("Invalid product data passed to ProductCard: product is null or undefined"),null;if(!a.id||"string"!=typeof a.id||""===a.id.trim())return console.error("Invalid product data passed to ProductCard: Product ID is missing or invalid",a),null;let[m,n]=(0,d.useState)(!1),[o,p]=(0,d.useState)(!1),{items:q,addItem:r,updateQuantity:s}=(0,k.useCartStore)(),{isAuthenticated:t}=(0,k.useAuthStore)(),u=q.find(b=>b.productId===a.id),v=u?.quantity||0,w=(0,d.useRef)(null),{triggerAnimation:x}=function(){let[a,b]=(0,d.useState)([]);return{triggerAnimation:(0,d.useCallback)(a=>{b(b=>[...b,{id:a,active:!0}]),setTimeout(()=>{b(b=>b.map(b=>b.id===a?{...b,active:!1}:b)),setTimeout(()=>{b(b=>b.filter(b=>b.id!==a))},300)},500)},[]),isAnimating:(0,d.useCallback)(b=>{let c=a.find(a=>a.id===b);return!!c&&c.active},[a])}}();(0,d.useEffect)(()=>{let a=()=>{let a=document.querySelector("[data-cart-icon]");if(a){let b=a.getBoundingClientRect(),c=b.left+b.width/2,d=b.top+b.height/2;document.documentElement.style.setProperty("--cart-x",`${c}px`),document.documentElement.style.setProperty("--cart-y",`${d}px`)}};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]);let y=async()=>{if(console.log("Attempting to add product:",a),!a.id||"string"!=typeof a.id||""===a.id.trim())return void console.error("Cannot add product to cart: Product ID is missing or invalid",a);let b=a.id.trim();if("undefined"===b||"null"===b||""===b)return void console.error("Cannot add product to cart: Product ID is invalid",a);if(!t)return void n(!0);p(!0),x(b);try{await r(b,1)}catch(a){console.error("Error adding item to cart:",a)}setTimeout(()=>{p(!1)},500)},z=async()=>{if(!a.id||"string"!=typeof a.id||""===a.id.trim())return void console.error("Cannot add product to cart after login: Product ID is missing or invalid",a);let b=a.id.trim();if("undefined"===b||"null"===b||""===b)return void console.error("Cannot add product to cart after login: Product ID is invalid",a);try{await r(b,1)}catch(a){console.error("Error adding item to cart after login:",a)}},A=a.originalPrice&&a.originalPrice>a.price;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Card,{className:`overflow-hidden py-0 pb-2 transition-all duration-300 ${o?"scale-95 bg-green-50 border-green-200":""}`,ref:w,children:[o&&(0,b.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:(0,b.jsx)("div",{className:"absolute animate-cart-item",style:{left:`${100*Math.random()}%`,top:`${100*Math.random()}%`}})}),(0,b.jsxs)(e.CardContent,{className:"p-0",children:[(0,b.jsxs)("div",{className:"relative aspect-square bg-muted rounded-t-lg overflow-hidden",children:[(0,b.jsx)(c.default,{src:a.image||"/placeholder.svg",alt:a.name,fill:!0,className:"object-cover"}),A&&(0,b.jsxs)(g.Badge,{className:"absolute right-2 top-2 bg-destructive text-destructive-foreground",children:[Math.round((a.originalPrice-a.price)/a.originalPrice*100),"% OFF"]})]}),(0,b.jsxs)("div",{className:"space-y-2 p-3",children:[(0,b.jsxs)("h3",{className:"line-clamp-2 text-sm font-medium leading-tight",children:[a.name," "]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"h-4",children:A&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground line-through",children:(0,j.formatCurrency)(a.originalPrice)})}),(0,b.jsxs)("p",{className:`${A?"text-xl":"text-lg"} font-bold text-primary`,children:[(0,j.formatCurrency)(a.price),(0,b.jsxs)("span",{className:"ml-2 align-middle text-xs font-medium text-muted-foreground",children:["/ ",a.unit]})]})]}),0===v?(0,b.jsx)(f.Button,{onClick:y,className:`w-full transition-all duration-300 ${o?"bg-green-500 hover:bg-green-600":""}`,size:"sm",disabled:o,children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"animate-pulse",children:"✓"}),(0,b.jsx)("span",{className:"ml-1",children:"Adicionado"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Plus,{className:"mr-1 h-4 w-4"}),"Adicionar"]})}):(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border bg-background",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>{s(a.id,v-1)},className:"h-8 w-8",children:(0,b.jsx)(i.Minus,{className:"h-4 w-4"})}),(0,b.jsx)("span",{className:"font-semibold",children:v}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>{s(a.id,v+1)},className:"h-8 w-8",children:(0,b.jsx)(h.Plus,{className:"h-4 w-4"})})]})]})]})]}),(0,b.jsx)(l.LoginModal,{isOpen:m,onClose:()=>n(!1),onLoginSuccess:z})]})}a.s(["ProductCard",()=>m],72124)},66124,a=>{"use strict";var b=a.i(51220),c=a.i(72844);function d({data:a,className:d=""}){let{title:e,description:f,discountPrice:g,backgroundImage:h,productImage:i,config:j}=a,{backgroundType:k="solid",backgroundColor:l="#f3f4f6",gradientStart:m="#ef4444",gradientEnd:n="#b91c1c",gradientDirection:o="to right",fontFamily:p="sans",textColor:q="#000000",fontSize:r="medium",animation:s="none",productTransform:t={scale:1,rotate:0,pos:{x:0,y:0}},extraTexts:u=[]}=j||{},v=a=>{switch(a){case"serif":return"font-serif";case"mono":return"font-mono";case"cursive":return"font-cursive";default:return"font-sans"}};return(0,b.jsxs)("div",{className:`relative w-[396px] h-[220px] overflow-hidden rounded-xl shadow-lg flex flex-row ${d}`,style:{background:"gradient"===k?`linear-gradient(${o}, ${m}, ${n})`:l},children:[(0,b.jsxs)("div",{className:"relative z-10 flex-1 flex flex-col p-3 sm:p-6 justify-center items-start text-left h-full min-w-0",children:[(0,b.jsx)("h2",{className:`font-bold mb-1 sm:mb-2 leading-tight w-full break-words ${v(p)} ${(a=>{switch(a){case"small":return"text-lg";case"large":return"text-4xl";case"xl":return"text-6xl";default:return"text-2xl"}})(r)}`,style:{color:q},children:e}),f&&(0,b.jsx)("p",{className:`mb-2 sm:mb-4 opacity-90 w-full break-words ${v(p)}`,style:{color:q,fontSize:"small"===r?"0.75rem":"0.875rem"},children:f}),g&&(0,b.jsxs)("div",{className:"mt-auto mb-2 sm:mb-4 bg-white/90 backdrop-blur-sm px-2.5 py-1 sm:px-4 sm:py-1.5 rounded-full shadow-lg inline-flex items-center whitespace-nowrap",children:[(0,b.jsx)("span",{className:"text-[10px] sm:text-xs text-gray-500 font-medium mr-1.5 sm:mr-2",children:"Por apenas"}),(0,b.jsx)("span",{className:"text-base sm:text-xl font-bold text-green-600",children:(0,c.formatCurrency)(g)})]})]}),(0,b.jsx)("div",{className:"relative z-10 w-[40%] h-full flex items-center justify-center p-2 sm:p-4 shrink-0",style:{perspective:"800px"},children:i&&(0,b.jsx)("div",{className:`w-full h-full relative ${(a=>{switch(a){case"float":return"animate-float-slow";case"pulse":return"animate-pulse";case"spin":return"animate-spin-slow";case"zoom":return"animate-zoom-in";case"slide":return"animate-slide-in-left";case"rotate3d":return"animate-rotate-3d";default:return""}})(s)}`,children:(0,b.jsx)("div",{className:"w-full h-full",style:{transformOrigin:"center",transform:`translate(${t.pos?.x??0}px, ${t.pos?.y??0}px) scale(${t.scale??1}) rotate(${t.rotate??0}deg)`,willChange:"transform"},children:(0,b.jsx)("img",{src:i,alt:e,className:"w-full h-full object-contain drop-shadow-xl"})})})}),u.map(a=>(0,b.jsx)("div",{className:"absolute",style:{left:`${a.x}px`,top:`${a.y}px`,color:a.color,maxWidth:a.width?`${a.width}px`:void 0,fontSize:"small"===a.fontSize?"0.875rem":"large"===a.fontSize?"1.5rem":"1rem",fontWeight:700,zIndex:30},children:a.content},a.id))]})}a.s(["PromotionBanner",()=>d])},77010,a=>{"use strict";var b=a.i(51220),c=a.i(2295),d=a.i(93995),e=a.i(26128),f=a.i(45305),g=a.i(41602),h=a.i(40695);function i({categories:a}){let c=(0,g.useRouter)();return(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Categorias"}),(0,b.jsx)(h.Button,{variant:"link",className:"text-primary",onClick:()=>c.push("/client/market"),children:"Ver mais"})]}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-4",children:a.slice(0,8).map(a=>(0,b.jsxs)("button",{onClick:()=>c.push(`/client/market?category=${a.id}`),className:"flex flex-col items-center gap-2 transition-transform hover:scale-105",children:[(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-accent text-3xl shadow-sm",children:a.icon}),(0,b.jsx)("span",{className:"text-center text-xs font-medium leading-tight",children:a.name})]},a.id))})]})}var j=a.i(72575),k=a.i(3130);function l({market:a}){let c=a?.banner||"/placeholder-banner.jpg";return(0,b.jsx)(k.Card,{className:"overflow-hidden border-0 shadow-md",children:(0,b.jsx)("div",{className:"relative aspect-[2/1]",children:(0,b.jsx)(j.default,{src:c,alt:"Promoção",fill:!0,className:"object-cover",priority:!0})})})}var m=a.i(66124);function n({banners:a}){let[d,e]=(0,c.useState)(0),[f,g]=(0,c.useState)(0);return((0,c.useEffect)(()=>{g(0)},[d]),(0,c.useEffect)(()=>{if(a.length<=1)return;let b=setInterval(()=>{g(a=>a>=99?0:a+1.6666666666666667)},50),c=setTimeout(()=>{e(b=>(b+1)%a.length)},3e3);return()=>{clearInterval(b),clearTimeout(c)}},[a.length,d]),0===a.length)?null:(0,b.jsxs)("div",{className:"relative w-full max-w-full overflow-hidden",children:[(0,b.jsx)("div",{className:"w-full flex justify-center",children:(0,b.jsx)(m.PromotionBanner,{data:a[d]})}),(0,b.jsx)("div",{className:"absolute bottom-2 left-0 w-full px-4 z-20 flex gap-2",children:a.map((a,c)=>(0,b.jsx)("div",{className:"h-1.5 flex-1 rounded-full bg-black/20 overflow-hidden backdrop-blur-sm",children:(0,b.jsx)("div",{className:"h-full bg-white transition-all duration-75 ease-linear",style:{width:c===d?`${f}%`:c<d?"100%":"0%"}})},c))})]})}var o=a.i(72124);function p({products:a}){let c=(0,g.useRouter)();return(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Ofertas do dia"}),(0,b.jsx)(h.Button,{variant:"link",className:"text-primary",onClick:()=>c.push("/client/market"),children:"Ver todos"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:a.map(a=>(0,b.jsx)(o.ProductCard,{product:a},a.id))})]})}var q=a.i(68515);function r(){let[a,g]=(0,c.useState)(!1),{isAuthenticated:h}=(0,q.useAuthStore)(),[j,k]=(0,c.useState)([]),[m,o]=(0,c.useState)([]),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{y(!0);let[a,b]=await Promise.all([fetch("/api/homepage"),fetch("/api/promotion-banners")]);if(a.ok){let b=await a.json();k(b.categories),o(b.featuredProducts),s(b.promotionProducts),w(b.market)}if(b.ok){let a=await b.json();u(a)}}catch(a){console.error("Error fetching homepage data:",a)}finally{y(!1)}})()},[]),x)?(0,b.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,b.jsx)(d.ClientHeader,{}),(0,b.jsx)("main",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)("p",{children:"Carregando..."})}),(0,b.jsx)(e.BottomNav,{})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,b.jsx)(d.ClientHeader,{}),(0,b.jsxs)("main",{className:"space-y-6 px-4 py-6",children:[t.length>0?(0,b.jsxs)("section",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Promoções"}),(0,b.jsx)(n,{banners:t})]}):(0,b.jsx)(l,{market:v}),(0,b.jsx)(i,{categories:j}),(0,b.jsx)(p,{products:m})]}),(0,b.jsx)(e.BottomNav,{}),(0,b.jsx)(f.LoginModal,{isOpen:a,onClose:()=>g(!1),onLoginSuccess:()=>{}})]})}a.s(["default",()=>r],77010)}];

//# sourceMappingURL=_f4d1742d._.js.map
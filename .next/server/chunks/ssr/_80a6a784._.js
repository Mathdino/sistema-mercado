module.exports=[97568,a=>{"use strict";let b=(0,a.i(61237).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],97568)},5019,a=>{"use strict";var b=a.i(51220),c=a.i(2295),d=a.i(9426),e=a.i(68169),f=a.i(41602),g=a.i(3130),h=a.i(40695),i=a.i(5522),j=a.i(17171),k=a.i(65733),l=a.i(76504),m=a.i(97568),n=a.i(73923),o=a.i(31798),p=a.i(96826),q=a.i(46886),r=a.i(72575);function s(){let a=(0,f.useRouter)(),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)({name:"",icon:"",image:"",imageFile:null}),[E,F]=(0,c.useState)({id:"",name:"",icon:"",image:"",imageFile:null}),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),K=(0,c.useRef)(null),L=(0,c.useRef)(null);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/admin/categories");if(a.ok){let b=await a.json();t(b)}}catch(a){console.error("Error fetching categories:",a)}finally{v(!1)}})()},[]);let M=(a,b=!1)=>{let c=a.target.files?.[0];if(!c)return;let d=new FileReader;d.onloadend=()=>{let a=d.result;b?(F({...E,imageFile:c}),J(a)):(D({...C,imageFile:c}),H(a))},d.readAsDataURL(c)},N=(a=!1)=>{a&&L.current?L.current.click():K.current&&K.current.click()},O=async()=>{try{let a=G||"/placeholder.svg",b=await fetch("/api/admin/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,image:a})});if(b.ok){let a=await b.json();t([...s,a]),x(!1),D({name:"",icon:"",image:"",imageFile:null}),H(null)}else{let a=await b.json();console.error("Error adding category:",a),alert(`Error adding category: ${a.error||"Unknown error"}`)}}catch(a){console.error("Error adding category:",a),alert(`Network error adding category: ${a}`)}},P=async()=>{if(A)try{let a=I||A.image,b=await fetch(`/api/admin/categories/${A.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...E,image:a})});if(b.ok){let a=await b.json();t(s.map(b=>b.id===a.id?a:b)),z(!1),B(null),J(null)}else{let a=await b.json();console.error("Error updating category:",a),alert(`Error updating category: ${a.error||"Unknown error"}`)}}catch(a){console.error("Error updating category:",a),alert(`Network error updating category: ${a}`)}},Q=async a=>{try{let b=await fetch(`/api/admin/categories/${a}`,{method:"DELETE"});if(b.ok)t(s.filter(b=>b.id!==a));else{let a=await b.json();console.error("Error deleting category:",a),alert(`Error deleting category: ${a.error||"Unknown error"}`)}}catch(a){console.error("Error deleting category:",a),alert(`Network error deleting category: ${a}`)}};return u?(0,b.jsx)(d.AuthGuard,{requireRole:"admin",children:(0,b.jsx)(e.AdminLayout,{children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)("p",{children:"Carregando categorias..."})})})}):(0,b.jsx)(d.AuthGuard,{requireRole:"admin",children:(0,b.jsxs)(e.AdminLayout,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Categorias"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie as categorias de produtos"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer flex items-center justify-between",onClick:()=>a.push("/admin/categories"),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:"Categorias"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Gerenciar categorias de produtos"})]}),(0,b.jsx)(q.ChevronRight,{className:"h-5 w-5 text-gray-400"})]}),(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer flex items-center justify-between",onClick:()=>a.push("/admin/products"),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:"Produtos"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Gerenciar produtos"})]}),(0,b.jsx)(q.ChevronRight,{className:"h-5 w-5 text-gray-400"})]}),(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer flex items-center justify-between",onClick:()=>a.push("/admin/promotions"),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:"PromoÃ§Ãµes"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Gerenciar promoÃ§Ãµes"})]}),(0,b.jsx)(q.ChevronRight,{className:"h-5 w-5 text-gray-400"})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(h.Button,{onClick:()=>x(!0),children:[(0,b.jsx)(m.Upload,{className:"mr-2 h-4 w-4"}),"Adicionar Categoria"]})}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(a=>(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{children:a.name})]}),(0,b.jsxs)(l.DropdownMenu,{children:[(0,b.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(n.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>{B(a),F({id:a.id,name:a.name,icon:a.icon,image:a.image,imageFile:null}),J(a.image),z(!0)},children:[(0,b.jsx)(o.Edit,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>Q(a.id),children:[(0,b.jsx)(p.Trash2,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})]})}),(0,b.jsx)(g.CardContent,{className:"p-4 pt-0",children:(0,b.jsx)("div",{className:"relative h-32 w-full overflow-hidden rounded-lg bg-muted",children:(0,b.jsx)(r.default,{src:a.image||"/placeholder.svg",alt:a.name,fill:!0,className:"object-cover"})})})]},a.id))})]}),(0,b.jsx)(k.Dialog,{open:w,onOpenChange:x,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Adicionar Categoria"}),(0,b.jsx)(k.DialogDescription,{children:"Preencha as informaÃ§Ãµes da nova categoria"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"category-name",children:"Nome da Categoria"}),(0,b.jsx)(i.Input,{id:"category-name",value:C.name,onChange:a=>D({...C,name:a.target.value}),placeholder:"Ex: Padaria"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"category-icon",children:"Ãcone (Emoji)"}),(0,b.jsx)(i.Input,{id:"category-icon",value:C.icon,onChange:a=>D({...C,icon:a.target.value}),placeholder:"Ex: ðŸ¥–"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Imagem da Categoria"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"relative h-24 w-24 cursor-pointer overflow-hidden rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 flex items-center justify-center",onClick:()=>N(),children:G?(0,b.jsx)(r.default,{src:G,alt:"Preview",fill:!0,className:"object-cover"}):(0,b.jsx)(m.Upload,{className:"h-6 w-6 text-gray-400"})}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>N(),children:"Escolher Imagem"}),(0,b.jsx)("input",{type:"file",ref:K,className:"hidden",accept:"image/*",onChange:a=>M(a)})]})]})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>x(!1),children:"Cancelar"}),(0,b.jsx)(h.Button,{onClick:O,children:"Adicionar Categoria"})]})]})}),(0,b.jsx)(k.Dialog,{open:y,onOpenChange:z,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Editar Categoria"}),(0,b.jsx)(k.DialogDescription,{children:"Edite as informaÃ§Ãµes da categoria"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"edit-category-name",children:"Nome da Categoria"}),(0,b.jsx)(i.Input,{id:"edit-category-name",value:E.name,onChange:a=>F({...E,name:a.target.value}),placeholder:"Ex: Padaria"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"edit-category-icon",children:"Ãcone (Emoji)"}),(0,b.jsx)(i.Input,{id:"edit-category-icon",value:E.icon,onChange:a=>F({...E,icon:a.target.value}),placeholder:"Ex: ðŸ¥–"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Imagem da Categoria"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"relative h-24 w-24 cursor-pointer overflow-hidden rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 flex items-center justify-center",onClick:()=>N(!0),children:I?(0,b.jsx)(r.default,{src:I,alt:"Preview",fill:!0,className:"object-cover"}):(0,b.jsx)(m.Upload,{className:"h-6 w-6 text-gray-400"})}),(0,b.jsx)(h.Button,{type:"button",variant:"outline",onClick:()=>N(!0),children:"Escolher Imagem"}),(0,b.jsx)("input",{type:"file",ref:L,className:"hidden",accept:"image/*",onChange:a=>M(a,!0)})]})]})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>z(!1),children:"Cancelar"}),(0,b.jsx)(h.Button,{onClick:P,children:"Salvar AlteraÃ§Ãµes"})]})]})})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=_80a6a784._.js.map
module.exports=[64537,a=>{"use strict";let b=(0,a.i(61237).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],64537)},76929,a=>{"use strict";let b=(0,a.i(61237).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],76929)},26128,3803,a=>{"use strict";var b=a.i(51220),c=a.i(41602),d=a.i(61237);let e=(0,d.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var f=a.i(53408);let g=(0,d.default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var h=a.i(76929);let i=(0,d.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>i],3803);var j=a.i(97895),k=a.i(68515),l=a.i(54161),m=a.i(2295);function n(){let a=(0,c.useRouter)(),d=(0,c.usePathname)(),{isAuthenticated:n}=(0,k.useAuthStore)(),[o,p]=(0,m.useState)(!1),[q,r]=(0,m.useState)(0);(0,m.useEffect)(()=>{p(!0),r(k.useCartStore.getState().getItemCount())},[]),(0,m.useEffect)(()=>{if(o)return k.useCartStore.subscribe(a=>{r(a.getItemCount())})},[o]);let s=[{icon:e,label:"Início",path:"/client"},{icon:f.ShoppingBag,label:"Mercado",path:"/client/market"},{icon:g,label:"Carrinho",path:"/client/cart"},{icon:h.Clock,label:"Pedidos",path:"/client/orders",requireAuth:!0},{icon:i,label:"Perfil",path:"/client/profile",requireAuth:!0}],t=b=>{a.push(b)};return o?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t bg-background",children:(0,b.jsx)("div",{className:"relative flex items-center justify-around py-2",children:s.map(a=>{let c=a.icon,e=d===a.path;return"/client/cart"===a.path?(0,b.jsxs)("button",{onClick:()=>t(a.path),className:"relative -translate-y-3 transform",children:[(0,b.jsxs)("div",{className:(0,j.cn)("relative flex h-12 w-12 items-center justify-center rounded-full bg-primary shadow-lg transition-all",e?"ring-2 ring-primary":""),"data-cart-icon":!0,children:[(0,b.jsx)(c,{className:"h-6 w-6 text-primary-foreground"}),q>0&&(0,b.jsx)("span",{className:"absolute -right-1.5 -top-1.5 flex h-5 w-5 items-center justify-center",children:(0,b.jsx)(l.Badge,{className:"absolute h-5 w-5 rounded-full p-0 text-xs",children:q})})]}),(0,b.jsx)("span",{className:(0,j.cn)("mt-1 block text-center text-xs font-semibold",e?"text-primary":"text-foreground"),children:a.label})]},a.path):(0,b.jsxs)("button",{onClick:()=>t(a.path),className:(0,j.cn)("flex flex-col items-center gap-1 px-4 py-2 transition-colors",e?"text-primary":"text-muted-foreground"),children:[(0,b.jsx)(c,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"text-xs font-medium",children:a.label})]},a.path)})})})}):(0,b.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 border-t bg-background",children:(0,b.jsx)("div",{className:"relative flex items-center justify-around py-2",children:s.map(a=>(a.icon,(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1 px-4 py-2",children:[(0,b.jsx)("div",{className:"h-5 w-5"})," ",(0,b.jsx)("span",{className:"text-xs font-medium invisible",children:a.label})]},a.path)))})})}a.s(["BottomNav",()=>n],26128)},7379,a=>{"use strict";var b=a.i(51220),c=a.i(2295),d=a.i(87695),e="horizontal",f=["horizontal","vertical"],g=c.forwardRef((a,c)=>{var g;let{decorative:h,orientation:i=e,...j}=a,k=(g=i,f.includes(g))?i:e;return(0,b.jsx)(d.Primitive.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});g.displayName="Separator";var h=a.i(97895);function i({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(g,{"data-slot":"separator",decorative:d,orientation:c,className:(0,h.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}a.s(["Separator",()=>i],7379)},31798,a=>{"use strict";let b=(0,a.i(61237).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],31798)},75407,a=>{"use strict";let b=(0,a.i(61237).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],75407)},17813,a=>{"use strict";var b=a.i(51220),c=a.i(2295),d=a.i(41602),e=a.i(93995),f=a.i(26128),g=a.i(45305),h=a.i(40695),i=a.i(3130),j=a.i(7379),k=a.i(5522),l=a.i(17171),m=a.i(68515),n=a.i(77687),o=a.i(19113),p=a.i(75407),q=a.i(64537),r=a.i(31798);let s=(0,a.i(61237).default)("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);function t(){let[a,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)({name:"",cpf:"",phone:"",address:{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}}),C=(0,d.useRouter)(),{toast:D}=(0,n.useToast)(),{user:E,logout:F,isAuthenticated:G,updateUser:H}=(0,m.useAuthStore)();(0,c.useEffect)(()=>{z(!0)},[]),(0,c.useEffect)(()=>{if(y&&!G)t(!0);else if(y&&E){let a=E.addresses.find(a=>a.isDefault)||E.addresses[0];B({name:E.name||"",cpf:E.cpf?J(E.cpf):"",phone:E.phone?K(E.phone):"",address:{street:a?.street||"",number:a?.number||"",complement:a?.complement||"",neighborhood:a?.neighborhood||"",city:a?.city||"",state:a?.state||"",zipCode:a?.zipCode?L(a.zipCode):""}})}},[y,G,E]);let I=async()=>{if(E){console.log("Updating user with ID:",E.id),x(!0);try{let a=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:A.name,phone:A.phone,address:A.address})}),b=await a.json();if(console.log("API response:",b),a.ok&&b.user)H(b.user),D({title:"Perfil atualizado",description:"Suas informações foram salvas com sucesso."}),v(!1);else throw Error(b.error||"Failed to update profile")}catch(a){console.error("Error updating profile:",a),D({title:"Erro ao atualizar",description:"Não foi possível salvar as alterações. Tente novamente.",variant:"destructive"})}finally{x(!1)}}},J=a=>a.replace(/\D/g,"").slice(0,11).replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),K=a=>a.replace(/\D/g,"").slice(0,11).replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2"),L=a=>a.replace(/\D/g,"").slice(0,8).replace(/(\d{5})(\d)/,"$1-$2");return y&&(G||a)?(0,b.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,b.jsx)(e.ClientHeader,{}),(0,b.jsxs)("main",{className:"space-y-4 px-4 py-6",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardContent,{className:"flex items-center gap-4 p-4",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary",children:(0,b.jsx)("span",{className:"text-lg font-bold text-primary-foreground",children:(a=>{if(!a)return"UN";let b=a.trim().split(" ");return 1===b.length?b[0].charAt(0).toUpperCase():`${b[0].charAt(0)}${b[b.length-1].charAt(0)}`.toUpperCase()})(E?.name||"")})}),(0,b.jsx)("div",{children:(0,b.jsx)("h2",{className:"font-semibold",children:E?.name})})]}),(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"ml-auto",onClick:()=>v(!u),children:["Editar Conta",(0,b.jsx)(r.Edit,{className:"h-4 w-4"})]})]}),u?(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Editar informações"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"name",children:"Nome completo"}),(0,b.jsx)(k.Input,{id:"name",value:A.name,onChange:a=>B({...A,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"cpf",children:"CPF"}),(0,b.jsx)(k.Input,{id:"cpf",value:A.cpf,readOnly:!0,className:"bg-muted"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"phone",children:"Telefone"}),(0,b.jsx)(k.Input,{id:"phone",value:A.phone,onChange:a=>{let b=K(a.target.value);B({...A,phone:b})}})]}),(0,b.jsx)(j.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{children:"Endereço padrão"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"street",children:"Rua"}),(0,b.jsx)(k.Input,{id:"street",value:A.address.street,onChange:a=>B({...A,address:{...A.address,street:a.target.value}})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"number",children:"Número"}),(0,b.jsx)(k.Input,{id:"number",value:A.address.number,onChange:a=>B({...A,address:{...A.address,number:a.target.value}})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"complement",children:"Complemento"}),(0,b.jsx)(k.Input,{id:"complement",value:A.address.complement,onChange:a=>B({...A,address:{...A.address,complement:a.target.value}})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"neighborhood",children:"Bairro"}),(0,b.jsx)(k.Input,{id:"neighborhood",value:A.address.neighborhood,onChange:a=>B({...A,address:{...A.address,neighborhood:a.target.value}})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"zipCode",children:"CEP"}),(0,b.jsx)(k.Input,{id:"zipCode",value:A.address.zipCode,onChange:a=>{let b=L(a.target.value);B({...A,address:{...A.address,zipCode:b}})}})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"city",children:"Cidade"}),(0,b.jsx)(k.Input,{id:"city",value:A.address.city,onChange:a=>B({...A,address:{...A.address,city:a.target.value}})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"state",children:"Estado"}),(0,b.jsx)(k.Input,{id:"state",value:A.address.state,onChange:a=>B({...A,address:{...A.address,state:a.target.value}})})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",className:"flex-1",onClick:()=>v(!1),disabled:w,children:"Cancelar"}),(0,b.jsx)(h.Button,{className:"flex-1",onClick:I,disabled:w,children:w?"Salvando...":"Salvar"})]})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Informações pessoais"})}),(0,b.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(p.Phone,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Telefone"}),(0,b.jsx)("p",{className:"font-medium",children:E?.phone})]})]}),(0,b.jsx)(j.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(s,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"CPF"}),(0,b.jsx)("p",{className:"font-medium",children:E?.cpf?J(E.cpf):""})]})]})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Endereço padrão"})}),(0,b.jsx)(i.CardContent,{children:E?.addresses.find(a=>a.isDefault)?(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.MapPin,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"font-medium",children:[E.addresses.find(a=>a.isDefault)?.street,","," ",E.addresses.find(a=>a.isDefault)?.number,E.addresses.find(a=>a.isDefault)?.complement&&`, ${E.addresses.find(a=>a.isDefault)?.complement}`," ","-",E.addresses.find(a=>a.isDefault)?.neighborhood,", ",E.addresses.find(a=>a.isDefault)?.city," ","-",E.addresses.find(a=>a.isDefault)?.state,","," ",E.addresses.find(a=>a.isDefault)?.zipCode]})})]}):(0,b.jsx)("p",{className:"text-muted-foreground",children:"Nenhum endereço cadastrado"})})]})]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full",onClick:()=>{F(),D({title:"Logout realizado",description:"Até logo!"}),C.push("/client")},children:[(0,b.jsx)(q.LogOut,{className:"mr-2 h-4 w-4"}),"Sair"]})]}),(0,b.jsx)(f.BottomNav,{}),(0,b.jsx)(g.LoginModal,{isOpen:a,onClose:()=>t(!1),onLoginSuccess:()=>{}})]}):null}a.s(["default",()=>t],17813)}];

//# sourceMappingURL=_5a8c15c0._.js.map
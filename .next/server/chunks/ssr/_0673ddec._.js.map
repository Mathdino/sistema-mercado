{"version":3,"sources":["../../../../lib/currency.ts","../../../../app/debug/cart-debug/page.tsx"],"sourcesContent":["export function formatCurrency(value: number): string {\n  return new Intl.NumberFormat(\"pt-BR\", {\n    style: \"currency\",\n    currency: \"BRL\",\n  }).format(value)\n}\n\nexport function formatDate(dateString: string): string {\n  return new Intl.DateTimeFormat(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"2-digit\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  }).format(new Date(dateString))\n}\n\nexport function formatDateShort(dateString: string): string {\n  return new Intl.DateTimeFormat(\"pt-BR\", {\n    day: \"2-digit\",\n    month: \"short\",\n  }).format(new Date(dateString))\n}\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useCartStore } from \"@/lib/store\";\r\nimport { formatCurrency } from \"@/lib/currency\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nexport default function CartDebugPage() {\r\n  const { items, addItem, removeItem, getTotal, getItemCount } = useCartStore();\r\n  const [debugInfo, setDebugInfo] = useState<any>({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Debug function to test product fetching\r\n  const debugProductFetch = async () => {\r\n    try {\r\n      // Test individual product fetch with a known good ID\r\n      const productId = \"1\"; // Test with first product\r\n      console.log(\"Fetching product with ID:\", productId);\r\n      \r\n      const individualResponse = await fetch(`/api/products/${productId}`);\r\n      const individualData = await individualResponse.json();\r\n      \r\n      // Test all products fetch\r\n      const allResponse = await fetch(`/api/products`);\r\n      const allData = await allResponse.json();\r\n      \r\n      setDebugInfo({\r\n        individualFetch: {\r\n          ok: individualResponse.ok,\r\n          status: individualResponse.status,\r\n          data: individualData\r\n        },\r\n        allFetch: {\r\n          ok: allResponse.ok,\r\n          status: allResponse.status,\r\n          data: allData\r\n        }\r\n      });\r\n    } catch (error: any) {\r\n      console.error(\"Debug error:\", error);\r\n      setDebugInfo({ error: error.message || \"Unknown error\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    debugProductFetch();\r\n  }, []);\r\n\r\n  const handleAddItem = async (productId: string) => {\r\n    console.log(\"Adding item with ID:\", productId);\r\n    await addItem(productId, 1);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"p-4\">Loading debug info...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Cart Debug Page</h1>\r\n      \r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold\">Debug Info</h2>\r\n        <pre className=\"bg-gray-100 p-4 rounded overflow-auto max-h-96\">\r\n          {JSON.stringify(debugInfo, null, 2)}\r\n        </pre>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold\">\r\n          Cart ({getItemCount()} items) - Total: {formatCurrency(getTotal())}\r\n        </h2>\r\n        {items.length === 0 ? (\r\n          <p>Your cart is empty</p>\r\n        ) : (\r\n          <div className=\"space-y-2\">\r\n            {items.map((item, index) => (\r\n              <div key={`${item.productId}-${index}`} className=\"flex justify-between items-center border-b pb-2\">\r\n                <div>\r\n                  <h3>Product ID: {item.productId}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    {item.quantity} Ã— {formatCurrency(item.price)} = {formatCurrency(item.quantity * item.price)}\r\n                  </p>\r\n                </div>\r\n                <Button variant=\"destructive\" onClick={() => removeItem(item.productId)}>\r\n                  Remove\r\n                </Button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <h2 className=\"text-xl font-semibold\">Test Adding Items</h2>\r\n        <div className=\"flex gap-2\">\r\n          <Button onClick={() => handleAddItem(\"1\")}>Add Product 1</Button>\r\n          <Button onClick={() => handleAddItem(\"2\")}>Add Product 2</Button>\r\n          <Button onClick={() => handleAddItem(\"3\")}>Add Product 3</Button>\r\n        </div>\r\n        <div className=\"mt-4\">\r\n          <p className=\"text-sm text-muted-foreground\">\r\n            Note: Make sure products with these IDs exist in your database. If they don't, try using actual product IDs from the debug info above.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"uCAAO,SAAS,EAAe,CAAa,EAC1C,OAAO,IAAI,KAAK,YAAY,CAAC,QAAS,CACpC,MAAO,WACP,SAAU,KACZ,GAAG,MAAM,CAAC,EACZ,CAEO,SAAS,EAAW,CAAkB,EAC3C,OAAO,IAAI,KAAK,cAAc,CAAC,QAAS,CACtC,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SACV,GAAG,MAAM,CAAC,IAAI,KAAK,GACrB,CAEO,SAAS,EAAgB,CAAkB,EAChD,OAAO,IAAI,KAAK,cAAc,CAAC,QAAS,CACtC,IAAK,UACL,MAAO,OACT,GAAG,MAAM,CAAC,IAAI,KAAK,GACrB,mHCpBA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,GAAM,OAAE,CAAK,CAAE,SAAO,YAAE,CAAU,UAAE,CAAQ,cAAE,CAAY,CAAE,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,IACrE,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,CAAC,GAC3C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGjC,EAAoB,UACxB,GAAI,CAGF,QAAQ,GAAG,CAAC,4BADM,CACuB,IAEzC,AAHuB,IAGjB,EAAqB,MAAM,MAAM,CAAC,OAHS,OAGK,EAAE,EAClD,EAAiB,MAAM,CADsC,CACnB,IAAI,GAG9C,EAAc,MAAM,MAAM,CAAC,aAAa,CAAC,EACzC,EAAU,MAAM,EAAY,IAAI,GAEtC,EAAa,CACX,gBAAiB,CACf,GAAI,EAAmB,EAAE,CACzB,OAAQ,EAAmB,MAAM,CACjC,KAAM,CACR,EACA,SAAU,CACR,GAAI,EAAY,EAAE,CAClB,OAAQ,EAAY,MAAM,CAC1B,KAAM,CACR,CACF,EACF,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,eAAgB,GAC9B,EAAa,CAAE,MAAO,EAAM,OAAO,EAAI,eAAgB,EACzD,QAAU,CACR,GAAW,EACb,CACF,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,EAAE,EAEL,IAAM,EAAgB,MAAO,IAC3B,QAAQ,GAAG,CAAC,uBAAwB,GACpC,MAAM,EAAQ,EAAW,EAC3B,SAEA,AAAI,EACK,CAAA,EAAA,EAAA,EADI,CACJ,EAAC,MAAA,CAAI,UAAU,eAAM,0BAI5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,oBAEnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,eACtC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACZ,KAAK,SAAS,CAAC,EAAW,KAAM,QAIrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,kCAAwB,SAC7B,IAAe,oBAAkB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,QAEvC,IAAjB,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,uBAEH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAM,GAAG,CAAC,CAAC,EAAM,IAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAuC,UAAU,4DAChD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WAAG,eAAa,EAAK,SAAS,IAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,0CACV,EAAK,QAAQ,CAAC,MAAI,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,KAAK,EAAE,MAAI,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,QAAQ,CAAG,EAAK,KAAK,QAG/F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,cAAc,QAAS,IAAM,EAAW,EAAK,SAAS,WAAG,aAPjE,CAAA,EAAG,EAAK,SAAS,CAAC,CAAC,EAAE,EAAA,CAAO,QAgB9C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,sBACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAc,cAAM,kBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAc,cAAM,kBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,EAAc,cAAM,qBAE7C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,kJAOvD"}